"use strict";(()=>{var bo=Object.create;var Lr=Object.defineProperty;var _o=Object.getOwnPropertyDescriptor;var yo=Object.getOwnPropertyNames;var vo=Object.getPrototypeOf,Mo=Object.prototype.hasOwnProperty;var bi=(Z,re)=>()=>(re||Z((re={exports:{}}).exports,re),re.exports);var Lo=(Z,re,U,d)=>{if(re&&typeof re=="object"||typeof re=="function")for(let g of yo(re))!Mo.call(Z,g)&&g!==U&&Lr(Z,g,{get:()=>re[g],enumerable:!(d=_o(re,g))||d.enumerable});return Z};var Vn=(Z,re,U)=>(U=Z!=null?bo(vo(Z)):{},Lo(re||!Z||!Z.__esModule?Lr(U,"default",{value:Z,enumerable:!0}):U,Z));var wn=bi((_i,wr)=>{(function(Z,re){typeof _i=="object"&&typeof wr<"u"?re(_i):typeof define=="function"&&define.amd?define(["exports"],re):(Z=typeof globalThis<"u"?globalThis:Z||self,re(Z.leaflet={}))})(_i,function(Z){"use strict";var re="1.9.4";function U(e){var n,r,a,f;for(r=1,a=arguments.length;r<a;r++){f=arguments[r];for(n in f)e[n]=f[n]}return e}var d=Object.create||function(){function e(){}return function(n){return e.prototype=n,new e}}();function g(e,n){var r=Array.prototype.slice;if(e.bind)return e.bind.apply(e,r.call(arguments,1));var a=r.call(arguments,2);return function(){return e.apply(n,a.length?a.concat(r.call(arguments)):arguments)}}var h=0;function m(e){return"_leaflet_id"in e||(e._leaflet_id=++h),e._leaflet_id}function _(e,n,r){var a,f,p,I;return I=function(){a=!1,f&&(p.apply(r,f),f=!1)},p=function(){a?f=arguments:(e.apply(r,arguments),setTimeout(I,n),a=!0)},p}function T(e,n,r){var a=n[1],f=n[0],p=a-f;return e===a&&r?e:((e-f)%p+p)%p+f}function v(){return!1}function N(e,n){if(n===!1)return e;var r=Math.pow(10,n===void 0?6:n);return Math.round(e*r)/r}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return H(e).split(/\s+/)}function X(e,n){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?d(e.options):{});for(var r in n)e.options[r]=n[r];return e.options}function Y(e,n,r){var a=[];for(var f in e)a.push(encodeURIComponent(r?f.toUpperCase():f)+"="+encodeURIComponent(e[f]));return(!n||n.indexOf("?")===-1?"?":"&")+a.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function Q(e,n){return e.replace(A,function(r,a){var f=n[a];if(f===void 0)throw new Error("No value provided for variable "+r);return typeof f=="function"&&(f=f(n)),f})}var z=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function j(e,n){for(var r=0;r<e.length;r++)if(e[r]===n)return r;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var S=0;function B(e){var n=+new Date,r=Math.max(0,16-(n-S));return S=n+r,window.setTimeout(e,r)}var $=window.requestAnimationFrame||w("RequestAnimationFrame")||B,se=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function ne(e,n,r){if(r&&$===B)e.call(n);else return $.call(window,g(e,n))}function oe(e){e&&se.call(window,e)}var ge={__proto__:null,extend:U,create:d,bind:g,get lastId(){return h},stamp:m,throttle:_,wrapNum:T,falseFn:v,formatNum:N,trim:H,splitWords:K,setOptions:X,getParamString:Y,template:Q,isArray:z,indexOf:j,emptyImageUrl:G,requestFn:$,cancelFn:se,requestAnimFrame:ne,cancelAnimFrame:oe};function ce(){}ce.extend=function(e){var n=function(){X(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,a=d(r);a.constructor=n,n.prototype=a;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(n[f]=this[f]);return e.statics&&U(n,e.statics),e.includes&&(de(e.includes),U.apply(null,[a].concat(e.includes))),U(a,e),delete a.statics,delete a.includes,a.options&&(a.options=r.options?d(r.options):{},U(a.options,e.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,I=a._initHooks.length;p<I;p++)a._initHooks[p].call(this)}},n},ce.include=function(e){var n=this.prototype.options;return U(this.prototype,e),e.options&&(this.prototype.options=n,this.mergeOptions(e.options)),this},ce.mergeOptions=function(e){return U(this.prototype.options,e),this},ce.addInitHook=function(e){var n=Array.prototype.slice.call(arguments,1),r=typeof e=="function"?e:function(){this[e].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function de(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=z(e)?e:[e];for(var n=0;n<e.length;n++)e[n]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Le={on:function(e,n,r){if(typeof e=="object")for(var a in e)this._on(a,e[a],n);else{e=K(e);for(var f=0,p=e.length;f<p;f++)this._on(e[f],n,r)}return this},off:function(e,n,r){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var a in e)this._off(a,e[a],n);else{e=K(e);for(var f=arguments.length===1,p=0,I=e.length;p<I;p++)f?this._off(e[p]):this._off(e[p],n,r)}return this},_on:function(e,n,r,a){if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}if(this._listens(e,n,r)===!1){r===this&&(r=void 0);var f={fn:n,ctx:r};a&&(f.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(f)}},_off:function(e,n,r){var a,f,p;if(this._events&&(a=this._events[e],!!a)){if(arguments.length===1){if(this._firingCount)for(f=0,p=a.length;f<p;f++)a[f].fn=v;delete this._events[e];return}if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}var I=this._listens(e,n,r);if(I!==!1){var R=a[I];this._firingCount&&(R.fn=v,this._events[e]=a=a.slice()),a.splice(I,1)}}},fire:function(e,n,r){if(!this.listens(e,r))return this;var a=U({},n,{type:e,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var f=this._events[e];if(f){this._firingCount=this._firingCount+1||1;for(var p=0,I=f.length;p<I;p++){var R=f[p],V=R.fn;R.once&&this.off(e,V,R.ctx),V.call(R.ctx||this,a)}this._firingCount--}}return r&&this._propagateEvent(a),this},listens:function(e,n,r,a){typeof e!="string"&&console.warn('"string" type argument expected');var f=n;typeof n!="function"&&(a=!!n,f=void 0,r=void 0);var p=this._events&&this._events[e];if(p&&p.length&&this._listens(e,f,r)!==!1)return!0;if(a){for(var I in this._eventParents)if(this._eventParents[I].listens(e,n,r,a))return!0}return!1},_listens:function(e,n,r){if(!this._events)return!1;var a=this._events[e]||[];if(!n)return!!a.length;r===this&&(r=void 0);for(var f=0,p=a.length;f<p;f++)if(a[f].fn===n&&a[f].ctx===r)return f;return!1},once:function(e,n,r){if(typeof e=="object")for(var a in e)this._on(a,e[a],n,!0);else{e=K(e);for(var f=0,p=e.length;f<p;f++)this._on(e[f],n,r,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[m(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[m(e)],this},_propagateEvent:function(e){for(var n in this._eventParents)this._eventParents[n].fire(e.type,U({layer:e.target,propagatedFrom:e.target},e),!0)}};Le.addEventListener=Le.on,Le.removeEventListener=Le.clearAllEventListeners=Le.off,Le.addOneTimeEventListener=Le.once,Le.fireEvent=Le.fire,Le.hasEventListeners=Le.listens;var he=ce.extend(Le);function fe(e,n,r){this.x=r?Math.round(e):e,this.y=r?Math.round(n):n}var Oe=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};fe.prototype={clone:function(){return new fe(this.x,this.y)},add:function(e){return this.clone()._add(ie(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(ie(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new fe(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new fe(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Oe(this.x),this.y=Oe(this.y),this},distanceTo:function(e){e=ie(e);var n=e.x-this.x,r=e.y-this.y;return Math.sqrt(n*n+r*r)},equals:function(e){return e=ie(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=ie(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function ie(e,n,r){return e instanceof fe?e:z(e)?new fe(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new fe(e.x,e.y):new fe(e,n,r)}function me(e,n){if(e)for(var r=n?[e,n]:e,a=0,f=r.length;a<f;a++)this.extend(r[a])}me.prototype={extend:function(e){var n,r;if(!e)return this;if(e instanceof fe||typeof e[0]=="number"||"x"in e)n=r=ie(e);else if(e=Ne(e),n=e.min,r=e.max,!n||!r)return this;return!this.min&&!this.max?(this.min=n.clone(),this.max=r.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(e){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var n,r;return typeof e[0]=="number"||e instanceof fe?e=ie(e):e=Ne(e),e instanceof me?(n=e.min,r=e.max):n=r=e,n.x>=this.min.x&&r.x<=this.max.x&&n.y>=this.min.y&&r.y<=this.max.y},intersects:function(e){e=Ne(e);var n=this.min,r=this.max,a=e.min,f=e.max,p=f.x>=n.x&&a.x<=r.x,I=f.y>=n.y&&a.y<=r.y;return p&&I},overlaps:function(e){e=Ne(e);var n=this.min,r=this.max,a=e.min,f=e.max,p=f.x>n.x&&a.x<r.x,I=f.y>n.y&&a.y<r.y;return p&&I},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var n=this.min,r=this.max,a=Math.abs(n.x-r.x)*e,f=Math.abs(n.y-r.y)*e;return Ne(ie(n.x-a,n.y-f),ie(r.x+a,r.y+f))},equals:function(e){return e?(e=Ne(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function Ne(e,n){return!e||e instanceof me?e:new me(e,n)}function Ge(e,n){if(e)for(var r=n?[e,n]:e,a=0,f=r.length;a<f;a++)this.extend(r[a])}Ge.prototype={extend:function(e){var n=this._southWest,r=this._northEast,a,f;if(e instanceof Se)a=e,f=e;else if(e instanceof Ge){if(a=e._southWest,f=e._northEast,!a||!f)return this}else return e?this.extend(xe(e)||we(e)):this;return!n&&!r?(this._southWest=new Se(a.lat,a.lng),this._northEast=new Se(f.lat,f.lng)):(n.lat=Math.min(a.lat,n.lat),n.lng=Math.min(a.lng,n.lng),r.lat=Math.max(f.lat,r.lat),r.lng=Math.max(f.lng,r.lng)),this},pad:function(e){var n=this._southWest,r=this._northEast,a=Math.abs(n.lat-r.lat)*e,f=Math.abs(n.lng-r.lng)*e;return new Ge(new Se(n.lat-a,n.lng-f),new Se(r.lat+a,r.lng+f))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof Se||"lat"in e?e=xe(e):e=we(e);var n=this._southWest,r=this._northEast,a,f;return e instanceof Ge?(a=e.getSouthWest(),f=e.getNorthEast()):a=f=e,a.lat>=n.lat&&f.lat<=r.lat&&a.lng>=n.lng&&f.lng<=r.lng},intersects:function(e){e=we(e);var n=this._southWest,r=this._northEast,a=e.getSouthWest(),f=e.getNorthEast(),p=f.lat>=n.lat&&a.lat<=r.lat,I=f.lng>=n.lng&&a.lng<=r.lng;return p&&I},overlaps:function(e){e=we(e);var n=this._southWest,r=this._northEast,a=e.getSouthWest(),f=e.getNorthEast(),p=f.lat>n.lat&&a.lat<r.lat,I=f.lng>n.lng&&a.lng<r.lng;return p&&I},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,n){return e?(e=we(e),this._southWest.equals(e.getSouthWest(),n)&&this._northEast.equals(e.getNorthEast(),n)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function we(e,n){return e instanceof Ge?e:new Ge(e,n)}function Se(e,n,r){if(isNaN(e)||isNaN(n))throw new Error("Invalid LatLng object: ("+e+", "+n+")");this.lat=+e,this.lng=+n,r!==void 0&&(this.alt=+r)}Se.prototype={equals:function(e,n){if(!e)return!1;e=xe(e);var r=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return r<=(n===void 0?1e-9:n)},toString:function(e){return"LatLng("+N(this.lat,e)+", "+N(this.lng,e)+")"},distanceTo:function(e){return Je.distance(this,xe(e))},wrap:function(){return Je.wrapLatLng(this)},toBounds:function(e){var n=180*e/40075017,r=n/Math.cos(Math.PI/180*this.lat);return we([this.lat-n,this.lng-r],[this.lat+n,this.lng+r])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function xe(e,n,r){return e instanceof Se?e:z(e)&&typeof e[0]!="object"?e.length===3?new Se(e[0],e[1],e[2]):e.length===2?new Se(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new Se(e.lat,"lng"in e?e.lng:e.lon,e.alt):n===void 0?null:new Se(e,n,r)}var ft={latLngToPoint:function(e,n){var r=this.projection.project(e),a=this.scale(n);return this.transformation._transform(r,a)},pointToLatLng:function(e,n){var r=this.scale(n),a=this.transformation.untransform(e,r);return this.projection.unproject(a)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var n=this.projection.bounds,r=this.scale(e),a=this.transformation.transform(n.min,r),f=this.transformation.transform(n.max,r);return new me(a,f)},infinite:!1,wrapLatLng:function(e){var n=this.wrapLng?T(e.lng,this.wrapLng,!0):e.lng,r=this.wrapLat?T(e.lat,this.wrapLat,!0):e.lat,a=e.alt;return new Se(r,n,a)},wrapLatLngBounds:function(e){var n=e.getCenter(),r=this.wrapLatLng(n),a=n.lat-r.lat,f=n.lng-r.lng;if(a===0&&f===0)return e;var p=e.getSouthWest(),I=e.getNorthEast(),R=new Se(p.lat-a,p.lng-f),V=new Se(I.lat-a,I.lng-f);return new Ge(R,V)}},Je=U({},ft,{wrapLng:[-180,180],R:6371e3,distance:function(e,n){var r=Math.PI/180,a=e.lat*r,f=n.lat*r,p=Math.sin((n.lat-e.lat)*r/2),I=Math.sin((n.lng-e.lng)*r/2),R=p*p+Math.cos(a)*Math.cos(f)*I*I,V=2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R));return this.R*V}}),zt=6378137,ct={R:zt,MAX_LATITUDE:85.0511287798,project:function(e){var n=Math.PI/180,r=this.MAX_LATITUDE,a=Math.max(Math.min(r,e.lat),-r),f=Math.sin(a*n);return new fe(this.R*e.lng*n,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(e){var n=180/Math.PI;return new Se((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*n,e.x*n/this.R)},bounds:function(){var e=zt*Math.PI;return new me([-e,-e],[e,e])}()};function At(e,n,r,a){if(z(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=n,this._c=r,this._d=a}At.prototype={transform:function(e,n){return this._transform(e.clone(),n)},_transform:function(e,n){return n=n||1,e.x=n*(this._a*e.x+this._b),e.y=n*(this._c*e.y+this._d),e},untransform:function(e,n){return n=n||1,new fe((e.x/n-this._b)/this._a,(e.y/n-this._d)/this._c)}};function wt(e,n,r,a){return new At(e,n,r,a)}var jt=U({},Je,{code:"EPSG:3857",projection:ct,transformation:function(){var e=.5/(Math.PI*ct.R);return wt(e,.5,-e,.5)}()}),Wt=U({},jt,{code:"EPSG:900913"});function sn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Xe(e,n){var r="",a,f,p,I,R,V;for(a=0,p=e.length;a<p;a++){for(R=e[a],f=0,I=R.length;f<I;f++)V=R[f],r+=(f?"L":"M")+V.x+" "+V.y;r+=n?pe.svg?"z":"x":""}return r||"M0 0"}var qt=document.documentElement.style,xt="ActiveXObject"in window,Kt=xt&&!document.addEventListener,fn="msLaunchUri"in navigator&&!("documentMode"in document),C=tt("webkit"),c=tt("android"),u=tt("android 2")||tt("android 3"),y=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),P=c&&tt("Google")&&y<537&&!("AudioNode"in window),E=!!window.opera,q=!fn&&tt("chrome"),J=tt("gecko")&&!C&&!E&&!xt,ae=!q&&tt("safari"),ve=tt("phantom"),Te="OTransition"in qt,Ie=navigator.platform.indexOf("Win")===0,be=xt&&"transition"in qt,je="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!u,Pe="MozPerspective"in qt,Ze=!window.L_DISABLE_3D&&(be||je||Pe)&&!Te&&!ve,Ue=typeof orientation<"u"||tt("mobile"),We=Ue&&C,it=Ue&&je,$e=!window.PointerEvent&&window.MSPointerEvent,He=!!(window.PointerEvent||$e),mt="ontouchstart"in window||!!window.TouchEvent,et=!window.L_NO_TOUCH&&(mt||He),Fe=Ue&&E,rt=Ue&&J,bt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_t=function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",v,n),window.removeEventListener("testPassiveEventSupport",v,n)}catch{}return e}(),ht=function(){return!!document.createElement("canvas").getContext}(),ut=!!(document.createElementNS&&sn("svg").createSVGRect),kt=!!ut&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cn=!ut&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var n=e.firstChild;return n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch{return!1}}(),In=navigator.platform.indexOf("Mac")===0,Kn=navigator.platform.indexOf("Linux")===0;function tt(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var pe={ie:xt,ielt9:Kt,edge:fn,webkit:C,android:c,android23:u,androidStock:P,opera:E,chrome:q,gecko:J,safari:ae,phantom:ve,opera12:Te,win:Ie,ie3d:be,webkit3d:je,gecko3d:Pe,any3d:Ze,mobile:Ue,mobileWebkit:We,mobileWebkit3d:it,msPointer:$e,pointer:He,touch:et,touchNative:mt,mobileOpera:Fe,mobileGecko:rt,retina:bt,passiveEvents:_t,canvas:ht,svg:ut,vml:Cn,inlineSvg:kt,mac:In,linux:Kn},Jn=pe.msPointer?"MSPointerDown":"pointerdown",ln=pe.msPointer?"MSPointerMove":"pointermove",Ot=pe.msPointer?"MSPointerUp":"pointerup",Xn=pe.msPointer?"MSPointerCancel":"pointercancel",cn={touchstart:Jn,touchmove:ln,touchend:Ot,touchcancel:Xn},Dn={touchstart:Xt,touchmove:hn,touchend:hn,touchcancel:hn},Bt={},Tn=!1;function Pn(e,n,r){return n==="touchstart"&&ei(),Dn[n]?(r=Dn[n].bind(this,r),e.addEventListener(cn[n],r,!1),r):(console.warn("wrong event specified:",n),v)}function $n(e,n,r){if(!cn[n]){console.warn("wrong event specified:",n);return}e.removeEventListener(cn[n],r,!1)}function En(e){Bt[e.pointerId]=e}function Li(e){Bt[e.pointerId]&&(Bt[e.pointerId]=e)}function Jt(e){delete Bt[e.pointerId]}function ei(){Tn||(document.addEventListener(Jn,En,!0),document.addEventListener(ln,Li,!0),document.addEventListener(Ot,Jt,!0),document.addEventListener(Xn,Jt,!0),Tn=!0)}function hn(e,n){if(n.pointerType!==(n.MSPOINTER_TYPE_MOUSE||"mouse")){n.touches=[];for(var r in Bt)n.touches.push(Bt[r]);n.changedTouches=[n],e(n)}}function Xt(e,n){n.MSPOINTER_TYPE_TOUCH&&n.pointerType===n.MSPOINTER_TYPE_TOUCH&&F(n),hn(e,n)}function wi(e){var n={},r,a;for(a in e)r=e[a],n[a]=r&&r.bind?r.bind(e):r;return e=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var ti=200;function Sn(e,n){e.addEventListener("dblclick",n);var r=0,a;function f(p){if(p.detail!==1){a=p.detail;return}if(!(p.pointerType==="mouse"||p.sourceCapabilities&&!p.sourceCapabilities.firesTouchEvents)){var I=le(p);if(!(I.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!I.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var R=Date.now();R-r<=ti?(a++,a===2&&n(wi(p))):a=1,r=R}}}return e.addEventListener("click",f),{dblclick:n,simDblclick:f}}function xi(e,n){e.removeEventListener("dblclick",n.dblclick),e.removeEventListener("click",n.simDblclick)}var Nn=Ct(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Rt=Ct(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$t=Rt==="webkitTransition"||Rt==="OTransition"?Rt+"End":"transitionend";function en(e){return typeof e=="string"?document.getElementById(e):e}function Zt(e,n){var r=e.style[n]||e.currentStyle&&e.currentStyle[n];if((!r||r==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(e,null);r=a?a[n]:null}return r==="auto"?null:r}function Ee(e,n,r){var a=document.createElement(e);return a.className=n||"",r&&r.appendChild(a),a}function Be(e){var n=e.parentNode;n&&n.removeChild(e)}function tn(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Gt(e){var n=e.parentNode;n&&n.lastChild!==e&&n.appendChild(e)}function Ut(e){var n=e.parentNode;n&&n.firstChild!==e&&n.insertBefore(e,n.firstChild)}function zn(e,n){if(e.classList!==void 0)return e.classList.contains(n);var r=un(e);return r.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(r)}function ke(e,n){if(e.classList!==void 0)for(var r=K(n),a=0,f=r.length;a<f;a++)e.classList.add(r[a]);else if(!zn(e,n)){var p=un(e);nn(e,(p?p+" ":"")+n)}}function Qe(e,n){e.classList!==void 0?e.classList.remove(n):nn(e,H((" "+un(e)+" ").replace(" "+n+" "," ")))}function nn(e,n){e.className.baseVal===void 0?e.className=n:e.className.baseVal=n}function un(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function ot(e,n){"opacity"in e.style?e.style.opacity=n:"filter"in e.style&&Ft(e,n)}function Ft(e,n){var r=!1,a="DXImageTransform.Microsoft.Alpha";try{r=e.filters.item(a)}catch{if(n===1)return}n=Math.round(n*100),r?(r.Enabled=n!==100,r.Opacity=n):e.style.filter+=" progid:"+a+"(opacity="+n+")"}function Ct(e){for(var n=document.documentElement.style,r=0;r<e.length;r++)if(e[r]in n)return e[r];return!1}function It(e,n,r){var a=n||new fe(0,0);e.style[Nn]=(pe.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(r?" scale("+r+")":"")}function Ve(e,n){e._leaflet_pos=n,pe.any3d?It(e,n):(e.style.left=n.x+"px",e.style.top=n.y+"px")}function Re(e){return e._leaflet_pos||new fe(0,0)}var vt,Dt,An;if("onselectstart"in document)vt=function(){o(window,"selectstart",F)},Dt=function(){l(window,"selectstart",F)};else{var rn=Ct(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);vt=function(){if(rn){var e=document.documentElement.style;An=e[rn],e[rn]="none"}},Dt=function(){rn&&(document.documentElement.style[rn]=An,An=void 0)}}function dn(){o(window,"dragstart",F)}function jn(){l(window,"dragstart",F)}var Yt,on;function On(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(pn(),Yt=e,on=e.style.outlineStyle,e.style.outlineStyle="none",o(window,"keydown",pn))}function pn(){Yt&&(Yt.style.outlineStyle=on,Yt=void 0,on=void 0,l(window,"keydown",pn))}function ni(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function t(e){var n=e.getBoundingClientRect();return{x:n.width/e.offsetWidth||1,y:n.height/e.offsetHeight||1,boundingClientRect:n}}var i={__proto__:null,TRANSFORM:Nn,TRANSITION:Rt,TRANSITION_END:$t,get:en,getStyle:Zt,create:Ee,remove:Be,empty:tn,toFront:Gt,toBack:Ut,hasClass:zn,addClass:ke,removeClass:Qe,setClass:nn,getClass:un,setOpacity:ot,testProp:Ct,setTransform:It,setPosition:Ve,getPosition:Re,get disableTextSelection(){return vt},get enableTextSelection(){return Dt},disableImageDrag:dn,enableImageDrag:jn,preventOutline:On,restoreOutline:pn,getSizedParentNode:ni,getScale:t};function o(e,n,r,a){if(n&&typeof n=="object")for(var f in n)k(e,f,n[f],r);else{n=K(n);for(var p=0,I=n.length;p<I;p++)k(e,n[p],r,a)}return this}var s="_leaflet_events";function l(e,n,r,a){if(arguments.length===1)b(e),delete e[s];else if(n&&typeof n=="object")for(var f in n)x(e,f,n[f],r);else if(n=K(n),arguments.length===2)b(e,function(R){return j(n,R)!==-1});else for(var p=0,I=n.length;p<I;p++)x(e,n[p],r,a);return this}function b(e,n){for(var r in e[s]){var a=r.split(/\d/)[0];(!n||n(a))&&x(e,a,null,null,r)}}var M={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function k(e,n,r,a){var f=n+m(r)+(a?"_"+m(a):"");if(e[s]&&e[s][f])return this;var p=function(R){return r.call(a||e,R||window.event)},I=p;!pe.touchNative&&pe.pointer&&n.indexOf("touch")===0?p=Pn(e,n,p):pe.touch&&n==="dblclick"?p=Sn(e,p):"addEventListener"in e?n==="touchstart"||n==="touchmove"||n==="wheel"||n==="mousewheel"?e.addEventListener(M[n]||n,p,pe.passiveEvents?{passive:!1}:!1):n==="mouseenter"||n==="mouseleave"?(p=function(R){R=R||window.event,ze(e,R)&&I(R)},e.addEventListener(M[n],p,!1)):e.addEventListener(n,I,!1):e.attachEvent("on"+n,p),e[s]=e[s]||{},e[s][f]=p}function x(e,n,r,a,f){f=f||n+m(r)+(a?"_"+m(a):"");var p=e[s]&&e[s][f];if(!p)return this;!pe.touchNative&&pe.pointer&&n.indexOf("touch")===0?$n(e,n,p):pe.touch&&n==="dblclick"?xi(e,p):"removeEventListener"in e?e.removeEventListener(M[n]||n,p,!1):e.detachEvent("on"+n,p),e[s][f]=null}function D(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function O(e){return k(e,"wheel",D),this}function W(e){return o(e,"mousedown touchstart dblclick contextmenu",D),e._leaflet_disable_click=!0,this}function F(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function te(e){return F(e),D(e),this}function le(e){if(e.composedPath)return e.composedPath();for(var n=[],r=e.target;r;)n.push(r),r=r.parentNode;return n}function Me(e,n){if(!n)return new fe(e.clientX,e.clientY);var r=t(n),a=r.boundingClientRect;return new fe((e.clientX-a.left)/r.x-n.clientLeft,(e.clientY-a.top)/r.y-n.clientTop)}var Ce=pe.linux&&pe.chrome?window.devicePixelRatio:pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ae(e){return pe.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Ce:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function ze(e,n){var r=n.relatedTarget;if(!r)return!0;try{for(;r&&r!==e;)r=r.parentNode}catch{return!1}return r!==e}var Ye={__proto__:null,on:o,off:l,stopPropagation:D,disableScrollPropagation:O,disableClickPropagation:W,preventDefault:F,stop:te,getPropagationPath:le,getMousePosition:Me,getWheelDelta:Ae,isExternalTarget:ze,addListener:o,removeListener:l},at=he.extend({run:function(e,n,r,a){this.stop(),this._el=e,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=Re(e),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ne(this._animate,this),this._step()},_step:function(e){var n=+new Date-this._startTime,r=this._duration*1e3;n<r?this._runFrame(this._easeOut(n/r),e):(this._runFrame(1),this._complete())},_runFrame:function(e,n){var r=this._startPos.add(this._offset.multiplyBy(e));n&&r._round(),Ve(this._el,r),this.fire("step")},_complete:function(){oe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),_e=he.extend({options:{crs:jt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,n){n=X(this,n),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=g(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),n.zoom!==void 0&&(this._zoom=this._limitZoom(n.zoom)),n.center&&n.zoom!==void 0&&this.setView(xe(n.center),n.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Rt&&pe.any3d&&!pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),o(this._proxy,$t,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,n,r){if(n=n===void 0?this._zoom:this._limitZoom(n),e=this._limitCenter(xe(e),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=U({animate:r.animate},r.zoom),r.pan=U({animate:r.animate,duration:r.duration},r.pan));var a=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,n,r.zoom):this._tryAnimatedPan(e,r.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,n,r.pan&&r.pan.noMoveStart),this},setZoom:function(e,n){return this._loaded?this.setView(this.getCenter(),e,{zoom:n}):(this._zoom=e,this)},zoomIn:function(e,n){return e=e||(pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,n)},zoomOut:function(e,n){return e=e||(pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,n)},setZoomAround:function(e,n,r){var a=this.getZoomScale(n),f=this.getSize().divideBy(2),p=e instanceof fe?e:this.latLngToContainerPoint(e),I=p.subtract(f).multiplyBy(1-1/a),R=this.containerPointToLatLng(f.add(I));return this.setView(R,n,{zoom:r})},_getBoundsCenterZoom:function(e,n){n=n||{},e=e.getBounds?e.getBounds():we(e);var r=ie(n.paddingTopLeft||n.padding||[0,0]),a=ie(n.paddingBottomRight||n.padding||[0,0]),f=this.getBoundsZoom(e,!1,r.add(a));if(f=typeof n.maxZoom=="number"?Math.min(n.maxZoom,f):f,f===1/0)return{center:e.getCenter(),zoom:f};var p=a.subtract(r).divideBy(2),I=this.project(e.getSouthWest(),f),R=this.project(e.getNorthEast(),f),V=this.unproject(I.add(R).divideBy(2).add(p),f);return{center:V,zoom:f}},fitBounds:function(e,n){if(e=we(e),!e.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(e,n);return this.setView(r.center,r.zoom,n)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,n){return this.setView(e,this._zoom,{pan:n})},panBy:function(e,n){if(e=ie(e).round(),n=n||{},!e.x&&!e.y)return this.fire("moveend");if(n.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new at,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){ke(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,r,n.duration||.25,n.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,n,r){if(r=r||{},r.animate===!1||!pe.any3d)return this.setView(e,n,r);this._stop();var a=this.project(this.getCenter()),f=this.project(e),p=this.getSize(),I=this._zoom;e=xe(e),n=n===void 0?I:n;var R=Math.max(p.x,p.y),V=R*this.getZoomScale(I,n),ee=f.distanceTo(a)||1,ue=1.42,ye=ue*ue;function De(Ke){var mi=Ke?-1:1,uo=Ke?V:R,po=V*V-R*R+mi*ye*ye*ee*ee,go=2*uo*ye*ee,zi=po/go,Mr=Math.sqrt(zi*zi+1)-zi,mo=Mr<1e-9?-18:Math.log(Mr);return mo}function st(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function nt(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}function pt(Ke){return st(Ke)/nt(Ke)}var lt=De(0);function Ln(Ke){return R*(nt(lt)/nt(lt+ue*Ke))}function fo(Ke){return R*(nt(lt)*pt(lt+ue*Ke)-st(lt))/ye}function lo(Ke){return 1-Math.pow(1-Ke,1.5)}var co=Date.now(),yr=(De(1)-lt)/ue,ho=r.duration?1e3*r.duration:1e3*yr*.8;function vr(){var Ke=(Date.now()-co)/ho,mi=lo(Ke)*yr;Ke<=1?(this._flyToFrame=ne(vr,this),this._move(this.unproject(a.add(f.subtract(a).multiplyBy(fo(mi)/ee)),I),this.getScaleZoom(R/Ln(mi),I),{flyTo:!0})):this._move(e,n)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),vr.call(this),this},flyToBounds:function(e,n){var r=this._getBoundsCenterZoom(e,n);return this.flyTo(r.center,r.zoom,n)},setMaxBounds:function(e){return e=we(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var n=this.options.minZoom;return this.options.minZoom=e,this._loaded&&n!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var n=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&n!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,n){this._enforcingBounds=!0;var r=this.getCenter(),a=this._limitCenter(r,this._zoom,we(e));return r.equals(a)||this.panTo(a,n),this._enforcingBounds=!1,this},panInside:function(e,n){n=n||{};var r=ie(n.paddingTopLeft||n.padding||[0,0]),a=ie(n.paddingBottomRight||n.padding||[0,0]),f=this.project(this.getCenter()),p=this.project(e),I=this.getPixelBounds(),R=Ne([I.min.add(r),I.max.subtract(a)]),V=R.getSize();if(!R.contains(p)){this._enforcingBounds=!0;var ee=p.subtract(R.getCenter()),ue=R.extend(p).getSize().subtract(V);f.x+=ee.x<0?-ue.x:ue.x,f.y+=ee.y<0?-ue.y:ue.y,this.panTo(this.unproject(f),n),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=U({animate:!1,pan:!0},e===!0?{animate:!0}:e);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=n.divideBy(2).round(),f=r.divideBy(2).round(),p=a.subtract(f);return!p.x&&!p.y?this:(e.animate&&e.pan?this.panBy(p):(e.pan&&this._rawPanBy(p),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(g(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=U({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=g(this._handleGeolocationResponse,this),r=g(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,e):navigator.geolocation.getCurrentPosition(n,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var n=e.code,r=e.message||(n===1?"permission denied":n===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var n=e.coords.latitude,r=e.coords.longitude,a=new Se(n,r),f=a.toBounds(e.coords.accuracy*2),p=this._locateOptions;if(p.setView){var I=this.getBoundsZoom(f);this.setView(a,p.maxZoom?Math.min(I,p.maxZoom):I)}var R={latlng:a,bounds:f,timestamp:e.timestamp};for(var V in e.coords)typeof e.coords[V]=="number"&&(R[V]=e.coords[V]);this.fire("locationfound",R)}},addHandler:function(e,n){if(!n)return this;var r=this[e]=new n(this);return this._handlers.push(r),this.options[e]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Be(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(oe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)Be(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,n){var r="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),a=Ee("div",r,n||this._mapPane);return e&&(this._panes[e]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),n=this.unproject(e.getBottomLeft()),r=this.unproject(e.getTopRight());return new Ge(n,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,n,r){e=we(e),r=ie(r||[0,0]);var a=this.getZoom()||0,f=this.getMinZoom(),p=this.getMaxZoom(),I=e.getNorthWest(),R=e.getSouthEast(),V=this.getSize().subtract(r),ee=Ne(this.project(R,a),this.project(I,a)).getSize(),ue=pe.any3d?this.options.zoomSnap:1,ye=V.x/ee.x,De=V.y/ee.y,st=n?Math.max(ye,De):Math.min(ye,De);return a=this.getScaleZoom(st,a),ue&&(a=Math.round(a/(ue/100))*(ue/100),a=n?Math.ceil(a/ue)*ue:Math.floor(a/ue)*ue),Math.max(f,Math.min(p,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new fe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,n){var r=this._getTopLeftPoint(e,n);return new me(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,n){var r=this.options.crs;return n=n===void 0?this._zoom:n,r.scale(e)/r.scale(n)},getScaleZoom:function(e,n){var r=this.options.crs;n=n===void 0?this._zoom:n;var a=r.zoom(e*r.scale(n));return isNaN(a)?1/0:a},project:function(e,n){return n=n===void 0?this._zoom:n,this.options.crs.latLngToPoint(xe(e),n)},unproject:function(e,n){return n=n===void 0?this._zoom:n,this.options.crs.pointToLatLng(ie(e),n)},layerPointToLatLng:function(e){var n=ie(e).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(e){var n=this.project(xe(e))._round();return n._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(xe(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(we(e))},distance:function(e,n){return this.options.crs.distance(xe(e),xe(n))},containerPointToLayerPoint:function(e){return ie(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return ie(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var n=this.containerPointToLayerPoint(ie(e));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(e)))},mouseEventToContainerPoint:function(e){return Me(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var n=this._container=en(e);if(n){if(n._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");o(n,"scroll",this._onScroll,this),this._containerId=m(n)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&pe.any3d,ke(e,"leaflet-container"+(pe.touch?" leaflet-touch":"")+(pe.retina?" leaflet-retina":"")+(pe.ielt9?" leaflet-oldie":"")+(pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=Zt(e,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&n!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ve(this._mapPane,new fe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ke(e.markerPane,"leaflet-zoom-hide"),ke(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,n,r){Ve(this._mapPane,new fe(0,0));var a=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var f=this._zoom!==n;this._moveStart(f,r)._move(e,n)._moveEnd(f),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(e,n){return e&&this.fire("zoomstart"),n||this.fire("movestart"),this},_move:function(e,n,r,a){n===void 0&&(n=this._zoom);var f=this._zoom!==n;return this._zoom=n,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),a?r&&r.pinch&&this.fire("zoom",r):((f||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return oe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ve(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[m(this._container)]=this;var n=e?l:o;n(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&n(window,"resize",this._onResize,this),pe.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){oe(this._resizeRequest),this._resizeRequest=ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,n){for(var r=[],a,f=n==="mouseout"||n==="mouseover",p=e.target||e.srcElement,I=!1;p;){if(a=this._targets[m(p)],a&&(n==="click"||n==="preclick")&&this._draggableMoved(a)){I=!0;break}if(a&&a.listens(n,!0)&&(f&&!ze(p,e)||(r.push(a),f))||p===this._container)break;p=p.parentNode}return!r.length&&!I&&!f&&this.listens(n,!0)&&(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var n=e.target||e.srcElement;if(!(!this._loaded||n._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(n))){var r=e.type;r==="mousedown"&&On(n),this._fireDOMEvent(e,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,n,r){if(e.type==="click"){var a=U({},e);a.type="preclick",this._fireDOMEvent(a,a.type,r)}var f=this._findEventTargets(e,n);if(r){for(var p=[],I=0;I<r.length;I++)r[I].listens(n,!0)&&p.push(r[I]);f=p.concat(f)}if(f.length){n==="contextmenu"&&F(e);var R=f[0],V={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var ee=R.getLatLng&&(!R._radius||R._radius<=10);V.containerPoint=ee?this.latLngToContainerPoint(R.getLatLng()):this.mouseEventToContainerPoint(e),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=ee?R.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(I=0;I<f.length;I++)if(f[I].fire(n,V,!0),V.originalEvent._stopped||f[I].options.bubblingMouseEvents===!1&&j(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,n=this._handlers.length;e<n;e++)this._handlers[e].disable()},whenReady:function(e,n){return this._loaded?e.call(n||this,{target:this}):this.on("load",e,n),this},_getMapPanePos:function(){return Re(this._mapPane)||new fe(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,n){var r=e&&n!==void 0?this._getNewPixelOrigin(e,n):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,n){var r=this.getSize()._divideBy(2);return this.project(e,n)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,n,r){var a=this._getNewPixelOrigin(r,n);return this.project(e,n)._subtract(a)},_latLngBoundsToNewLayerBounds:function(e,n,r){var a=this._getNewPixelOrigin(r,n);return Ne([this.project(e.getSouthWest(),n)._subtract(a),this.project(e.getNorthWest(),n)._subtract(a),this.project(e.getSouthEast(),n)._subtract(a),this.project(e.getNorthEast(),n)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,n,r){if(!r)return e;var a=this.project(e,n),f=this.getSize().divideBy(2),p=new me(a.subtract(f),a.add(f)),I=this._getBoundsOffset(p,r,n);return Math.abs(I.x)<=1&&Math.abs(I.y)<=1?e:this.unproject(a.add(I),n)},_limitOffset:function(e,n){if(!n)return e;var r=this.getPixelBounds(),a=new me(r.min.add(e),r.max.add(e));return e.add(this._getBoundsOffset(a,n))},_getBoundsOffset:function(e,n,r){var a=Ne(this.project(n.getNorthEast(),r),this.project(n.getSouthWest(),r)),f=a.min.subtract(e.min),p=a.max.subtract(e.max),I=this._rebound(f.x,-p.x),R=this._rebound(f.y,-p.y);return new fe(I,R)},_rebound:function(e,n){return e+n>0?Math.round(e-n)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(n))},_limitZoom:function(e){var n=this.getMinZoom(),r=this.getMaxZoom(),a=pe.any3d?this.options.zoomSnap:1;return a&&(e=Math.round(e/a)*a),Math.max(n,Math.min(r,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,n){var r=this._getCenterOffset(e)._trunc();return(n&&n.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,n),!0)},_createAnimProxy:function(){var e=this._proxy=Ee("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(n){var r=Nn,a=this._proxy.style[r];It(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),a===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Be(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),n=this.getZoom();It(this._proxy,this.project(e,n),this.getZoomScale(n,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,n,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(n),f=this._getCenterOffset(e)._divideBy(1-1/a);return r.animate!==!0&&!this.getSize().contains(f)?!1:(ne(function(){this._moveStart(!0,r.noMoveStart||!1)._animateZoom(e,n,!0)},this),!0)},_animateZoom:function(e,n,r,a){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=n,ke(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:n,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(g(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Bn(e,n){return new _e(e,n)}var qe=ce.extend({options:{position:"topright"},initialize:function(e){X(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var n=this._map;return n&&n.removeControl(this),this.options.position=e,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var n=this._container=this.onAdd(e),r=this.getPosition(),a=e._controlCorners[r];return ke(n,"leaflet-control"),r.indexOf("bottom")!==-1?a.insertBefore(n,a.firstChild):a.appendChild(n),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Be(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Qt=function(e){return new qe(e)};_e.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},n="leaflet-",r=this._controlContainer=Ee("div",n+"control-container",this._container);function a(f,p){var I=n+f+" "+n+p;e[f+p]=Ee("div",I,r)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Be(this._controlCorners[e]);Be(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var gn=qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,n,r,a){return r<a?-1:a<r?1:0}},initialize:function(e,n,r){X(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in e)this._addLayer(e[a],a);for(a in n)this._addLayer(n[a],a,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return qe.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,n){return this._addLayer(e,n),this._map?this._update():this},addOverlay:function(e,n){return this._addLayer(e,n,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var n=this._getLayer(m(e));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){ke(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(ke(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Qe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",n=this._container=Ee("div",e),r=this.options.collapsed;n.setAttribute("aria-haspopup",!0),W(n),O(n);var a=this._section=Ee("section",e+"-list");r&&(this._map.on("click",this.collapse,this),o(n,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=Ee("a",e+"-toggle",n);f.href="#",f.title="Layers",f.setAttribute("role","button"),o(f,{keydown:function(p){p.keyCode===13&&this._expandSafely()},click:function(p){F(p),this._expandSafely()}},this),r||this.expand(),this._baseLayersList=Ee("div",e+"-base",a),this._separator=Ee("div",e+"-separator",a),this._overlaysList=Ee("div",e+"-overlays",a),n.appendChild(a)},_getLayer:function(e){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&m(this._layers[n].layer)===e)return this._layers[n]},_addLayer:function(e,n,r){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:n,overlay:r}),this.options.sortLayers&&this._layers.sort(g(function(a,f){return this.options.sortFunction(a.layer,f.layer,a.name,f.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;tn(this._baseLayersList),tn(this._overlaysList),this._layerControlInputs=[];var e,n,r,a,f=0;for(r=0;r<this._layers.length;r++)a=this._layers[r],this._addItem(a),n=n||a.overlay,e=e||!a.overlay,f+=a.overlay?0:1;return this.options.hideSingleBase&&(e=e&&f>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=n&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var n=this._getLayer(m(e.target)),r=n.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;r&&this._map.fire(r,n)},_createRadioElement:function(e,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(n?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=r,a.firstChild},_addItem:function(e){var n=document.createElement("label"),r=this._map.hasLayer(e.layer),a;e.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=r):a=this._createRadioElement("leaflet-base-layers_"+m(this),r),this._layerControlInputs.push(a),a.layerId=m(e.layer),o(a,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+e.name;var p=document.createElement("span");n.appendChild(p),p.appendChild(a),p.appendChild(f);var I=e.overlay?this._overlaysList:this._baseLayersList;return I.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,n,r,a=[],f=[];this._handlingClick=!0;for(var p=e.length-1;p>=0;p--)n=e[p],r=this._getLayer(n.layerId).layer,n.checked?a.push(r):n.checked||f.push(r);for(p=0;p<f.length;p++)this._map.hasLayer(f[p])&&this._map.removeLayer(f[p]);for(p=0;p<a.length;p++)this._map.hasLayer(a[p])||this._map.addLayer(a[p]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,n,r,a=this._map.getZoom(),f=e.length-1;f>=0;f--)n=e[f],r=this._getLayer(n.layerId).layer,n.disabled=r.options.minZoom!==void 0&&a<r.options.minZoom||r.options.maxZoom!==void 0&&a>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,o(e,"click",F),this.expand();var n=this;setTimeout(function(){l(e,"click",F),n._preventClick=!1})}}),Tt=function(e,n,r){return new gn(e,n,r)},mn=qe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var n="leaflet-control-zoom",r=Ee("div",n+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,n+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,n+"-out",r,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,n,r,a,f){var p=Ee("a",r,a);return p.innerHTML=e,p.href="#",p.title=n,p.setAttribute("role","button"),p.setAttribute("aria-label",n),W(p),o(p,"click",te),o(p,"click",f,this),o(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var e=this._map,n="leaflet-disabled";Qe(this._zoomInButton,n),Qe(this._zoomOutButton,n),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(ke(this._zoomOutButton,n),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(ke(this._zoomInButton,n),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new mn,this.addControl(this.zoomControl))});var ii=function(e){return new mn(e)},ri=qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var n="leaflet-control-scale",r=Ee("div",n),a=this.options;return this._addScales(a,n+"-line",r),e.on(a.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),r},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,n,r){e.metric&&(this._mScale=Ee("div",n,r)),e.imperial&&(this._iScale=Ee("div",n,r))},_update:function(){var e=this._map,n=e.getSize().y/2,r=e.distance(e.containerPointToLatLng([0,n]),e.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(r)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var n=this._getRoundNum(e),r=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,r,n/e)},_updateImperial:function(e){var n=e*3.2808399,r,a,f;n>5280?(r=n/5280,a=this._getRoundNum(r),this._updateScale(this._iScale,a+" mi",a/r)):(f=this._getRoundNum(n),this._updateScale(this._iScale,f+" ft",f/n))},_updateScale:function(e,n,r){e.style.width=Math.round(this.options.maxWidth*r)+"px",e.innerHTML=n},_getRoundNum:function(e){var n=Math.pow(10,(Math.floor(e)+"").length-1),r=e/n;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,n*r}}),Rn=function(e){return new ri(e)},ki='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Zn=qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(pe.inlineSvg?ki+" ":"")+"Leaflet</a>"},initialize:function(e){X(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=Ee("div","leaflet-control-attribution"),W(this._container);for(var n in e._layers)e._layers[n].getAttribution&&this.addAttribution(e._layers[n].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var n in this._attributions)this._attributions[n]&&e.push(n);var r=[];this.options.prefix&&r.push(this.options.prefix),e.length&&r.push(e.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new Zn().addTo(this)});var Pr=function(e){return new Zn(e)};qe.Layers=gn,qe.Zoom=mn,qe.Scale=ri,qe.Attribution=Zn,Qt.layers=Tt,Qt.zoom=ii,Qt.scale=Rn,Qt.attribution=Pr;var Mt=ce.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Mt.addTo=function(e,n){return e.addHandler(n,this),this};var Er={Events:Le},Yi=pe.touch?"touchstart mousedown":"mousedown",Vt=he.extend({options:{clickTolerance:3},initialize:function(e,n,r,a){X(this,a),this._element=e,this._dragStartTarget=n||e,this._preventOutline=r},enable:function(){this._enabled||(o(this._dragStartTarget,Yi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vt._dragging===this&&this.finishDrag(!0),l(this._dragStartTarget,Yi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!zn(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Vt._dragging===this&&this.finishDrag();return}if(!(Vt._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Vt._dragging=this,this._preventOutline&&On(this._element),dn(),vt(),!this._moving)){this.fire("down");var n=e.touches?e.touches[0]:e,r=ni(this._element);this._startPoint=new fe(n.clientX,n.clientY),this._startPos=Re(this._element),this._parentScale=t(r);var a=e.type==="mousedown";o(document,a?"mousemove":"touchmove",this._onMove,this),o(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var n=e.touches&&e.touches.length===1?e.touches[0]:e,r=new fe(n.clientX,n.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,F(e),this._moved||(this.fire("dragstart"),this._moved=!0,ke(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ke(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ve(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Qe(document.body,"leaflet-dragging"),this._lastTarget&&(Qe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),l(document,"mousemove touchmove",this._onMove,this),l(document,"mouseup touchend touchcancel",this._onUp,this),jn(),Dt();var n=this._moved&&this._moving;this._moving=!1,Vt._dragging=!1,n&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function Qi(e,n,r){var a,f=[1,4,2,8],p,I,R,V,ee,ue,ye,De;for(p=0,ue=e.length;p<ue;p++)e[p]._code=an(e[p],n);for(R=0;R<4;R++){for(ye=f[R],a=[],p=0,ue=e.length,I=ue-1;p<ue;I=p++)V=e[p],ee=e[I],V._code&ye?ee._code&ye||(De=oi(ee,V,ye,n,r),De._code=an(De,n),a.push(De)):(ee._code&ye&&(De=oi(ee,V,ye,n,r),De._code=an(De,n),a.push(De)),a.push(V));e=a}return e}function Vi(e,n){var r,a,f,p,I,R,V,ee,ue;if(!e||e.length===0)throw new Error("latlngs not passed");dt(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var ye=xe([0,0]),De=we(e),st=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());st<1700&&(ye=Ci(e));var nt=e.length,pt=[];for(r=0;r<nt;r++){var lt=xe(e[r]);pt.push(n.project(xe([lt.lat-ye.lat,lt.lng-ye.lng])))}for(R=V=ee=0,r=0,a=nt-1;r<nt;a=r++)f=pt[r],p=pt[a],I=f.y*p.x-p.y*f.x,V+=(f.x+p.x)*I,ee+=(f.y+p.y)*I,R+=I*3;R===0?ue=pt[0]:ue=[V/R,ee/R];var Ln=n.unproject(ie(ue));return xe([Ln.lat+ye.lat,Ln.lng+ye.lng])}function Ci(e){for(var n=0,r=0,a=0,f=0;f<e.length;f++){var p=xe(e[f]);n+=p.lat,r+=p.lng,a++}return xe([n/a,r/a])}var Sr={__proto__:null,clipPolygon:Qi,polygonCenter:Vi,centroid:Ci};function Hi(e,n){if(!n||!e.length)return e.slice();var r=n*n;return e=Ar(e,r),e=zr(e,r),e}function Wi(e,n,r){return Math.sqrt(Gn(e,n,r,!0))}function Nr(e,n,r){return Gn(e,n,r)}function zr(e,n){var r=e.length,a=typeof Uint8Array<"u"?Uint8Array:Array,f=new a(r);f[0]=f[r-1]=1,Ii(e,f,n,0,r-1);var p,I=[];for(p=0;p<r;p++)f[p]&&I.push(e[p]);return I}function Ii(e,n,r,a,f){var p=0,I,R,V;for(R=a+1;R<=f-1;R++)V=Gn(e[R],e[a],e[f],!0),V>p&&(I=R,p=V);p>r&&(n[I]=1,Ii(e,n,r,a,I),Ii(e,n,r,I,f))}function Ar(e,n){for(var r=[e[0]],a=1,f=0,p=e.length;a<p;a++)jr(e[a],e[f])>n&&(r.push(e[a]),f=a);return f<p-1&&r.push(e[p-1]),r}var qi;function Ki(e,n,r,a,f){var p=a?qi:an(e,r),I=an(n,r),R,V,ee;for(qi=I;;){if(!(p|I))return[e,n];if(p&I)return!1;R=p||I,V=oi(e,n,R,r,f),ee=an(V,r),R===p?(e=V,p=ee):(n=V,I=ee)}}function oi(e,n,r,a,f){var p=n.x-e.x,I=n.y-e.y,R=a.min,V=a.max,ee,ue;return r&8?(ee=e.x+p*(V.y-e.y)/I,ue=V.y):r&4?(ee=e.x+p*(R.y-e.y)/I,ue=R.y):r&2?(ee=V.x,ue=e.y+I*(V.x-e.x)/p):r&1&&(ee=R.x,ue=e.y+I*(R.x-e.x)/p),new fe(ee,ue,f)}function an(e,n){var r=0;return e.x<n.min.x?r|=1:e.x>n.max.x&&(r|=2),e.y<n.min.y?r|=4:e.y>n.max.y&&(r|=8),r}function jr(e,n){var r=n.x-e.x,a=n.y-e.y;return r*r+a*a}function Gn(e,n,r,a){var f=n.x,p=n.y,I=r.x-f,R=r.y-p,V=I*I+R*R,ee;return V>0&&(ee=((e.x-f)*I+(e.y-p)*R)/V,ee>1?(f=r.x,p=r.y):ee>0&&(f+=I*ee,p+=R*ee)),I=e.x-f,R=e.y-p,a?I*I+R*R:new fe(f,p)}function dt(e){return!z(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Ji(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),dt(e)}function Xi(e,n){var r,a,f,p,I,R,V,ee;if(!e||e.length===0)throw new Error("latlngs not passed");dt(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var ue=xe([0,0]),ye=we(e),De=ye.getNorthWest().distanceTo(ye.getSouthWest())*ye.getNorthEast().distanceTo(ye.getNorthWest());De<1700&&(ue=Ci(e));var st=e.length,nt=[];for(r=0;r<st;r++){var pt=xe(e[r]);nt.push(n.project(xe([pt.lat-ue.lat,pt.lng-ue.lng])))}for(r=0,a=0;r<st-1;r++)a+=nt[r].distanceTo(nt[r+1])/2;if(a===0)ee=nt[0];else for(r=0,p=0;r<st-1;r++)if(I=nt[r],R=nt[r+1],f=I.distanceTo(R),p+=f,p>a){V=(p-a)/f,ee=[R.x-V*(R.x-I.x),R.y-V*(R.y-I.y)];break}var lt=n.unproject(ie(ee));return xe([lt.lat+ue.lat,lt.lng+ue.lng])}var Or={__proto__:null,simplify:Hi,pointToSegmentDistance:Wi,closestPointOnSegment:Nr,clipSegment:Ki,_getEdgeIntersection:oi,_getBitCode:an,_sqClosestPointOnSegment:Gn,isFlat:dt,_flat:Ji,polylineCenter:Xi},Di={project:function(e){return new fe(e.lng,e.lat)},unproject:function(e){return new Se(e.y,e.x)},bounds:new me([-180,-90],[180,90])},Ti={R:6378137,R_MINOR:6356752314245179e-9,bounds:new me([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var n=Math.PI/180,r=this.R,a=e.lat*n,f=this.R_MINOR/r,p=Math.sqrt(1-f*f),I=p*Math.sin(a),R=Math.tan(Math.PI/4-a/2)/Math.pow((1-I)/(1+I),p/2);return a=-r*Math.log(Math.max(R,1e-10)),new fe(e.lng*n*r,a)},unproject:function(e){for(var n=180/Math.PI,r=this.R,a=this.R_MINOR/r,f=Math.sqrt(1-a*a),p=Math.exp(-e.y/r),I=Math.PI/2-2*Math.atan(p),R=0,V=.1,ee;R<15&&Math.abs(V)>1e-7;R++)ee=f*Math.sin(I),ee=Math.pow((1-ee)/(1+ee),f/2),V=Math.PI/2-2*Math.atan(p*ee)-I,I+=V;return new Se(I*n,e.x*n/r)}},Br={__proto__:null,LonLat:Di,Mercator:Ti,SphericalMercator:ct},Rr=U({},Je,{code:"EPSG:3395",projection:Ti,transformation:function(){var e=.5/(Math.PI*Ti.R);return wt(e,.5,-e,.5)}()}),$i=U({},Je,{code:"EPSG:4326",projection:Di,transformation:wt(1/180,1,-1/180,.5)}),Zr=U({},ft,{projection:Di,transformation:wt(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,n){var r=n.lng-e.lng,a=n.lat-e.lat;return Math.sqrt(r*r+a*a)},infinite:!0});ft.Earth=Je,ft.EPSG3395=Rr,ft.EPSG3857=jt,ft.EPSG900913=Wt,ft.EPSG4326=$i,ft.Simple=Zr;var yt=he.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[m(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[m(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var n=e.target;if(n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var r=this.getEvents();n.on(r,this),this.once("remove",function(){n.off(r,this)},this)}this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var n=m(e);return this._layers[n]?this:(this._layers[n]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var n=m(e);return this._layers[n]?(this._loaded&&e.onRemove(this),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return m(e)in this._layers},eachLayer:function(e,n){for(var r in this._layers)e.call(n,this._layers[r]);return this},_addLayers:function(e){e=e?z(e)?e:[e]:[];for(var n=0,r=e.length;n<r;n++)this.addLayer(e[n])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[m(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var n=m(e);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,n=-1/0,r=this._getZoomSpan();for(var a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a].options;e=f.minZoom===void 0?e:Math.min(e,f.minZoom),n=f.maxZoom===void 0?n:Math.max(n,f.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=e===1/0?void 0:e,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bn=yt.extend({initialize:function(e,n){X(this,n),this._layers={};var r,a;if(e)for(r=0,a=e.length;r<a;r++)this.addLayer(e[r])},addLayer:function(e){var n=this.getLayerId(e);return this._layers[n]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var n=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(e){var n=typeof e=="number"?e:this.getLayerId(e);return n in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var n=Array.prototype.slice.call(arguments,1),r,a;for(r in this._layers)a=this._layers[r],a[e]&&a[e].apply(a,n);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,n){for(var r in this._layers)e.call(n,this._layers[r]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return m(e)}}),Gr=function(e,n){return new bn(e,n)},Pt=bn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),bn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),bn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new Ge;for(var n in this._layers){var r=this._layers[n];e.extend(r.getBounds?r.getBounds():r.getLatLng())}return e}}),Ur=function(e,n){return new Pt(e,n)},_n=ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){X(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,n){var r=this._getIconUrl(e);if(!r){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(r,n&&n.tagName==="IMG"?n:null);return this._setIconStyles(a,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(e,n){var r=this.options,a=r[n+"Size"];typeof a=="number"&&(a=[a,a]);var f=ie(a),p=ie(n==="shadow"&&r.shadowAnchor||r.iconAnchor||f&&f.divideBy(2,!0));e.className="leaflet-marker-"+n+" "+(r.className||""),p&&(e.style.marginLeft=-p.x+"px",e.style.marginTop=-p.y+"px"),f&&(e.style.width=f.x+"px",e.style.height=f.y+"px")},_createImg:function(e,n){return n=n||document.createElement("img"),n.src=e,n},_getIconUrl:function(e){return pe.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Fr(e){return new _n(e)}var Un=_n.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Un.imagePath!="string"&&(Un.imagePath=this._detectIconPath()),(this.options.imagePath||Un.imagePath)+_n.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var n=function(r,a,f){var p=a.exec(r);return p&&p[f]};return e=n(e,/^url\((['"])?(.+)\1\)$/,2),e&&n(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=Ee("div","leaflet-default-icon-path",document.body),n=Zt(e,"background-image")||Zt(e,"backgroundImage");if(document.body.removeChild(e),n=this._stripUrl(n),n)return n;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),er=Mt.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Vt(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ke(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var n=this._marker,r=n._map,a=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,p=Re(n._icon),I=r.getPixelBounds(),R=r.getPixelOrigin(),V=Ne(I.min._subtract(R).add(f),I.max._subtract(R).subtract(f));if(!V.contains(p)){var ee=ie((Math.max(V.max.x,p.x)-V.max.x)/(I.max.x-V.max.x)-(Math.min(V.min.x,p.x)-V.min.x)/(I.min.x-V.min.x),(Math.max(V.max.y,p.y)-V.max.y)/(I.max.y-V.max.y)-(Math.min(V.min.y,p.y)-V.min.y)/(I.min.y-V.min.y)).multiplyBy(a);r.panBy(ee,{animate:!1}),this._draggable._newPos._add(ee),this._draggable._startPos._add(ee),Ve(n._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=ne(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(oe(this._panRequest),this._panRequest=ne(this._adjustPan.bind(this,e)))},_onDrag:function(e){var n=this._marker,r=n._shadow,a=Re(n._icon),f=n._map.layerPointToLatLng(a);r&&Ve(r,a),n._latlng=f,e.latlng=f,e.oldLatLng=this._oldLatLng,n.fire("move",e).fire("drag",e)},_onDragEnd:function(e){oe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ai=yt.extend({options:{icon:new Un,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,n){X(this,n),this._latlng=xe(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var n=this._latlng;return this._latlng=xe(e),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=e.icon.createIcon(this._icon),a=!1;r!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(r.title=e.title),r.tagName==="IMG"&&(r.alt=e.alt||"")),ke(r,n),e.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&o(r,"focus",this._panOnFocus,this);var f=e.icon.createShadow(this._shadow),p=!1;f!==this._shadow&&(this._removeShadow(),p=!0),f&&(ke(f,n),f.alt=""),this._shadow=f,e.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&p&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&l(this._icon,"focus",this._panOnFocus,this),Be(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Be(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ve(this._icon,e),this._shadow&&Ve(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var n=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(n)},_initInteraction:function(){if(this.options.interactive&&(ke(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),er)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new er(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&ot(this._icon,e),this._shadow&&ot(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var n=this.options.icon.options,r=n.iconSize?ie(n.iconSize):ie(0,0),a=n.iconAnchor?ie(n.iconAnchor):ie(0,0);e.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:r.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Yr(e,n){return new ai(e,n)}var Ht=yt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return X(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),si=Ht.extend({options:{fill:!0,radius:10},initialize:function(e,n){X(this,n),this._latlng=xe(e),this._radius=this.options.radius},setLatLng:function(e){var n=this._latlng;return this._latlng=xe(e),this.redraw(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var n=e&&e.radius||this._radius;return Ht.prototype.setStyle.call(this,e),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,n=this._radiusY||e,r=this._clickTolerance(),a=[e+r,n+r];this._pxBounds=new me(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Qr(e,n){return new si(e,n)}var Pi=si.extend({initialize:function(e,n,r){if(typeof n=="number"&&(n=U({},r,{radius:n})),X(this,n),this._latlng=xe(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new Ge(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Ht.prototype.setStyle,_project:function(){var e=this._latlng.lng,n=this._latlng.lat,r=this._map,a=r.options.crs;if(a.distance===Je.distance){var f=Math.PI/180,p=this._mRadius/Je.R/f,I=r.project([n+p,e]),R=r.project([n-p,e]),V=I.add(R).divideBy(2),ee=r.unproject(V).lat,ue=Math.acos((Math.cos(p*f)-Math.sin(n*f)*Math.sin(ee*f))/(Math.cos(n*f)*Math.cos(ee*f)))/f;(isNaN(ue)||ue===0)&&(ue=p/Math.cos(Math.PI/180*n)),this._point=V.subtract(r.getPixelOrigin()),this._radius=isNaN(ue)?0:V.x-r.project([ee,e-ue]).x,this._radiusY=V.y-I.y}else{var ye=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(ye).x}this._updateBounds()}});function Vr(e,n,r){return new Pi(e,n,r)}var Et=Ht.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,n){X(this,n),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var n=1/0,r=null,a=Gn,f,p,I=0,R=this._parts.length;I<R;I++)for(var V=this._parts[I],ee=1,ue=V.length;ee<ue;ee++){f=V[ee-1],p=V[ee];var ye=a(e,f,p,!0);ye<n&&(n=ye,r=a(e,f,p))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Xi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,n){return n=n||this._defaultShape(),e=xe(e),n.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new Ge,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return dt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var n=[],r=dt(e),a=0,f=e.length;a<f;a++)r?(n[a]=xe(e[a]),this._bounds.extend(n[a])):n[a]=this._convertLatLngs(e[a]);return n},_project:function(){var e=new me;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),n=new fe(e,e);this._rawPxBounds&&(this._pxBounds=new me([this._rawPxBounds.min.subtract(n),this._rawPxBounds.max.add(n)]))},_projectLatlngs:function(e,n,r){var a=e[0]instanceof Se,f=e.length,p,I;if(a){for(I=[],p=0;p<f;p++)I[p]=this._map.latLngToLayerPoint(e[p]),r.extend(I[p]);n.push(I)}else for(p=0;p<f;p++)this._projectLatlngs(e[p],n,r)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var n=this._parts,r,a,f,p,I,R,V;for(r=0,f=0,p=this._rings.length;r<p;r++)for(V=this._rings[r],a=0,I=V.length;a<I-1;a++)R=Ki(V[a],V[a+1],e,a,!0),R&&(n[f]=n[f]||[],n[f].push(R[0]),(R[1]!==V[a+1]||a===I-2)&&(n[f].push(R[1]),f++))}},_simplifyPoints:function(){for(var e=this._parts,n=this.options.smoothFactor,r=0,a=e.length;r<a;r++)e[r]=Hi(e[r],n)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,n){var r,a,f,p,I,R,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,p=this._parts.length;r<p;r++)for(R=this._parts[r],a=0,I=R.length,f=I-1;a<I;f=a++)if(!(!n&&a===0)&&Wi(e,R[f],R[a])<=V)return!0;return!1}});function Hr(e,n){return new Et(e,n)}Et._flat=Ji;var yn=Et.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var n=Et.prototype._convertLatLngs.call(this,e),r=n.length;return r>=2&&n[0]instanceof Se&&n[0].equals(n[r-1])&&n.pop(),n},_setLatLngs:function(e){Et.prototype._setLatLngs.call(this,e),dt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return dt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,n=this.options.weight,r=new fe(n,n);if(e=new me(e.min.subtract(r),e.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,f=this._rings.length,p;a<f;a++)p=Qi(this._rings[a],e,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var n=!1,r,a,f,p,I,R,V,ee;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(p=0,V=this._parts.length;p<V;p++)for(r=this._parts[p],I=0,ee=r.length,R=ee-1;I<ee;R=I++)a=r[I],f=r[R],a.y>e.y!=f.y>e.y&&e.x<(f.x-a.x)*(e.y-a.y)/(f.y-a.y)+a.x&&(n=!n);return n||Et.prototype._containsPoint.call(this,e,!0)}});function Wr(e,n){return new yn(e,n)}var St=Pt.extend({initialize:function(e,n){X(this,n),this._layers={},e&&this.addData(e)},addData:function(e){var n=z(e)?e:e.features,r,a,f;if(n){for(r=0,a=n.length;r<a;r++)f=n[r],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var p=this.options;if(p.filter&&!p.filter(e))return this;var I=fi(e,p);return I?(I.feature=hi(e),I.defaultOptions=I.options,this.resetStyle(I),p.onEachFeature&&p.onEachFeature(e,I),this.addLayer(I)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=U({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(n){this._setLayerStyle(n,e)},this)},_setLayerStyle:function(e,n){e.setStyle&&(typeof n=="function"&&(n=n(e.feature)),e.setStyle(n))}});function fi(e,n){var r=e.type==="Feature"?e.geometry:e,a=r?r.coordinates:null,f=[],p=n&&n.pointToLayer,I=n&&n.coordsToLatLng||Ei,R,V,ee,ue;if(!a&&!r)return null;switch(r.type){case"Point":return R=I(a),tr(p,e,R,n);case"MultiPoint":for(ee=0,ue=a.length;ee<ue;ee++)R=I(a[ee]),f.push(tr(p,e,R,n));return new Pt(f);case"LineString":case"MultiLineString":return V=li(a,r.type==="LineString"?0:1,I),new Et(V,n);case"Polygon":case"MultiPolygon":return V=li(a,r.type==="Polygon"?1:2,I),new yn(V,n);case"GeometryCollection":for(ee=0,ue=r.geometries.length;ee<ue;ee++){var ye=fi({geometry:r.geometries[ee],type:"Feature",properties:e.properties},n);ye&&f.push(ye)}return new Pt(f);case"FeatureCollection":for(ee=0,ue=r.features.length;ee<ue;ee++){var De=fi(r.features[ee],n);De&&f.push(De)}return new Pt(f);default:throw new Error("Invalid GeoJSON object.")}}function tr(e,n,r,a){return e?e(n,r):new ai(r,a&&a.markersInheritOptions&&a)}function Ei(e){return new Se(e[1],e[0],e[2])}function li(e,n,r){for(var a=[],f=0,p=e.length,I;f<p;f++)I=n?li(e[f],n-1,r):(r||Ei)(e[f]),a.push(I);return a}function Si(e,n){return e=xe(e),e.alt!==void 0?[N(e.lng,n),N(e.lat,n),N(e.alt,n)]:[N(e.lng,n),N(e.lat,n)]}function ci(e,n,r,a){for(var f=[],p=0,I=e.length;p<I;p++)f.push(n?ci(e[p],dt(e[p])?0:n-1,r,a):Si(e[p],a));return!n&&r&&f.length>0&&f.push(f[0].slice()),f}function vn(e,n){return e.feature?U({},e.feature,{geometry:n}):hi(n)}function hi(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var Ni={toGeoJSON:function(e){return vn(this,{type:"Point",coordinates:Si(this.getLatLng(),e)})}};ai.include(Ni),Pi.include(Ni),si.include(Ni),Et.include({toGeoJSON:function(e){var n=!dt(this._latlngs),r=ci(this._latlngs,n?1:0,!1,e);return vn(this,{type:(n?"Multi":"")+"LineString",coordinates:r})}}),yn.include({toGeoJSON:function(e){var n=!dt(this._latlngs),r=n&&!dt(this._latlngs[0]),a=ci(this._latlngs,r?2:n?1:0,!0,e);return n||(a=[a]),vn(this,{type:(r?"Multi":"")+"Polygon",coordinates:a})}}),bn.include({toMultiPoint:function(e){var n=[];return this.eachLayer(function(r){n.push(r.toGeoJSON(e).geometry.coordinates)}),vn(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(e){var n=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(n==="MultiPoint")return this.toMultiPoint(e);var r=n==="GeometryCollection",a=[];return this.eachLayer(function(f){if(f.toGeoJSON){var p=f.toGeoJSON(e);if(r)a.push(p.geometry);else{var I=hi(p);I.type==="FeatureCollection"?a.push.apply(a,I.features):a.push(I)}}}),r?vn(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function nr(e,n){return new St(e,n)}var qr=nr,ui=yt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,n,r){this._url=e,this._bounds=we(n),X(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ke(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Be(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Gt(this._image),this},bringToBack:function(){return this._map&&Ut(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=we(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",n=this._image=e?this._url:Ee("img");if(ke(n,"leaflet-image-layer"),this._zoomAnimated&&ke(n,"leaflet-zoom-animated"),this.options.className&&ke(n,this.options.className),n.onselectstart=v,n.onmousemove=v,n.onload=g(this.fire,this,"load"),n.onerror=g(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=n.src;return}n.src=this._url,n.alt=this.options.alt},_animateZoom:function(e){var n=this._map.getZoomScale(e.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;It(this._image,r,n)},_reset:function(){var e=this._image,n=new me(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=n.getSize();Ve(e,n.min),e.style.width=r.x+"px",e.style.height=r.y+"px"},_updateOpacity:function(){ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Kr=function(e,n,r){return new ui(e,n,r)},ir=ui.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",n=this._image=e?this._url:Ee("video");if(ke(n,"leaflet-image-layer"),this._zoomAnimated&&ke(n,"leaflet-zoom-animated"),this.options.className&&ke(n,this.options.className),n.onselectstart=v,n.onmousemove=v,n.onloadeddata=g(this.fire,this,"load"),e){for(var r=n.getElementsByTagName("source"),a=[],f=0;f<r.length;f++)a.push(r[f].src);this._url=r.length>0?a:[n.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(n.style,"objectFit")&&(n.style.objectFit="fill"),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,n.muted=!!this.options.muted,n.playsInline=!!this.options.playsInline;for(var p=0;p<this._url.length;p++){var I=Ee("source");I.src=this._url[p],n.appendChild(I)}}});function Jr(e,n,r){return new ir(e,n,r)}var rr=ui.extend({_initImage:function(){var e=this._image=this._url;ke(e,"leaflet-image-layer"),this._zoomAnimated&&ke(e,"leaflet-zoom-animated"),this.options.className&&ke(e,this.options.className),e.onselectstart=v,e.onmousemove=v}});function Xr(e,n,r){return new rr(e,n,r)}var Lt=yt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,n){e&&(e instanceof Se||z(e))?(this._latlng=xe(e),X(this,n)):(X(this,e),this._source=n),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&ot(this._container,1),this.bringToFront(),this.options.interactive&&(ke(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(ot(this._container,0),this._removeTimeout=setTimeout(g(Be,void 0,this._container),200)):Be(this._container),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=xe(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gt(this._container),this},bringToBack:function(){return this._map&&Ut(this._container),this},_prepareOpen:function(e){var n=this._source;if(!n._map)return!1;if(n instanceof Pt){n=null;var r=this._source._layers;for(var a in r)if(r[a]._map){n=r[a];break}if(!n)return!1;this._source=n}if(!e)if(n.getCenter)e=n.getCenter();else if(n.getLatLng)e=n.getLatLng();else if(n.getBounds)e=n.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,n=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof n=="string")e.innerHTML=n;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),n=ie(this.options.offset),r=this._getAnchor();this._zoomAnimated?Ve(this._container,e.add(r)):n=n.add(e).add(r);var a=this._containerBottom=-n.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=a+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(e,n,r,a){var f=n;return f instanceof e||(f=new e(a).setContent(n)),r&&f.setLatLng(r),f}}),yt.include({_initOverlay:function(e,n,r,a){var f=r;return f instanceof e?(X(f,a),f._source=this):(f=n&&!a?n:new e(a,this),f.setContent(r)),f}});var di=Lt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Lt.prototype.openOn.call(this,e)},onAdd:function(e){Lt.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ht||this._source.on("preclick",D))},onRemove:function(e){Lt.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ht||this._source.off("preclick",D))},getEvents:function(){var e=Lt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",n=this._container=Ee("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=Ee("div",e+"-content-wrapper",n);if(this._contentNode=Ee("div",e+"-content",r),W(n),O(this._contentNode),o(n,"contextmenu",D),this._tipContainer=Ee("div",e+"-tip-container",n),this._tip=Ee("div",e+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=Ee("a",e+"-close-button",n);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',o(a,"click",function(f){F(f),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,n=e.style;n.width="",n.whiteSpace="nowrap";var r=e.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),n.width=r+1+"px",n.whiteSpace="",n.height="";var a=e.offsetHeight,f=this.options.maxHeight,p="leaflet-popup-scrolled";f&&a>f?(n.height=f+"px",ke(e,p)):Qe(e,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var n=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),r=this._getAnchor();Ve(this._container,n.add(r))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,n=parseInt(Zt(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+n,a=this._containerWidth,f=new fe(this._containerLeft,-r-this._containerBottom);f._add(Re(this._container));var p=e.layerPointToContainerPoint(f),I=ie(this.options.autoPanPadding),R=ie(this.options.autoPanPaddingTopLeft||I),V=ie(this.options.autoPanPaddingBottomRight||I),ee=e.getSize(),ue=0,ye=0;p.x+a+V.x>ee.x&&(ue=p.x+a-ee.x+V.x),p.x-ue-R.x<0&&(ue=p.x-R.x),p.y+r+V.y>ee.y&&(ye=p.y+r-ee.y+V.y),p.y-ye-R.y<0&&(ye=p.y-R.y),(ue||ye)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([ue,ye]))}},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),$r=function(e,n){return new di(e,n)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(e,n,r){return this._initOverlay(di,e,n,r).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),yt.include({bindPopup:function(e,n){return this._popup=this._initOverlay(di,this._popup,e,n),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Pt||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){te(e);var n=e.layer||e.target;if(this._popup._source===n&&!(n instanceof Ht)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=n,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var pi=Lt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Lt.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Lt.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Lt.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",n=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ee("div",n),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var n,r,a=this._map,f=this._container,p=a.latLngToContainerPoint(a.getCenter()),I=a.layerPointToContainerPoint(e),R=this.options.direction,V=f.offsetWidth,ee=f.offsetHeight,ue=ie(this.options.offset),ye=this._getAnchor();R==="top"?(n=V/2,r=ee):R==="bottom"?(n=V/2,r=0):R==="center"?(n=V/2,r=ee/2):R==="right"?(n=0,r=ee/2):R==="left"?(n=V,r=ee/2):I.x<p.x?(R="right",n=0,r=ee/2):(R="left",n=V+(ue.x+ye.x)*2,r=ee/2),e=e.subtract(ie(n,r,!0)).add(ue).add(ye),Qe(f,"leaflet-tooltip-right"),Qe(f,"leaflet-tooltip-left"),Qe(f,"leaflet-tooltip-top"),Qe(f,"leaflet-tooltip-bottom"),ke(f,"leaflet-tooltip-"+R),Ve(f,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&ot(this._container,e)},_animateZoom:function(e){var n=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(n)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),eo=function(e,n){return new pi(e,n)};_e.include({openTooltip:function(e,n,r){return this._initOverlay(pi,e,n,r).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),yt.include({bindTooltip:function(e,n){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(pi,this._tooltip,e,n),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var n=e?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[n](r),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Pt||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var n=typeof e.getElement=="function"&&e.getElement();n&&(o(n,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),o(n,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var n=typeof e.getElement=="function"&&e.getElement();n&&n.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var n=this;this._map.once("moveend",function(){n._openOnceFlag=!1,n._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var n=e.latlng,r,a;this._tooltip.options.sticky&&e.originalEvent&&(r=this._map.mouseEventToContainerPoint(e.originalEvent),a=this._map.containerPointToLayerPoint(r),n=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(n)}});var or=_n.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var n=e&&e.tagName==="DIV"?e:document.createElement("div"),r=this.options;if(r.html instanceof Element?(tn(n),n.appendChild(r.html)):n.innerHTML=r.html!==!1?r.html:"",r.bgPos){var a=ie(r.bgPos);n.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});function to(e){return new or(e)}_n.Default=Un;var Fn=yt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){X(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Be(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ut(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof fe?e:new fe(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var n=this.getPane().children,r=-e(-1/0,1/0),a=0,f=n.length,p;a<f;a++)p=n[a].style.zIndex,n[a]!==this._container&&p&&(r=e(r,+p));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!pe.ielt9){ot(this._container,this.options.opacity);var e=+new Date,n=!1,r=!1;for(var a in this._tiles){var f=this._tiles[a];if(!(!f.current||!f.loaded)){var p=Math.min(1,(e-f.loaded)/200);ot(f.el,p),p<1?n=!0:(f.active?r=!0:this._onOpaqueTile(f),f.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),n&&(oe(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ee("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,n=this.options.maxZoom;if(e!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===e?(this._levels[r].el.style.zIndex=n-Math.abs(e-r),this._onUpdateLevel(r)):(Be(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var a=this._levels[e],f=this._map;return a||(a=this._levels[e]={},a.el=Ee("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=n,a.origin=f.project(f.unproject(f.getPixelOrigin()),e).round(),a.zoom=e,this._setZoomTransform(a,f.getCenter(),f.getZoom()),v(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var e,n,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)n=this._tiles[e],n.retain=n.current;for(e in this._tiles)if(n=this._tiles[e],n.current&&!n.active){var a=n.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var n in this._tiles)this._tiles[n].coords.z===e&&this._removeTile(n)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Be(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,n,r,a){var f=Math.floor(e/2),p=Math.floor(n/2),I=r-1,R=new fe(+f,+p);R.z=+I;var V=this._tileCoordsToKey(R),ee=this._tiles[V];return ee&&ee.active?(ee.retain=!0,!0):(ee&&ee.loaded&&(ee.retain=!0),I>a?this._retainParent(f,p,I,a):!1)},_retainChildren:function(e,n,r,a){for(var f=2*e;f<2*e+2;f++)for(var p=2*n;p<2*n+2;p++){var I=new fe(f,p);I.z=r+1;var R=this._tileCoordsToKey(I),V=this._tiles[R];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);r+1<a&&this._retainChildren(f,p,r+1,a)}},_resetView:function(e){var n=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var n=this.options;return n.minNativeZoom!==void 0&&e<n.minNativeZoom?n.minNativeZoom:n.maxNativeZoom!==void 0&&n.maxNativeZoom<e?n.maxNativeZoom:e},_setView:function(e,n,r,a){var f=Math.round(n);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var p=this.options.updateWhenZooming&&f!==this._tileZoom;(!a||p)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(e),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(e,n)},_setZoomTransforms:function(e,n){for(var r in this._levels)this._setZoomTransform(this._levels[r],e,n)},_setZoomTransform:function(e,n,r){var a=this._map.getZoomScale(r,e.zoom),f=e.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(n,r)).round();pe.any3d?It(e.el,f,a):Ve(e.el,f)},_resetGrid:function(){var e=this._map,n=e.options.crs,r=this._tileSize=this.getTileSize(),a=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,n.wrapLng[0]],a).x/r.x),Math.ceil(e.project([0,n.wrapLng[1]],a).x/r.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([n.wrapLat[0],0],a).y/r.x),Math.ceil(e.project([n.wrapLat[1],0],a).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var n=this._map,r=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),a=n.getZoomScale(r,this._tileZoom),f=n.project(e,this._tileZoom).floor(),p=n.getSize().divideBy(a*2);return new me(f.subtract(p),f.add(p))},_update:function(e){var n=this._map;if(n){var r=this._clampZoom(n.getZoom());if(e===void 0&&(e=n.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(e),f=this._pxBoundsToTileRange(a),p=f.getCenter(),I=[],R=this.options.keepBuffer,V=new me(f.getBottomLeft().subtract([R,-R]),f.getTopRight().add([R,-R]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ee in this._tiles){var ue=this._tiles[ee].coords;(ue.z!==this._tileZoom||!V.contains(new fe(ue.x,ue.y)))&&(this._tiles[ee].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(e,r);return}for(var ye=f.min.y;ye<=f.max.y;ye++)for(var De=f.min.x;De<=f.max.x;De++){var st=new fe(De,ye);if(st.z=this._tileZoom,!!this._isValidTile(st)){var nt=this._tiles[this._tileCoordsToKey(st)];nt?nt.current=!0:I.push(st)}}if(I.sort(function(lt,Ln){return lt.distanceTo(p)-Ln.distanceTo(p)}),I.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var pt=document.createDocumentFragment();for(De=0;De<I.length;De++)this._addTile(I[De],pt);this._level.el.appendChild(pt)}}}},_isValidTile:function(e){var n=this._map.options.crs;if(!n.infinite){var r=this._globalTileRange;if(!n.wrapLng&&(e.x<r.min.x||e.x>r.max.x)||!n.wrapLat&&(e.y<r.min.y||e.y>r.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(e);return we(this.options.bounds).overlaps(a)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var n=this._map,r=this.getTileSize(),a=e.scaleBy(r),f=a.add(r),p=n.unproject(a,e.z),I=n.unproject(f,e.z);return[p,I]},_tileCoordsToBounds:function(e){var n=this._tileCoordsToNwSe(e),r=new Ge(n[0],n[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var n=e.split(":"),r=new fe(+n[0],+n[1]);return r.z=+n[2],r},_removeTile:function(e){var n=this._tiles[e];n&&(Be(n.el),delete this._tiles[e],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){ke(e,"leaflet-tile");var n=this.getTileSize();e.style.width=n.x+"px",e.style.height=n.y+"px",e.onselectstart=v,e.onmousemove=v,pe.ielt9&&this.options.opacity<1&&ot(e,this.options.opacity)},_addTile:function(e,n){var r=this._getTilePos(e),a=this._tileCoordsToKey(e),f=this.createTile(this._wrapCoords(e),g(this._tileReady,this,e));this._initTile(f),this.createTile.length<2&&ne(g(this._tileReady,this,e,null,f)),Ve(f,r),this._tiles[a]={el:f,coords:e,current:!0},n.appendChild(f),this.fire("tileloadstart",{tile:f,coords:e})},_tileReady:function(e,n,r){n&&this.fire("tileerror",{error:n,tile:r,coords:e});var a=this._tileCoordsToKey(e);r=this._tiles[a],r&&(r.loaded=+new Date,this._map._fadeAnimated?(ot(r.el,0),oe(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),n||(ke(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),pe.ielt9||!this._map._fadeAnimated?ne(this._pruneTiles,this):setTimeout(g(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var n=new fe(this._wrapX?T(e.x,this._wrapX):e.x,this._wrapY?T(e.y,this._wrapY):e.y);return n.z=e.z,n},_pxBoundsToTileRange:function(e){var n=this.getTileSize();return new me(e.min.unscaleBy(n).floor(),e.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function no(e){return new Fn(e)}var Mn=Fn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,n){this._url=e,n=X(this,n),n.detectRetina&&pe.retina&&n.maxZoom>0?(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom=Math.min(n.maxZoom,n.minZoom+1)):(n.zoomOffset++,n.maxZoom=Math.max(n.minZoom,n.maxZoom-1)),n.minZoom=Math.max(0,n.minZoom)):n.zoomReverse?n.minZoom=Math.min(n.maxZoom,n.minZoom):n.maxZoom=Math.max(n.minZoom,n.maxZoom),typeof n.subdomains=="string"&&(n.subdomains=n.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,n){return this._url===e&&n===void 0&&(n=!0),this._url=e,n||this.redraw(),this},createTile:function(e,n){var r=document.createElement("img");return o(r,"load",g(this._tileOnLoad,this,n,r)),o(r,"error",g(this._tileOnError,this,n,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(e),r},getTileUrl:function(e){var n={r:pe.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(n.y=r),n["-y"]=r}return Q(this._url,U(n,this.options))},_tileOnLoad:function(e,n){pe.ielt9?setTimeout(g(e,this,null,n),0):e(null,n)},_tileOnError:function(e,n,r){var a=this.options.errorTileUrl;a&&n.getAttribute("src")!==a&&(n.src=a),e(r,n)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,n=this.options.maxZoom,r=this.options.zoomReverse,a=this.options.zoomOffset;return r&&(e=n-e),e+a},_getSubdomain:function(e){var n=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var e,n;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(n=this._tiles[e].el,n.onload=v,n.onerror=v,!n.complete)){n.src=G;var r=this._tiles[e].coords;Be(n),delete this._tiles[e],this.fire("tileabort",{tile:n,coords:r})}},_removeTile:function(e){var n=this._tiles[e];if(n)return n.el.setAttribute("src",G),Fn.prototype._removeTile.call(this,e)},_tileReady:function(e,n,r){if(!(!this._map||r&&r.getAttribute("src")===G))return Fn.prototype._tileReady.call(this,e,n,r)}});function ar(e,n){return new Mn(e,n)}var sr=Mn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,n){this._url=e;var r=U({},this.defaultWmsParams);for(var a in n)a in this.options||(r[a]=n[a]);n=X(this,n);var f=n.detectRetina&&pe.retina?2:1,p=this.getTileSize();r.width=p.x*f,r.height=p.y*f,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,Mn.prototype.onAdd.call(this,e)},getTileUrl:function(e){var n=this._tileCoordsToNwSe(e),r=this._crs,a=Ne(r.project(n[0]),r.project(n[1])),f=a.min,p=a.max,I=(this._wmsVersion>=1.3&&this._crs===$i?[f.y,f.x,p.y,p.x]:[f.x,f.y,p.x,p.y]).join(","),R=Mn.prototype.getTileUrl.call(this,e);return R+Y(this.wmsParams,R,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(e,n){return U(this.wmsParams,e),n||this.redraw(),this}});function io(e,n){return new sr(e,n)}Mn.WMS=sr,ar.wms=io;var Nt=yt.extend({options:{padding:.1},initialize:function(e){X(this,e),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ke(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,n){var r=this._map.getZoomScale(n,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,n),p=a.multiplyBy(-r).add(f).subtract(this._map._getNewPixelOrigin(e,n));pe.any3d?It(this._container,p,r):Ve(this._container,p)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,n=this._map.getSize(),r=this._map.containerPointToLayerPoint(n.multiplyBy(-e)).round();this._bounds=new me(r,r.add(n.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fr=Nt.extend({options:{tolerance:0},getEvents:function(){var e=Nt.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");o(e,"mousemove",this._onMouseMove,this),o(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),o(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){oe(this._redrawRequest),delete this._ctx,Be(this._container),l(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var n in this._layers)e=this._layers[n],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nt.prototype._update.call(this);var e=this._bounds,n=this._container,r=e.getSize(),a=pe.retina?2:1;Ve(n,e.min),n.width=a*r.x,n.height=a*r.y,n.style.width=r.x+"px",n.style.height=r.y+"px",pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Nt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[m(e)]=e;var n=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var n=e._order,r=n.next,a=n.prev;r?r.prev=a:this._drawLast=a,a?a.next=r:this._drawFirst=r,delete e._order,delete this._layers[m(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var n=e.options.dashArray.split(/[, ]+/),r=[],a,f;for(f=0;f<n.length;f++){if(a=Number(n[f]),isNaN(a))return;r.push(a)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||ne(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var n=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new me,this._redrawBounds.extend(e._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(e._pxBounds.max.add([n,n]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var n=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,n.x,n.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,n=this._redrawBounds;if(this._ctx.save(),n){var r=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)e=a.layer,(!n||e._pxBounds&&e._pxBounds.intersects(n))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,n){if(this._drawing){var r,a,f,p,I=e._parts,R=I.length,V=this._ctx;if(R){for(V.beginPath(),r=0;r<R;r++){for(a=0,f=I[r].length;a<f;a++)p=I[r][a],V[a?"lineTo":"moveTo"](p.x,p.y);n&&V.closePath()}this._fillStroke(V,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var n=e._point,r=this._ctx,a=Math.max(Math.round(e._radius),1),f=(Math.max(Math.round(e._radiusY),1)||a)/a;f!==1&&(r.save(),r.scale(1,f)),r.beginPath(),r.arc(n.x,n.y/f,a,0,Math.PI*2,!1),f!==1&&r.restore(),this._fillStroke(r,e)}},_fillStroke:function(e,n){var r=n.options;r.fill&&(e.globalAlpha=r.fillOpacity,e.fillStyle=r.fillColor||r.color,e.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(e.setLineDash&&e.setLineDash(n.options&&n.options._dashArray||[]),e.globalAlpha=r.opacity,e.lineWidth=r.weight,e.strokeStyle=r.color,e.lineCap=r.lineCap,e.lineJoin=r.lineJoin,e.stroke())},_onClick:function(e){for(var n=this._map.mouseEventToLayerPoint(e),r,a,f=this._drawFirst;f;f=f.next)r=f.layer,r.options.interactive&&r._containsPoint(n)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(r))&&(a=r);this._fireEvent(a?[a]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var n=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,n)}},_handleMouseOut:function(e){var n=this._hoveredLayer;n&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,n){if(!this._mouseHoverThrottled){for(var r,a,f=this._drawFirst;f;f=f.next)r=f.layer,r.options.interactive&&r._containsPoint(n)&&(a=r);a!==this._hoveredLayer&&(this._handleMouseOut(e),a&&(ke(this._container,"leaflet-interactive"),this._fireEvent([a],e,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(g(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,n,r){this._map._fireDOMEvent(n,r||n.type,e)},_bringToFront:function(e){var n=e._order;if(n){var r=n.next,a=n.prev;if(r)r.prev=a;else return;a?a.next=r:r&&(this._drawFirst=r),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(e)}},_bringToBack:function(e){var n=e._order;if(n){var r=n.next,a=n.prev;if(a)a.next=r;else return;r?r.prev=a:a&&(this._drawLast=a),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(e)}}});function lr(e){return pe.canvas?new fr(e):null}var Yn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ro={_initContainer:function(){this._container=Ee("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nt.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var n=e._container=Yn("shape");ke(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",e._path=Yn("path"),n.appendChild(e._path),this._updateStyle(e),this._layers[m(e)]=e},_addPath:function(e){var n=e._container;this._container.appendChild(n),e.options.interactive&&e.addInteractiveTarget(n)},_removePath:function(e){var n=e._container;Be(n),e.removeInteractiveTarget(n),delete this._layers[m(e)]},_updateStyle:function(e){var n=e._stroke,r=e._fill,a=e.options,f=e._container;f.stroked=!!a.stroke,f.filled=!!a.fill,a.stroke?(n||(n=e._stroke=Yn("stroke")),f.appendChild(n),n.weight=a.weight+"px",n.color=a.color,n.opacity=a.opacity,a.dashArray?n.dashStyle=z(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=a.lineCap.replace("butt","flat"),n.joinstyle=a.lineJoin):n&&(f.removeChild(n),e._stroke=null),a.fill?(r||(r=e._fill=Yn("fill")),f.appendChild(r),r.color=a.fillColor||a.color,r.opacity=a.fillOpacity):r&&(f.removeChild(r),e._fill=null)},_updateCircle:function(e){var n=e._point.round(),r=Math.round(e._radius),a=Math.round(e._radiusY||r);this._setPath(e,e._empty()?"M0 0":"AL "+n.x+","+n.y+" "+r+","+a+" 0,"+65535*360)},_setPath:function(e,n){e._path.v=n},_bringToFront:function(e){Gt(e._container)},_bringToBack:function(e){Ut(e._container)}},gi=pe.vml?Yn:sn,Qn=Nt.extend({_initContainer:function(){this._container=gi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Be(this._container),l(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nt.prototype._update.call(this);var e=this._bounds,n=e.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(n))&&(this._svgSize=n,r.setAttribute("width",n.x),r.setAttribute("height",n.y)),Ve(r,e.min),r.setAttribute("viewBox",[e.min.x,e.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(e){var n=e._path=gi("path");e.options.className&&ke(n,e.options.className),e.options.interactive&&ke(n,"leaflet-interactive"),this._updateStyle(e),this._layers[m(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Be(e._path),e.removeInteractiveTarget(e._path),delete this._layers[m(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var n=e._path,r=e.options;n&&(r.stroke?(n.setAttribute("stroke",r.color),n.setAttribute("stroke-opacity",r.opacity),n.setAttribute("stroke-width",r.weight),n.setAttribute("stroke-linecap",r.lineCap),n.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?n.setAttribute("stroke-dasharray",r.dashArray):n.removeAttribute("stroke-dasharray"),r.dashOffset?n.setAttribute("stroke-dashoffset",r.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),r.fill?(n.setAttribute("fill",r.fillColor||r.color),n.setAttribute("fill-opacity",r.fillOpacity),n.setAttribute("fill-rule",r.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(e,n){this._setPath(e,Xe(e._parts,n))},_updateCircle:function(e){var n=e._point,r=Math.max(Math.round(e._radius),1),a=Math.max(Math.round(e._radiusY),1)||r,f="a"+r+","+a+" 0 1,0 ",p=e._empty()?"M0 0":"M"+(n.x-r)+","+n.y+f+r*2+",0 "+f+-r*2+",0 ";this._setPath(e,p)},_setPath:function(e,n){e._path.setAttribute("d",n)},_bringToFront:function(e){Gt(e._path)},_bringToBack:function(e){Ut(e._path)}});pe.vml&&Qn.include(ro);function cr(e){return pe.svg||pe.vml?new Qn(e):null}_e.include({getRenderer:function(e){var n=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this._createRenderer()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var n=this._paneRenderers[e];return n===void 0&&(n=this._createRenderer({pane:e}),this._paneRenderers[e]=n),n},_createRenderer:function(e){return this.options.preferCanvas&&lr(e)||cr(e)}});var hr=yn.extend({initialize:function(e,n){yn.prototype.initialize.call(this,this._boundsToLatLngs(e),n)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=we(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function oo(e,n){return new hr(e,n)}Qn.create=gi,Qn.pointsToPath=Xe,St.geometryToLayer=fi,St.coordsToLatLng=Ei,St.coordsToLatLngs=li,St.latLngToCoords=Si,St.latLngsToCoords=ci,St.getFeature=vn,St.asFeature=hi,_e.mergeOptions({boxZoom:!0});var ur=Mt.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){o(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){l(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Be(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),vt(),dn(),this._startPoint=this._map.mouseEventToContainerPoint(e),o(document,{contextmenu:te,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=Ee("div","leaflet-zoom-box",this._container),ke(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var n=new me(this._point,this._startPoint),r=n.getSize();Ve(this._box,n.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(Be(this._box),Qe(this._container,"leaflet-crosshair")),Dt(),jn(),l(document,{contextmenu:te,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(g(this._resetState,this),0);var n=new Ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",ur),_e.mergeOptions({doubleClickZoom:!0});var dr=Mt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var n=this._map,r=n.getZoom(),a=n.options.zoomDelta,f=e.originalEvent.shiftKey?r-a:r+a;n.options.doubleClickZoom==="center"?n.setZoom(f):n.setZoomAround(e.containerPoint,f)}});_e.addInitHook("addHandler","doubleClickZoom",dr),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var pr=Mt.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Vt(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}ke(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qe(this._map._container,"leaflet-grab"),Qe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=we(this._map.options.maxBounds);this._offsetLimit=Ne(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var n=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(n),this._prunePositions(n)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,n){return e-(e-n)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;e.x<n.min.x&&(e.x=this._viscousLimit(e.x,n.min.x)),e.y<n.min.y&&(e.y=this._viscousLimit(e.y,n.min.y)),e.x>n.max.x&&(e.x=this._viscousLimit(e.x,n.max.x)),e.y>n.max.y&&(e.y=this._viscousLimit(e.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,n=Math.round(e/2),r=this._initialWorldOffset,a=this._draggable._newPos.x,f=(a-n+r)%e+n-r,p=(a+n+r)%e-n-r,I=Math.abs(f+r)<Math.abs(p+r)?f:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(e){var n=this._map,r=n.options,a=!r.inertia||e.noInertia||this._times.length<2;if(n.fire("dragend",e),a)n.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,I=r.easeLinearity,R=f.multiplyBy(I/p),V=R.distanceTo([0,0]),ee=Math.min(r.inertiaMaxSpeed,V),ue=R.multiplyBy(ee/V),ye=ee/(r.inertiaDeceleration*I),De=ue.multiplyBy(-ye/2).round();!De.x&&!De.y?n.fire("moveend"):(De=n._limitOffset(De,n.options.maxBounds),ne(function(){n.panBy(De,{duration:ye,easeLinearity:I,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",pr),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gr=Mt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),o(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),l(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,n=document.documentElement,r=e.scrollTop||n.scrollTop,a=e.scrollLeft||n.scrollLeft;this._map._container.focus(),window.scrollTo(a,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var n=this._panKeys={},r=this.keyCodes,a,f;for(a=0,f=r.left.length;a<f;a++)n[r.left[a]]=[-1*e,0];for(a=0,f=r.right.length;a<f;a++)n[r.right[a]]=[e,0];for(a=0,f=r.down.length;a<f;a++)n[r.down[a]]=[0,e];for(a=0,f=r.up.length;a<f;a++)n[r.up[a]]=[0,-1*e]},_setZoomDelta:function(e){var n=this._zoomKeys={},r=this.keyCodes,a,f;for(a=0,f=r.zoomIn.length;a<f;a++)n[r.zoomIn[a]]=e;for(a=0,f=r.zoomOut.length;a<f;a++)n[r.zoomOut[a]]=-e},_addHooks:function(){o(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){l(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=e.keyCode,r=this._map,a;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(a=this._panKeys[n],e.shiftKey&&(a=ie(a).multiplyBy(3)),r.options.maxBounds&&(a=r._limitOffset(ie(a),r.options.maxBounds)),r.options.worldCopyJump){var f=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(a)));r.panTo(f)}else r.panBy(a)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else if(n===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;te(e)}}});_e.addInitHook("addHandler","keyboard",gr),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var mr=Mt.extend({addHooks:function(){o(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){l(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var n=Ae(e),r=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var a=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(g(this._performZoom,this),a),te(e)},_performZoom:function(){var e=this._map,n=e.getZoom(),r=this._map.options.zoomSnap||0;e._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,p=r?Math.ceil(f/r)*r:f,I=e._limitZoom(n+(this._delta>0?p:-p))-n;this._delta=0,this._startTime=null,I&&(e.options.scrollWheelZoom==="center"?e.setZoom(n+I):e.setZoomAround(this._lastMousePos,n+I))}});_e.addInitHook("addHandler","scrollWheelZoom",mr);var ao=600;_e.mergeOptions({tapHold:pe.touchNative&&pe.safari&&pe.mobile,tapTolerance:15});var br=Mt.extend({addHooks:function(){o(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){l(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var n=e.touches[0];this._startPos=this._newPos=new fe(n.clientX,n.clientY),this._holdTimeout=setTimeout(g(function(){this._cancel(),this._isTapValid()&&(o(document,"touchend",F),o(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",n))},this),ao),o(document,"touchend touchcancel contextmenu",this._cancel,this),o(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){l(document,"touchend",F),l(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),l(document,"touchend touchcancel contextmenu",this._cancel,this),l(document,"touchmove",this._onMove,this)},_onMove:function(e){var n=e.touches[0];this._newPos=new fe(n.clientX,n.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,n){var r=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});r._simulated=!0,n.target.dispatchEvent(r)}});_e.addInitHook("addHandler","tapHold",br),_e.mergeOptions({touchZoom:pe.touch,bounceAtZoomLimits:!0});var _r=Mt.extend({addHooks:function(){ke(this._map._container,"leaflet-touch-zoom"),o(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),l(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var n=this._map;if(!(!e.touches||e.touches.length!==2||n._animatingZoom||this._zooming)){var r=n.mouseEventToContainerPoint(e.touches[0]),a=n.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),n.options.touchZoom!=="center"&&(this._pinchStartLatLng=n.containerPointToLatLng(r.add(a)._divideBy(2))),this._startDist=r.distanceTo(a),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),o(document,"touchmove",this._onTouchMove,this),o(document,"touchend touchcancel",this._onTouchEnd,this),F(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var n=this._map,r=n.mouseEventToContainerPoint(e.touches[0]),a=n.mouseEventToContainerPoint(e.touches[1]),f=r.distanceTo(a)/this._startDist;if(this._zoom=n.getScaleZoom(f,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&f<1||this._zoom>n.getMaxZoom()&&f>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var p=r._add(a)._divideBy(2)._subtract(this._centerPoint);if(f===1&&p.x===0&&p.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(n._moveStart(!0,!1),this._moved=!0),oe(this._animRequest);var I=g(n._move,n,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ne(I,this,!0),F(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,oe(this._animRequest),l(document,"touchmove",this._onTouchMove,this),l(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",_r),_e.BoxZoom=ur,_e.DoubleClickZoom=dr,_e.Drag=pr,_e.Keyboard=gr,_e.ScrollWheelZoom=mr,_e.TapHold=br,_e.TouchZoom=_r,Z.Bounds=me,Z.Browser=pe,Z.CRS=ft,Z.Canvas=fr,Z.Circle=Pi,Z.CircleMarker=si,Z.Class=ce,Z.Control=qe,Z.DivIcon=or,Z.DivOverlay=Lt,Z.DomEvent=Ye,Z.DomUtil=i,Z.Draggable=Vt,Z.Evented=he,Z.FeatureGroup=Pt,Z.GeoJSON=St,Z.GridLayer=Fn,Z.Handler=Mt,Z.Icon=_n,Z.ImageOverlay=ui,Z.LatLng=Se,Z.LatLngBounds=Ge,Z.Layer=yt,Z.LayerGroup=bn,Z.LineUtil=Or,Z.Map=_e,Z.Marker=ai,Z.Mixin=Er,Z.Path=Ht,Z.Point=fe,Z.PolyUtil=Sr,Z.Polygon=yn,Z.Polyline=Et,Z.Popup=di,Z.PosAnimation=at,Z.Projection=Br,Z.Rectangle=hr,Z.Renderer=Nt,Z.SVG=Qn,Z.SVGOverlay=rr,Z.TileLayer=Mn,Z.Tooltip=pi,Z.Transformation=At,Z.Util=ge,Z.VideoOverlay=ir,Z.bind=g,Z.bounds=Ne,Z.canvas=lr,Z.circle=Vr,Z.circleMarker=Qr,Z.control=Qt,Z.divIcon=to,Z.extend=U,Z.featureGroup=Ur,Z.geoJSON=nr,Z.geoJson=qr,Z.gridLayer=no,Z.icon=Fr,Z.imageOverlay=Kr,Z.latLng=xe,Z.latLngBounds=we,Z.layerGroup=Gr,Z.map=Bn,Z.marker=Yr,Z.point=ie,Z.polygon=Wr,Z.polyline=Hr,Z.popup=$r,Z.rectangle=oo,Z.setOptions=X,Z.stamp=m,Z.svg=cr,Z.svgOverlay=Xr,Z.tileLayer=ar,Z.tooltip=eo,Z.transformation=wt,Z.version=re,Z.videoOverlay=Jr;var so=window.L;Z.noConflict=function(){return window.L=so,this},window.L=Z})});var Ir=bi((ia,Io)=>{Io.exports="https://mrt-map.github.io/map/marker-icon-2x-SP63CLEO.png"});var Dr=bi((ra,Do)=>{Do.exports="https://mrt-map.github.io/map/marker-icon-2V3QKKVC.png"});var Tr=bi((oa,To)=>{To.exports="https://mrt-map.github.io/map/marker-shadow-MEXDWUU7.png"});var Mi=Vn(wn(),1);L.Control.Bar=L.Control.extend({includes:L.Mixin.Events,options:{position:"top",visible:"true"},initialize:function(Z,re){L.setOptions(this,re);var U=this._contentContainer=L.DomUtil.get(Z);U.parentNode.removeChild(U);var d=this.options.visible?"visible":"",g=this._container=L.DomUtil.create("div","leaflet-control-bar-"+this.options.position+" leaflet-control-bar "+d);L.DomUtil.addClass(U,"leaflet-control"),g.appendChild(U)},addTo:function(Z){var re=this._container,U=this._contentContainer;L.DomEvent.on(re,"transitionend",this._handleTransitionEvent,this).on(re,"webkitTransitionEnd",this._handleTransitionEvent,this);var d=Z._controlContainer;d.insertBefore(re,d.firstChild),this._map=Z;var g=L.DomEvent.stopPropagation;return L.DomEvent.on(U,"contextmenu",g).on(U,"click",g).on(U,"mousedown",g).on(U,"touchstart",g).on(U,"dblclick",g).on(U,"mousewheel",g).on(U,"MozMousePixelScroll",g),this},removeFrom:function(Z){this.hide();var re=this._contentContainer,U=Z._controlContainer;U.removeChild(this._container),this._map=null;var d=L.DomEvent.stopPropagation;return L.DomEvent.off(re,"contextmenu",d).off(re,"click",d).off(re,"mousedown",d).off(re,"touchstart",d).off(re,"dblclick",d).off(re,"mousewheel",d).off(re,"MozMousePixelScroll",d),L.DomEvent.off(container,"transitionend",this._handleTransitionEvent,this).off(container,"webkitTransitionEnd",this._handleTransitionEvent,this),this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.fire("show"))},hide:function(Z){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.fire("hide")),Z&&L.DomEvent.stopPropagation(Z)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},setContent:function(Z){return this.getContainer().innerHTML=Z,this},_handleTransitionEvent:function(Z){(Z.propertyName=="left"||Z.propertyName=="right"||Z.propertyName=="bottom"||Z.propertyName=="top")&&this.fire(this.isVisible()?"shown":"hidden")}});L.control.bar=function(Z,re){return new L.Control.Bar(Z,re)};(()=>{var Z={9705:(d,g,h)=>{"use strict";var m=h(1540);function _(T){var v=[1/0,1/0,-1/0,-1/0];return m.coordEach(T,function(N){v[0]>N[0]&&(v[0]=N[0]),v[1]>N[1]&&(v[1]=N[1]),v[2]<N[0]&&(v[2]=N[0]),v[3]<N[1]&&(v[3]=N[1])}),v}_.default=_,g.Z=_},4102:(d,g)=>{"use strict";function h(z,j,G){G===void 0&&(G={});var w={type:"Feature"};return(G.id===0||G.id)&&(w.id=G.id),G.bbox&&(w.bbox=G.bbox),w.properties=j||{},w.geometry=z,w}function m(z,j,G){if(G===void 0&&(G={}),!z)throw new Error("coordinates is required");if(!Array.isArray(z))throw new Error("coordinates must be an Array");if(z.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Q(z[0])||!Q(z[1]))throw new Error("coordinates must contain numbers");return h({type:"Point",coordinates:z},j,G)}function _(z,j,G){G===void 0&&(G={});for(var w=0,S=z;w<S.length;w++){var B=S[w];if(B.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var $=0;$<B[B.length-1].length;$++)if(B[B.length-1][$]!==B[0][$])throw new Error("First and last Position are not equivalent.")}return h({type:"Polygon",coordinates:z},j,G)}function T(z,j,G){if(G===void 0&&(G={}),z.length<2)throw new Error("coordinates must be an array of two or more positions");return h({type:"LineString",coordinates:z},j,G)}function v(z,j){j===void 0&&(j={});var G={type:"FeatureCollection"};return j.id&&(G.id=j.id),j.bbox&&(G.bbox=j.bbox),G.features=z,G}function N(z,j,G){return G===void 0&&(G={}),h({type:"MultiLineString",coordinates:z},j,G)}function H(z,j,G){return G===void 0&&(G={}),h({type:"MultiPoint",coordinates:z},j,G)}function K(z,j,G){return G===void 0&&(G={}),h({type:"MultiPolygon",coordinates:z},j,G)}function X(z,j){j===void 0&&(j="kilometers");var G=g.factors[j];if(!G)throw new Error(j+" units is invalid");return z*G}function Y(z,j){j===void 0&&(j="kilometers");var G=g.factors[j];if(!G)throw new Error(j+" units is invalid");return z/G}function A(z){return 180*(z%(2*Math.PI))/Math.PI}function Q(z){return!isNaN(z)&&z!==null&&!Array.isArray(z)}Object.defineProperty(g,"__esModule",{value:!0}),g.earthRadius=63710088e-1,g.factors={centimeters:100*g.earthRadius,centimetres:100*g.earthRadius,degrees:g.earthRadius/111325,feet:3.28084*g.earthRadius,inches:39.37*g.earthRadius,kilometers:g.earthRadius/1e3,kilometres:g.earthRadius/1e3,meters:g.earthRadius,metres:g.earthRadius,miles:g.earthRadius/1609.344,millimeters:1e3*g.earthRadius,millimetres:1e3*g.earthRadius,nauticalmiles:g.earthRadius/1852,radians:1,yards:1.0936*g.earthRadius},g.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/g.earthRadius,yards:1.0936133},g.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},g.feature=h,g.geometry=function(z,j,G){switch(G===void 0&&(G={}),z){case"Point":return m(j).geometry;case"LineString":return T(j).geometry;case"Polygon":return _(j).geometry;case"MultiPoint":return H(j).geometry;case"MultiLineString":return N(j).geometry;case"MultiPolygon":return K(j).geometry;default:throw new Error(z+" is invalid")}},g.point=m,g.points=function(z,j,G){return G===void 0&&(G={}),v(z.map(function(w){return m(w,j)}),G)},g.polygon=_,g.polygons=function(z,j,G){return G===void 0&&(G={}),v(z.map(function(w){return _(w,j)}),G)},g.lineString=T,g.lineStrings=function(z,j,G){return G===void 0&&(G={}),v(z.map(function(w){return T(w,j)}),G)},g.featureCollection=v,g.multiLineString=N,g.multiPoint=H,g.multiPolygon=K,g.geometryCollection=function(z,j,G){return G===void 0&&(G={}),h({type:"GeometryCollection",geometries:z},j,G)},g.round=function(z,j){if(j===void 0&&(j=0),j&&!(j>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,j||0);return Math.round(z*G)/G},g.radiansToLength=X,g.lengthToRadians=Y,g.lengthToDegrees=function(z,j){return A(Y(z,j))},g.bearingToAzimuth=function(z){var j=z%360;return j<0&&(j+=360),j},g.radiansToDegrees=A,g.degreesToRadians=function(z){return z%360*Math.PI/180},g.convertLength=function(z,j,G){if(j===void 0&&(j="kilometers"),G===void 0&&(G="kilometers"),!(z>=0))throw new Error("length must be a positive number");return X(Y(z,j),G)},g.convertArea=function(z,j,G){if(j===void 0&&(j="meters"),G===void 0&&(G="kilometers"),!(z>=0))throw new Error("area must be a positive number");var w=g.areaFactors[j];if(!w)throw new Error("invalid original units");var S=g.areaFactors[G];if(!S)throw new Error("invalid final units");return z/w*S},g.isNumber=Q,g.isObject=function(z){return!!z&&z.constructor===Object},g.validateBBox=function(z){if(!z)throw new Error("bbox is required");if(!Array.isArray(z))throw new Error("bbox must be an Array");if(z.length!==4&&z.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");z.forEach(function(j){if(!Q(j))throw new Error("bbox must only contain numbers")})},g.validateId=function(z){if(!z)throw new Error("id is required");if(["string","number"].indexOf(typeof z)===-1)throw new Error("id must be a number or a string")}},1540:(d,g,h)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var m=h(4102);function _(Y,A,Q){if(Y!==null)for(var z,j,G,w,S,B,$,se,ne=0,oe=0,ge=Y.type,ce=ge==="FeatureCollection",de=ge==="Feature",Le=ce?Y.features.length:1,he=0;he<Le;he++){S=(se=!!($=ce?Y.features[he].geometry:de?Y.geometry:Y)&&$.type==="GeometryCollection")?$.geometries.length:1;for(var fe=0;fe<S;fe++){var Oe=0,ie=0;if((w=se?$.geometries[fe]:$)!==null){B=w.coordinates;var me=w.type;switch(ne=!Q||me!=="Polygon"&&me!=="MultiPolygon"?0:1,me){case null:break;case"Point":if(A(B,oe,he,Oe,ie)===!1)return!1;oe++,Oe++;break;case"LineString":case"MultiPoint":for(z=0;z<B.length;z++){if(A(B[z],oe,he,Oe,ie)===!1)return!1;oe++,me==="MultiPoint"&&Oe++}me==="LineString"&&Oe++;break;case"Polygon":case"MultiLineString":for(z=0;z<B.length;z++){for(j=0;j<B[z].length-ne;j++){if(A(B[z][j],oe,he,Oe,ie)===!1)return!1;oe++}me==="MultiLineString"&&Oe++,me==="Polygon"&&ie++}me==="Polygon"&&Oe++;break;case"MultiPolygon":for(z=0;z<B.length;z++){for(ie=0,j=0;j<B[z].length;j++){for(G=0;G<B[z][j].length-ne;G++){if(A(B[z][j][G],oe,he,Oe,ie)===!1)return!1;oe++}ie++}Oe++}break;case"GeometryCollection":for(z=0;z<w.geometries.length;z++)if(_(w.geometries[z],A,Q)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(Y,A){var Q;switch(Y.type){case"FeatureCollection":for(Q=0;Q<Y.features.length&&A(Y.features[Q].properties,Q)!==!1;Q++);break;case"Feature":A(Y.properties,0)}}function v(Y,A){if(Y.type==="Feature")A(Y,0);else if(Y.type==="FeatureCollection")for(var Q=0;Q<Y.features.length&&A(Y.features[Q],Q)!==!1;Q++);}function N(Y,A){var Q,z,j,G,w,S,B,$,se,ne,oe=0,ge=Y.type==="FeatureCollection",ce=Y.type==="Feature",de=ge?Y.features.length:1;for(Q=0;Q<de;Q++){for(S=ge?Y.features[Q].geometry:ce?Y.geometry:Y,$=ge?Y.features[Q].properties:ce?Y.properties:{},se=ge?Y.features[Q].bbox:ce?Y.bbox:void 0,ne=ge?Y.features[Q].id:ce?Y.id:void 0,w=(B=!!S&&S.type==="GeometryCollection")?S.geometries.length:1,j=0;j<w;j++)if((G=B?S.geometries[j]:S)!==null)switch(G.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(A(G,oe,$,se,ne)===!1)return!1;break;case"GeometryCollection":for(z=0;z<G.geometries.length;z++)if(A(G.geometries[z],oe,$,se,ne)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(A(null,oe,$,se,ne)===!1)return!1;oe++}}function H(Y,A){N(Y,function(Q,z,j,G,w){var S,B=Q===null?null:Q.type;switch(B){case null:case"Point":case"LineString":case"Polygon":return A(m.feature(Q,j,{bbox:G,id:w}),z,0)!==!1&&void 0}switch(B){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon"}for(var $=0;$<Q.coordinates.length;$++){var se={type:S,coordinates:Q.coordinates[$]};if(A(m.feature(se,j),z,$)===!1)return!1}})}function K(Y,A){H(Y,function(Q,z,j){var G=0;if(Q.geometry){var w=Q.geometry.type;if(w!=="Point"&&w!=="MultiPoint"){var S,B=0,$=0,se=0;return _(Q,function(ne,oe,ge,ce,de){if(S===void 0||z>B||ce>$||de>se)return S=ne,B=z,$=ce,se=de,void(G=0);var Le=m.lineString([S,ne],Q.properties);if(A(Le,z,j,de,G)===!1)return!1;G++,S=ne})!==!1&&void 0}}})}function X(Y,A){if(!Y)throw new Error("geojson is required");H(Y,function(Q,z,j){if(Q.geometry!==null){var G=Q.geometry.type,w=Q.geometry.coordinates;switch(G){case"LineString":if(A(Q,z,j,0,0)===!1)return!1;break;case"Polygon":for(var S=0;S<w.length;S++)if(A(m.lineString(w[S],Q.properties),z,j,S)===!1)return!1}}})}g.coordAll=function(Y){var A=[];return _(Y,function(Q){A.push(Q)}),A},g.coordEach=_,g.coordReduce=function(Y,A,Q,z){var j=Q;return _(Y,function(G,w,S,B,$){j=w===0&&Q===void 0?G:A(j,G,w,S,B,$)},z),j},g.featureEach=v,g.featureReduce=function(Y,A,Q){var z=Q;return v(Y,function(j,G){z=G===0&&Q===void 0?j:A(z,j,G)}),z},g.findPoint=function(Y,A){if(A=A||{},!m.isObject(A))throw new Error("options is invalid");var Q,z=A.featureIndex||0,j=A.multiFeatureIndex||0,G=A.geometryIndex||0,w=A.coordIndex||0,S=A.properties;switch(Y.type){case"FeatureCollection":z<0&&(z=Y.features.length+z),S=S||Y.features[z].properties,Q=Y.features[z].geometry;break;case"Feature":S=S||Y.properties,Q=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Q=Y;break;default:throw new Error("geojson is invalid")}if(Q===null)return null;var B=Q.coordinates;switch(Q.type){case"Point":return m.point(B,S,A);case"MultiPoint":return j<0&&(j=B.length+j),m.point(B[j],S,A);case"LineString":return w<0&&(w=B.length+w),m.point(B[w],S,A);case"Polygon":return G<0&&(G=B.length+G),w<0&&(w=B[G].length+w),m.point(B[G][w],S,A);case"MultiLineString":return j<0&&(j=B.length+j),w<0&&(w=B[j].length+w),m.point(B[j][w],S,A);case"MultiPolygon":return j<0&&(j=B.length+j),G<0&&(G=B[j].length+G),w<0&&(w=B[j][G].length-w),m.point(B[j][G][w],S,A)}throw new Error("geojson is invalid")},g.findSegment=function(Y,A){if(A=A||{},!m.isObject(A))throw new Error("options is invalid");var Q,z=A.featureIndex||0,j=A.multiFeatureIndex||0,G=A.geometryIndex||0,w=A.segmentIndex||0,S=A.properties;switch(Y.type){case"FeatureCollection":z<0&&(z=Y.features.length+z),S=S||Y.features[z].properties,Q=Y.features[z].geometry;break;case"Feature":S=S||Y.properties,Q=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Q=Y;break;default:throw new Error("geojson is invalid")}if(Q===null)return null;var B=Q.coordinates;switch(Q.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=B.length+w-1),m.lineString([B[w],B[w+1]],S,A);case"Polygon":return G<0&&(G=B.length+G),w<0&&(w=B[G].length+w-1),m.lineString([B[G][w],B[G][w+1]],S,A);case"MultiLineString":return j<0&&(j=B.length+j),w<0&&(w=B[j].length+w-1),m.lineString([B[j][w],B[j][w+1]],S,A);case"MultiPolygon":return j<0&&(j=B.length+j),G<0&&(G=B[j].length+G),w<0&&(w=B[j][G].length-w-1),m.lineString([B[j][G][w],B[j][G][w+1]],S,A)}throw new Error("geojson is invalid")},g.flattenEach=H,g.flattenReduce=function(Y,A,Q){var z=Q;return H(Y,function(j,G,w){z=G===0&&w===0&&Q===void 0?j:A(z,j,G,w)}),z},g.geomEach=N,g.geomReduce=function(Y,A,Q){var z=Q;return N(Y,function(j,G,w,S,B){z=G===0&&Q===void 0?j:A(z,j,G,w,S,B)}),z},g.lineEach=X,g.lineReduce=function(Y,A,Q){var z=Q;return X(Y,function(j,G,w,S){z=G===0&&Q===void 0?j:A(z,j,G,w,S)}),z},g.propEach=T,g.propReduce=function(Y,A,Q){var z=Q;return T(Y,function(j,G){z=G===0&&Q===void 0?j:A(z,j,G)}),z},g.segmentEach=K,g.segmentReduce=function(Y,A,Q){var z=Q,j=!1;return K(Y,function(G,w,S,B,$){z=j===!1&&Q===void 0?G:A(z,G,w,S,B,$),j=!0}),z}},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(d){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),h=g.length>>>0,m=arguments[1],_=0;_<h;_++)if(d.call(m,g[_],_,g))return _;return-1},Array.prototype.find=Array.prototype.find||function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),h=g.length>>>0,m=arguments[1],_=0;_<h;_++){var T=g[_];if(d.call(m,T,_,g))return T}},typeof Object.assign!="function"&&(Object.assign=function(d){"use strict";if(d==null)throw new TypeError("Cannot convert undefined or null to object");d=Object(d);for(var g=1;g<arguments.length;g++){var h=arguments[g];if(h!=null)for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(d[m]=h[m])}return d}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(d){d.hasOwnProperty("remove")||Object.defineProperty(d,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(d,g){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),m=h.length>>>0;if(m===0)return!1;for(var _,T,v=0|g,N=Math.max(v>=0?v:m-Math.abs(v),0);N<m;){if((_=h[N])===(T=d)||typeof _=="number"&&typeof T=="number"&&isNaN(_)&&isNaN(T))return!0;N++}return!1}})},1787:(d,g,h)=>{var m=h(2582),_=h(4102),T=h(1540),v=h(9705).Z,N=T.featureEach,H=(T.coordEach,_.polygon,_.featureCollection);function K(X){var Y=new m(X);return Y.insert=function(A){if(A.type!=="Feature")throw new Error("invalid feature");return A.bbox=A.bbox?A.bbox:v(A),m.prototype.insert.call(this,A)},Y.load=function(A){var Q=[];return Array.isArray(A)?A.forEach(function(z){if(z.type!=="Feature")throw new Error("invalid features");z.bbox=z.bbox?z.bbox:v(z),Q.push(z)}):N(A,function(z){if(z.type!=="Feature")throw new Error("invalid features");z.bbox=z.bbox?z.bbox:v(z),Q.push(z)}),m.prototype.load.call(this,Q)},Y.remove=function(A,Q){if(A.type!=="Feature")throw new Error("invalid feature");return A.bbox=A.bbox?A.bbox:v(A),m.prototype.remove.call(this,A,Q)},Y.clear=function(){return m.prototype.clear.call(this)},Y.search=function(A){var Q=m.prototype.search.call(this,this.toBBox(A));return H(Q)},Y.collides=function(A){return m.prototype.collides.call(this,this.toBBox(A))},Y.all=function(){var A=m.prototype.all.call(this);return H(A)},Y.toJSON=function(){return m.prototype.toJSON.call(this)},Y.fromJSON=function(A){return m.prototype.fromJSON.call(this,A)},Y.toBBox=function(A){var Q;if(A.bbox)Q=A.bbox;else if(Array.isArray(A)&&A.length===4)Q=A;else if(Array.isArray(A)&&A.length===6)Q=[A[0],A[1],A[3],A[4]];else if(A.type==="Feature")Q=v(A);else{if(A.type!=="FeatureCollection")throw new Error("invalid geojson");Q=v(A)}return{minX:Q[0],minY:Q[1],maxX:Q[2],maxY:Q[3]}},Y}d.exports=K,d.exports.default=K},1989:(d,g,h)=>{var m=h(1789),_=h(401),T=h(7667),v=h(1327),N=h(1866);function H(K){var X=-1,Y=K==null?0:K.length;for(this.clear();++X<Y;){var A=K[X];this.set(A[0],A[1])}}H.prototype.clear=m,H.prototype.delete=_,H.prototype.get=T,H.prototype.has=v,H.prototype.set=N,d.exports=H},8407:(d,g,h)=>{var m=h(7040),_=h(4125),T=h(2117),v=h(7518),N=h(4705);function H(K){var X=-1,Y=K==null?0:K.length;for(this.clear();++X<Y;){var A=K[X];this.set(A[0],A[1])}}H.prototype.clear=m,H.prototype.delete=_,H.prototype.get=T,H.prototype.has=v,H.prototype.set=N,d.exports=H},7071:(d,g,h)=>{var m=h(852)(h(5639),"Map");d.exports=m},3369:(d,g,h)=>{var m=h(4785),_=h(1285),T=h(6e3),v=h(9916),N=h(5265);function H(K){var X=-1,Y=K==null?0:K.length;for(this.clear();++X<Y;){var A=K[X];this.set(A[0],A[1])}}H.prototype.clear=m,H.prototype.delete=_,H.prototype.get=T,H.prototype.has=v,H.prototype.set=N,d.exports=H},6384:(d,g,h)=>{var m=h(8407),_=h(7465),T=h(3779),v=h(7599),N=h(4758),H=h(4309);function K(X){var Y=this.__data__=new m(X);this.size=Y.size}K.prototype.clear=_,K.prototype.delete=T,K.prototype.get=v,K.prototype.has=N,K.prototype.set=H,d.exports=K},2705:(d,g,h)=>{var m=h(5639).Symbol;d.exports=m},1149:(d,g,h)=>{var m=h(5639).Uint8Array;d.exports=m},6874:d=>{d.exports=function(g,h,m){switch(m.length){case 0:return g.call(h);case 1:return g.call(h,m[0]);case 2:return g.call(h,m[0],m[1]);case 3:return g.call(h,m[0],m[1],m[2])}return g.apply(h,m)}},4636:(d,g,h)=>{var m=h(2545),_=h(5694),T=h(1469),v=h(4144),N=h(5776),H=h(6719),K=Object.prototype.hasOwnProperty;d.exports=function(X,Y){var A=T(X),Q=!A&&_(X),z=!A&&!Q&&v(X),j=!A&&!Q&&!z&&H(X),G=A||Q||z||j,w=G?m(X.length,String):[],S=w.length;for(var B in X)!Y&&!K.call(X,B)||G&&(B=="length"||z&&(B=="offset"||B=="parent")||j&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||N(B,S))||w.push(B);return w}},9932:d=>{d.exports=function(g,h){for(var m=-1,_=g==null?0:g.length,T=Array(_);++m<_;)T[m]=h(g[m],m,g);return T}},6556:(d,g,h)=>{var m=h(9465),_=h(7813);d.exports=function(T,v,N){(N!==void 0&&!_(T[v],N)||N===void 0&&!(v in T))&&m(T,v,N)}},4865:(d,g,h)=>{var m=h(9465),_=h(7813),T=Object.prototype.hasOwnProperty;d.exports=function(v,N,H){var K=v[N];T.call(v,N)&&_(K,H)&&(H!==void 0||N in v)||m(v,N,H)}},8470:(d,g,h)=>{var m=h(7813);d.exports=function(_,T){for(var v=_.length;v--;)if(m(_[v][0],T))return v;return-1}},9465:(d,g,h)=>{var m=h(8777);d.exports=function(_,T,v){T=="__proto__"&&m?m(_,T,{configurable:!0,enumerable:!0,value:v,writable:!0}):_[T]=v}},3118:(d,g,h)=>{var m=h(3218),_=Object.create,T=function(){function v(){}return function(N){if(!m(N))return{};if(_)return _(N);v.prototype=N;var H=new v;return v.prototype=void 0,H}}();d.exports=T},8483:(d,g,h)=>{var m=h(5063)();d.exports=m},7786:(d,g,h)=>{var m=h(1811),_=h(327);d.exports=function(T,v){for(var N=0,H=(v=m(v,T)).length;T!=null&&N<H;)T=T[_(v[N++])];return N&&N==H?T:void 0}},4239:(d,g,h)=>{var m=h(2705),_=h(9607),T=h(2333),v=m?m.toStringTag:void 0;d.exports=function(N){return N==null?N===void 0?"[object Undefined]":"[object Null]":v&&v in Object(N)?_(N):T(N)}},8565:d=>{var g=Object.prototype.hasOwnProperty;d.exports=function(h,m){return h!=null&&g.call(h,m)}},9454:(d,g,h)=>{var m=h(4239),_=h(7005);d.exports=function(T){return _(T)&&m(T)=="[object Arguments]"}},8458:(d,g,h)=>{var m=h(3560),_=h(5346),T=h(3218),v=h(346),N=/^\[object .+?Constructor\]$/,H=Function.prototype,K=Object.prototype,X=H.toString,Y=K.hasOwnProperty,A=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");d.exports=function(Q){return!(!T(Q)||_(Q))&&(m(Q)?A:N).test(v(Q))}},8749:(d,g,h)=>{var m=h(4239),_=h(1780),T=h(7005),v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v["[object Arguments]"]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v["[object Function]"]=v["[object Map]"]=v["[object Number]"]=v["[object Object]"]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1,d.exports=function(N){return T(N)&&_(N.length)&&!!v[m(N)]}},313:(d,g,h)=>{var m=h(3218),_=h(5726),T=h(3498),v=Object.prototype.hasOwnProperty;d.exports=function(N){if(!m(N))return T(N);var H=_(N),K=[];for(var X in N)(X!="constructor"||!H&&v.call(N,X))&&K.push(X);return K}},2980:(d,g,h)=>{var m=h(6384),_=h(6556),T=h(8483),v=h(9783),N=h(3218),H=h(1704),K=h(6390);d.exports=function X(Y,A,Q,z,j){Y!==A&&T(A,function(G,w){if(j||(j=new m),N(G))v(Y,A,w,Q,X,z,j);else{var S=z?z(K(Y,w),G,w+"",Y,A,j):void 0;S===void 0&&(S=G),_(Y,w,S)}},H)}},9783:(d,g,h)=>{var m=h(6556),_=h(4626),T=h(7133),v=h(278),N=h(8517),H=h(5694),K=h(1469),X=h(9246),Y=h(4144),A=h(3560),Q=h(3218),z=h(8630),j=h(6719),G=h(6390),w=h(9881);d.exports=function(S,B,$,se,ne,oe,ge){var ce=G(S,$),de=G(B,$),Le=ge.get(de);if(Le)m(S,$,Le);else{var he=oe?oe(ce,de,$+"",S,B,ge):void 0,fe=he===void 0;if(fe){var Oe=K(de),ie=!Oe&&Y(de),me=!Oe&&!ie&&j(de);he=de,Oe||ie||me?K(ce)?he=ce:X(ce)?he=v(ce):ie?(fe=!1,he=_(de,!0)):me?(fe=!1,he=T(de,!0)):he=[]:z(de)||H(de)?(he=ce,H(ce)?he=w(ce):Q(ce)&&!A(ce)||(he=N(de))):fe=!1}fe&&(ge.set(de,he),ne(he,de,se,oe,ge),ge.delete(de)),m(S,$,he)}}},5976:(d,g,h)=>{var m=h(6557),_=h(5357),T=h(61);d.exports=function(v,N){return T(_(v,N,m),v+"")}},6560:(d,g,h)=>{var m=h(5703),_=h(8777),T=h(6557),v=_?function(N,H){return _(N,"toString",{configurable:!0,enumerable:!1,value:m(H),writable:!0})}:T;d.exports=v},2545:d=>{d.exports=function(g,h){for(var m=-1,_=Array(g);++m<g;)_[m]=h(m);return _}},531:(d,g,h)=>{var m=h(2705),_=h(9932),T=h(1469),v=h(3448),N=m?m.prototype:void 0,H=N?N.toString:void 0;d.exports=function K(X){if(typeof X=="string")return X;if(T(X))return _(X,K)+"";if(v(X))return H?H.call(X):"";var Y=X+"";return Y=="0"&&1/X==-1/0?"-0":Y}},1717:d=>{d.exports=function(g){return function(h){return g(h)}}},1811:(d,g,h)=>{var m=h(1469),_=h(5403),T=h(5514),v=h(9833);d.exports=function(N,H){return m(N)?N:_(N,H)?[N]:T(v(N))}},4318:(d,g,h)=>{var m=h(1149);d.exports=function(_){var T=new _.constructor(_.byteLength);return new m(T).set(new m(_)),T}},4626:(d,g,h)=>{d=h.nmd(d);var m=h(5639),_=g&&!g.nodeType&&g,T=_&&d&&!d.nodeType&&d,v=T&&T.exports===_?m.Buffer:void 0,N=v?v.allocUnsafe:void 0;d.exports=function(H,K){if(K)return H.slice();var X=H.length,Y=N?N(X):new H.constructor(X);return H.copy(Y),Y}},7133:(d,g,h)=>{var m=h(4318);d.exports=function(_,T){var v=T?m(_.buffer):_.buffer;return new _.constructor(v,_.byteOffset,_.length)}},278:d=>{d.exports=function(g,h){var m=-1,_=g.length;for(h||(h=Array(_));++m<_;)h[m]=g[m];return h}},8363:(d,g,h)=>{var m=h(4865),_=h(9465);d.exports=function(T,v,N,H){var K=!N;N||(N={});for(var X=-1,Y=v.length;++X<Y;){var A=v[X],Q=H?H(N[A],T[A],A,N,T):void 0;Q===void 0&&(Q=T[A]),K?_(N,A,Q):m(N,A,Q)}return N}},4429:(d,g,h)=>{var m=h(5639)["__core-js_shared__"];d.exports=m},1463:(d,g,h)=>{var m=h(5976),_=h(6612);d.exports=function(T){return m(function(v,N){var H=-1,K=N.length,X=K>1?N[K-1]:void 0,Y=K>2?N[2]:void 0;for(X=T.length>3&&typeof X=="function"?(K--,X):void 0,Y&&_(N[0],N[1],Y)&&(X=K<3?void 0:X,K=1),v=Object(v);++H<K;){var A=N[H];A&&T(v,A,H,X)}return v})}},5063:d=>{d.exports=function(g){return function(h,m,_){for(var T=-1,v=Object(h),N=_(h),H=N.length;H--;){var K=N[g?H:++T];if(m(v[K],K,v)===!1)break}return h}}},8777:(d,g,h)=>{var m=h(852),_=function(){try{var T=m(Object,"defineProperty");return T({},"",{}),T}catch{}}();d.exports=_},1957:(d,g,h)=>{var m=typeof h.g=="object"&&h.g&&h.g.Object===Object&&h.g;d.exports=m},5050:(d,g,h)=>{var m=h(7019);d.exports=function(_,T){var v=_.__data__;return m(T)?v[typeof T=="string"?"string":"hash"]:v.map}},852:(d,g,h)=>{var m=h(8458),_=h(7801);d.exports=function(T,v){var N=_(T,v);return m(N)?N:void 0}},5924:(d,g,h)=>{var m=h(5569)(Object.getPrototypeOf,Object);d.exports=m},9607:(d,g,h)=>{var m=h(2705),_=Object.prototype,T=_.hasOwnProperty,v=_.toString,N=m?m.toStringTag:void 0;d.exports=function(H){var K=T.call(H,N),X=H[N];try{H[N]=void 0;var Y=!0}catch{}var A=v.call(H);return Y&&(K?H[N]=X:delete H[N]),A}},7801:d=>{d.exports=function(g,h){return g?.[h]}},222:(d,g,h)=>{var m=h(1811),_=h(5694),T=h(1469),v=h(5776),N=h(1780),H=h(327);d.exports=function(K,X,Y){for(var A=-1,Q=(X=m(X,K)).length,z=!1;++A<Q;){var j=H(X[A]);if(!(z=K!=null&&Y(K,j)))break;K=K[j]}return z||++A!=Q?z:!!(Q=K==null?0:K.length)&&N(Q)&&v(j,Q)&&(T(K)||_(K))}},1789:(d,g,h)=>{var m=h(4536);d.exports=function(){this.__data__=m?m(null):{},this.size=0}},401:d=>{d.exports=function(g){var h=this.has(g)&&delete this.__data__[g];return this.size-=h?1:0,h}},7667:(d,g,h)=>{var m=h(4536),_=Object.prototype.hasOwnProperty;d.exports=function(T){var v=this.__data__;if(m){var N=v[T];return N==="__lodash_hash_undefined__"?void 0:N}return _.call(v,T)?v[T]:void 0}},1327:(d,g,h)=>{var m=h(4536),_=Object.prototype.hasOwnProperty;d.exports=function(T){var v=this.__data__;return m?v[T]!==void 0:_.call(v,T)}},1866:(d,g,h)=>{var m=h(4536);d.exports=function(_,T){var v=this.__data__;return this.size+=this.has(_)?0:1,v[_]=m&&T===void 0?"__lodash_hash_undefined__":T,this}},8517:(d,g,h)=>{var m=h(3118),_=h(5924),T=h(5726);d.exports=function(v){return typeof v.constructor!="function"||T(v)?{}:m(_(v))}},5776:d=>{var g=/^(?:0|[1-9]\d*)$/;d.exports=function(h,m){var _=typeof h;return!!(m=m??9007199254740991)&&(_=="number"||_!="symbol"&&g.test(h))&&h>-1&&h%1==0&&h<m}},6612:(d,g,h)=>{var m=h(7813),_=h(8612),T=h(5776),v=h(3218);d.exports=function(N,H,K){if(!v(K))return!1;var X=typeof H;return!!(X=="number"?_(K)&&T(H,K.length):X=="string"&&H in K)&&m(K[H],N)}},5403:(d,g,h)=>{var m=h(1469),_=h(3448),T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v=/^\w*$/;d.exports=function(N,H){if(m(N))return!1;var K=typeof N;return!(K!="number"&&K!="symbol"&&K!="boolean"&&N!=null&&!_(N))||v.test(N)||!T.test(N)||H!=null&&N in Object(H)}},7019:d=>{d.exports=function(g){var h=typeof g;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?g!=="__proto__":g===null}},5346:(d,g,h)=>{var m,_=h(4429),T=(m=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";d.exports=function(v){return!!T&&T in v}},5726:d=>{var g=Object.prototype;d.exports=function(h){var m=h&&h.constructor;return h===(typeof m=="function"&&m.prototype||g)}},7040:d=>{d.exports=function(){this.__data__=[],this.size=0}},4125:(d,g,h)=>{var m=h(8470),_=Array.prototype.splice;d.exports=function(T){var v=this.__data__,N=m(v,T);return!(N<0)&&(N==v.length-1?v.pop():_.call(v,N,1),--this.size,!0)}},2117:(d,g,h)=>{var m=h(8470);d.exports=function(_){var T=this.__data__,v=m(T,_);return v<0?void 0:T[v][1]}},7518:(d,g,h)=>{var m=h(8470);d.exports=function(_){return m(this.__data__,_)>-1}},4705:(d,g,h)=>{var m=h(8470);d.exports=function(_,T){var v=this.__data__,N=m(v,_);return N<0?(++this.size,v.push([_,T])):v[N][1]=T,this}},4785:(d,g,h)=>{var m=h(1989),_=h(8407),T=h(7071);d.exports=function(){this.size=0,this.__data__={hash:new m,map:new(T||_),string:new m}}},1285:(d,g,h)=>{var m=h(5050);d.exports=function(_){var T=m(this,_).delete(_);return this.size-=T?1:0,T}},6e3:(d,g,h)=>{var m=h(5050);d.exports=function(_){return m(this,_).get(_)}},9916:(d,g,h)=>{var m=h(5050);d.exports=function(_){return m(this,_).has(_)}},5265:(d,g,h)=>{var m=h(5050);d.exports=function(_,T){var v=m(this,_),N=v.size;return v.set(_,T),this.size+=v.size==N?0:1,this}},4523:(d,g,h)=>{var m=h(8306);d.exports=function(_){var T=m(_,function(N){return v.size===500&&v.clear(),N}),v=T.cache;return T}},4536:(d,g,h)=>{var m=h(852)(Object,"create");d.exports=m},3498:d=>{d.exports=function(g){var h=[];if(g!=null)for(var m in Object(g))h.push(m);return h}},1167:(d,g,h)=>{d=h.nmd(d);var m=h(1957),_=g&&!g.nodeType&&g,T=_&&d&&!d.nodeType&&d,v=T&&T.exports===_&&m.process,N=function(){try{var H=T&&T.require&&T.require("util").types;return H||v&&v.binding&&v.binding("util")}catch{}}();d.exports=N},2333:d=>{var g=Object.prototype.toString;d.exports=function(h){return g.call(h)}},5569:d=>{d.exports=function(g,h){return function(m){return g(h(m))}}},5357:(d,g,h)=>{var m=h(6874),_=Math.max;d.exports=function(T,v,N){return v=_(v===void 0?T.length-1:v,0),function(){for(var H=arguments,K=-1,X=_(H.length-v,0),Y=Array(X);++K<X;)Y[K]=H[v+K];K=-1;for(var A=Array(v+1);++K<v;)A[K]=H[K];return A[v]=N(Y),m(T,this,A)}}},5639:(d,g,h)=>{var m=h(1957),_=typeof self=="object"&&self&&self.Object===Object&&self,T=m||_||Function("return this")();d.exports=T},6390:d=>{d.exports=function(g,h){if((h!=="constructor"||typeof g[h]!="function")&&h!="__proto__")return g[h]}},61:(d,g,h)=>{var m=h(6560),_=h(1275)(m);d.exports=_},1275:d=>{var g=Date.now;d.exports=function(h){var m=0,_=0;return function(){var T=g(),v=16-(T-_);if(_=T,v>0){if(++m>=800)return arguments[0]}else m=0;return h.apply(void 0,arguments)}}},7465:(d,g,h)=>{var m=h(8407);d.exports=function(){this.__data__=new m,this.size=0}},3779:d=>{d.exports=function(g){var h=this.__data__,m=h.delete(g);return this.size=h.size,m}},7599:d=>{d.exports=function(g){return this.__data__.get(g)}},4758:d=>{d.exports=function(g){return this.__data__.has(g)}},4309:(d,g,h)=>{var m=h(8407),_=h(7071),T=h(3369);d.exports=function(v,N){var H=this.__data__;if(H instanceof m){var K=H.__data__;if(!_||K.length<199)return K.push([v,N]),this.size=++H.size,this;H=this.__data__=new T(K)}return H.set(v,N),this.size=H.size,this}},5514:(d,g,h)=>{var m=h(4523),_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,T=/\\(\\)?/g,v=m(function(N){var H=[];return N.charCodeAt(0)===46&&H.push(""),N.replace(_,function(K,X,Y,A){H.push(Y?A.replace(T,"$1"):X||K)}),H});d.exports=v},327:(d,g,h)=>{var m=h(3448);d.exports=function(_){if(typeof _=="string"||m(_))return _;var T=_+"";return T=="0"&&1/_==-1/0?"-0":T}},346:d=>{var g=Function.prototype.toString;d.exports=function(h){if(h!=null){try{return g.call(h)}catch{}try{return h+""}catch{}}return""}},5703:d=>{d.exports=function(g){return function(){return g}}},7813:d=>{d.exports=function(g,h){return g===h||g!=g&&h!=h}},7361:(d,g,h)=>{var m=h(7786);d.exports=function(_,T,v){var N=_==null?void 0:m(_,T);return N===void 0?v:N}},8721:(d,g,h)=>{var m=h(8565),_=h(222);d.exports=function(T,v){return T!=null&&_(T,v,m)}},6557:d=>{d.exports=function(g){return g}},5694:(d,g,h)=>{var m=h(9454),_=h(7005),T=Object.prototype,v=T.hasOwnProperty,N=T.propertyIsEnumerable,H=m(function(){return arguments}())?m:function(K){return _(K)&&v.call(K,"callee")&&!N.call(K,"callee")};d.exports=H},1469:d=>{var g=Array.isArray;d.exports=g},8612:(d,g,h)=>{var m=h(3560),_=h(1780);d.exports=function(T){return T!=null&&_(T.length)&&!m(T)}},9246:(d,g,h)=>{var m=h(8612),_=h(7005);d.exports=function(T){return _(T)&&m(T)}},4144:(d,g,h)=>{d=h.nmd(d);var m=h(5639),_=h(5062),T=g&&!g.nodeType&&g,v=T&&d&&!d.nodeType&&d,N=v&&v.exports===T?m.Buffer:void 0,H=(N?N.isBuffer:void 0)||_;d.exports=H},3560:(d,g,h)=>{var m=h(4239),_=h(3218);d.exports=function(T){if(!_(T))return!1;var v=m(T);return v=="[object Function]"||v=="[object GeneratorFunction]"||v=="[object AsyncFunction]"||v=="[object Proxy]"}},1780:d=>{d.exports=function(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=9007199254740991}},3218:d=>{d.exports=function(g){var h=typeof g;return g!=null&&(h=="object"||h=="function")}},7005:d=>{d.exports=function(g){return g!=null&&typeof g=="object"}},8630:(d,g,h)=>{var m=h(4239),_=h(5924),T=h(7005),v=Function.prototype,N=Object.prototype,H=v.toString,K=N.hasOwnProperty,X=H.call(Object);d.exports=function(Y){if(!T(Y)||m(Y)!="[object Object]")return!1;var A=_(Y);if(A===null)return!0;var Q=K.call(A,"constructor")&&A.constructor;return typeof Q=="function"&&Q instanceof Q&&H.call(Q)==X}},3448:(d,g,h)=>{var m=h(4239),_=h(7005);d.exports=function(T){return typeof T=="symbol"||_(T)&&m(T)=="[object Symbol]"}},6719:(d,g,h)=>{var m=h(8749),_=h(1717),T=h(1167),v=T&&T.isTypedArray,N=v?_(v):m;d.exports=N},1704:(d,g,h)=>{var m=h(4636),_=h(313),T=h(8612);d.exports=function(v){return T(v)?m(v,!0):_(v)}},8306:(d,g,h)=>{var m=h(3369);function _(T,v){if(typeof T!="function"||v!=null&&typeof v!="function")throw new TypeError("Expected a function");var N=function(){var H=arguments,K=v?v.apply(this,H):H[0],X=N.cache;if(X.has(K))return X.get(K);var Y=T.apply(this,H);return N.cache=X.set(K,Y)||X,Y};return N.cache=new(_.Cache||m),N}_.Cache=m,d.exports=_},2492:(d,g,h)=>{var m=h(2980),_=h(1463)(function(T,v,N){m(T,v,N)});d.exports=_},5062:d=>{d.exports=function(){return!1}},9881:(d,g,h)=>{var m=h(8363),_=h(1704);d.exports=function(T){return m(T,_(T))}},9833:(d,g,h)=>{var m=h(531);d.exports=function(_){return _==null?"":m(_)}},2676:function(d){d.exports=function(){"use strict";function g(C,c){if(!(C instanceof c))throw new TypeError("Cannot call a class as a function")}function h(C,c){for(var u=0;u<c.length;u++){var y=c[u];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(C,y.key,y)}}function m(C,c,u){return c&&h(C.prototype,c),u&&h(C,u),C}var _=function(){function C(c,u){this.next=null,this.key=c,this.data=u,this.left=null,this.right=null}return C}();function T(C,c){return C>c?1:C<c?-1:0}function v(C,c,u){for(var y=new _(null,null),P=y,E=y;;){var q=u(C,c.key);if(q<0){if(c.left===null)break;if(u(C,c.left.key)<0){var J=c.left;if(c.left=J.right,J.right=c,(c=J).left===null)break}E.left=c,E=c,c=c.left}else{if(!(q>0)||c.right===null||u(C,c.right.key)>0&&(J=c.right,c.right=J.left,J.left=c,(c=J).right===null))break;P.right=c,P=c,c=c.right}}return P.right=c.left,E.left=c.right,c.left=y.right,c.right=y.left,c}function N(C,c,u,y){var P=new _(C,c);if(u===null)return P.left=P.right=null,P;var E=y(C,(u=v(C,u,y)).key);return E<0?(P.left=u.left,P.right=u,u.left=null):E>=0&&(P.right=u.right,P.left=u,u.right=null),P}function H(C,c,u){var y=null,P=null;if(c){var E=u((c=v(C,c,u)).key,C);E===0?(y=c.left,P=c.right):E<0?(P=c.right,c.right=null,y=c):(y=c.left,c.left=null,P=c)}return{left:y,right:P}}function K(C,c,u){return c===null?C:(C===null||((c=v(C.key,c,u)).left=C),c)}function X(C,c,u,y,P){if(C){y(c+(u?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+P(C)+`
`);var E=c+(u?"    ":"\u2502   ");C.left&&X(C.left,E,!1,y,P),C.right&&X(C.right,E,!0,y,P)}}var Y=function(){function C(c){c===void 0&&(c=T),this._root=null,this._size=0,this._comparator=c}return C.prototype.insert=function(c,u){return this._size++,this._root=N(c,u,this._root,this._comparator)},C.prototype.add=function(c,u){var y=new _(c,u);this._root===null&&(y.left=y.right=null,this._size++,this._root=y);var P=this._comparator,E=v(c,this._root,P),q=P(c,E.key);return q===0?this._root=E:(q<0?(y.left=E.left,y.right=E,E.left=null):q>0&&(y.right=E.right,y.left=E,E.right=null),this._size++,this._root=y),this._root},C.prototype.remove=function(c){this._root=this._remove(c,this._root,this._comparator)},C.prototype._remove=function(c,u,y){var P;return u===null?null:y(c,(u=v(c,u,y)).key)===0?(u.left===null?P=u.right:(P=v(c,u.left,y)).right=u.right,this._size--,P):u},C.prototype.pop=function(){var c=this._root;if(c){for(;c.left;)c=c.left;return this._root=v(c.key,this._root,this._comparator),this._root=this._remove(c.key,this._root,this._comparator),{key:c.key,data:c.data}}return null},C.prototype.findStatic=function(c){for(var u=this._root,y=this._comparator;u;){var P=y(c,u.key);if(P===0)return u;u=P<0?u.left:u.right}return null},C.prototype.find=function(c){return this._root&&(this._root=v(c,this._root,this._comparator),this._comparator(c,this._root.key)!==0)?null:this._root},C.prototype.contains=function(c){for(var u=this._root,y=this._comparator;u;){var P=y(c,u.key);if(P===0)return!0;u=P<0?u.left:u.right}return!1},C.prototype.forEach=function(c,u){for(var y=this._root,P=[],E=!1;!E;)y!==null?(P.push(y),y=y.left):P.length!==0?(y=P.pop(),c.call(u,y),y=y.right):E=!0;return this},C.prototype.range=function(c,u,y,P){for(var E=[],q=this._comparator,J=this._root;E.length!==0||J;)if(J)E.push(J),J=J.left;else{if(q((J=E.pop()).key,u)>0)break;if(q(J.key,c)>=0&&y.call(P,J))return this;J=J.right}return this},C.prototype.keys=function(){var c=[];return this.forEach(function(u){var y=u.key;return c.push(y)}),c},C.prototype.values=function(){var c=[];return this.forEach(function(u){var y=u.data;return c.push(y)}),c},C.prototype.min=function(){return this._root?this.minNode(this._root).key:null},C.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},C.prototype.minNode=function(c){if(c===void 0&&(c=this._root),c)for(;c.left;)c=c.left;return c},C.prototype.maxNode=function(c){if(c===void 0&&(c=this._root),c)for(;c.right;)c=c.right;return c},C.prototype.at=function(c){for(var u=this._root,y=!1,P=0,E=[];!y;)if(u)E.push(u),u=u.left;else if(E.length>0){if(u=E.pop(),P===c)return u;P++,u=u.right}else y=!0;return null},C.prototype.next=function(c){var u=this._root,y=null;if(c.right){for(y=c.right;y.left;)y=y.left;return y}for(var P=this._comparator;u;){var E=P(c.key,u.key);if(E===0)break;E<0?(y=u,u=u.left):u=u.right}return y},C.prototype.prev=function(c){var u=this._root,y=null;if(c.left!==null){for(y=c.left;y.right;)y=y.right;return y}for(var P=this._comparator;u;){var E=P(c.key,u.key);if(E===0)break;E<0?u=u.left:(y=u,u=u.right)}return y},C.prototype.clear=function(){return this._root=null,this._size=0,this},C.prototype.toList=function(){return z(this._root)},C.prototype.load=function(c,u,y){u===void 0&&(u=[]),y===void 0&&(y=!1);var P=c.length,E=this._comparator;if(y&&w(c,u,0,P-1,E),this._root===null)this._root=A(c,u,0,P),this._size=P;else{var q=G(this.toList(),Q(c,u),E);P=this._size+P,this._root=j({head:q},0,P)}return this},C.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(C.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),C.prototype.toString=function(c){c===void 0&&(c=function(y){return String(y.key)});var u=[];return X(this._root,"",!0,function(y){return u.push(y)},c),u.join("")},C.prototype.update=function(c,u,y){var P=this._comparator,E=H(c,this._root,P),q=E.left,J=E.right;P(c,u)<0?J=N(u,y,J,P):q=N(u,y,q,P),this._root=K(q,J,P)},C.prototype.split=function(c){return H(c,this._root,this._comparator)},C}();function A(C,c,u,y){var P=y-u;if(P>0){var E=u+Math.floor(P/2),q=C[E],J=c[E],ae=new _(q,J);return ae.left=A(C,c,u,E),ae.right=A(C,c,E+1,y),ae}return null}function Q(C,c){for(var u=new _(null,null),y=u,P=0;P<C.length;P++)y=y.next=new _(C[P],c[P]);return y.next=null,u.next}function z(C){for(var c=C,u=[],y=!1,P=new _(null,null),E=P;!y;)c?(u.push(c),c=c.left):u.length>0?c=(c=E=E.next=u.pop()).right:y=!0;return E.next=null,P.next}function j(C,c,u){var y=u-c;if(y>0){var P=c+Math.floor(y/2),E=j(C,c,P),q=C.head;return q.left=E,C.head=C.head.next,q.right=j(C,P+1,u),q}return null}function G(C,c,u){for(var y=new _(null,null),P=y,E=C,q=c;E!==null&&q!==null;)u(E.key,q.key)<0?(P.next=E,E=E.next):(P.next=q,q=q.next),P=P.next;return E!==null?P.next=E:q!==null&&(P.next=q),y.next}function w(C,c,u,y,P){if(!(u>=y)){for(var E=C[u+y>>1],q=u-1,J=y+1;;){do q++;while(P(C[q],E)<0);do J--;while(P(C[J],E)>0);if(q>=J)break;var ae=C[q];C[q]=C[J],C[J]=ae,ae=c[q],c[q]=c[J],c[J]=ae}w(C,c,u,J,P),w(C,c,J+1,y,P)}}var S=function(C,c){return C.ll.x<=c.x&&c.x<=C.ur.x&&C.ll.y<=c.y&&c.y<=C.ur.y},B=function(C,c){if(c.ur.x<C.ll.x||C.ur.x<c.ll.x||c.ur.y<C.ll.y||C.ur.y<c.ll.y)return null;var u=C.ll.x<c.ll.x?c.ll.x:C.ll.x,y=C.ur.x<c.ur.x?C.ur.x:c.ur.x;return{ll:{x:u,y:C.ll.y<c.ll.y?c.ll.y:C.ll.y},ur:{x:y,y:C.ur.y<c.ur.y?C.ur.y:c.ur.y}}},$=Number.EPSILON;$===void 0&&($=Math.pow(2,-52));var se=$*$,ne=function(C,c){if(-$<C&&C<$&&-$<c&&c<$)return 0;var u=C-c;return u*u<se*C*c?0:C<c?-1:1},oe=function(){function C(){g(this,C),this.reset()}return m(C,[{key:"reset",value:function(){this.xRounder=new ge,this.yRounder=new ge}},{key:"round",value:function(c,u){return{x:this.xRounder.round(c),y:this.yRounder.round(u)}}}]),C}(),ge=function(){function C(){g(this,C),this.tree=new Y,this.round(0)}return m(C,[{key:"round",value:function(c){var u=this.tree.add(c),y=this.tree.prev(u);if(y!==null&&ne(u.key,y.key)===0)return this.tree.remove(c),y.key;var P=this.tree.next(u);return P!==null&&ne(u.key,P.key)===0?(this.tree.remove(c),P.key):c}}]),C}(),ce=new oe,de=function(C,c){return C.x*c.y-C.y*c.x},Le=function(C,c){return C.x*c.x+C.y*c.y},he=function(C,c,u){var y={x:c.x-C.x,y:c.y-C.y},P={x:u.x-C.x,y:u.y-C.y},E=de(y,P);return ne(E,0)},fe=function(C){return Math.sqrt(Le(C,C))},Oe=function(C,c,u){var y={x:c.x-C.x,y:c.y-C.y},P={x:u.x-C.x,y:u.y-C.y};return de(P,y)/fe(P)/fe(y)},ie=function(C,c,u){var y={x:c.x-C.x,y:c.y-C.y},P={x:u.x-C.x,y:u.y-C.y};return Le(P,y)/fe(P)/fe(y)},me=function(C,c,u){return c.y===0?null:{x:C.x+c.x/c.y*(u-C.y),y:u}},Ne=function(C,c,u){return c.x===0?null:{x:u,y:C.y+c.y/c.x*(u-C.x)}},Ge=function(C,c,u,y){if(c.x===0)return Ne(u,y,C.x);if(y.x===0)return Ne(C,c,u.x);if(c.y===0)return me(u,y,C.y);if(y.y===0)return me(C,c,u.y);var P=de(c,y);if(P==0)return null;var E={x:u.x-C.x,y:u.y-C.y},q=de(E,c)/P,J=de(E,y)/P;return{x:(C.x+J*c.x+(u.x+q*y.x))/2,y:(C.y+J*c.y+(u.y+q*y.y))/2}},we=function(){function C(c,u){g(this,C),c.events===void 0?c.events=[this]:c.events.push(this),this.point=c,this.isLeft=u}return m(C,null,[{key:"compare",value:function(c,u){var y=C.comparePoints(c.point,u.point);return y!==0?y:(c.point!==u.point&&c.link(u),c.isLeft!==u.isLeft?c.isLeft?1:-1:xe.compare(c.segment,u.segment))}},{key:"comparePoints",value:function(c,u){return c.x<u.x?-1:c.x>u.x?1:c.y<u.y?-1:c.y>u.y?1:0}}]),m(C,[{key:"link",value:function(c){if(c.point===this.point)throw new Error("Tried to link already linked events");for(var u=c.point.events,y=0,P=u.length;y<P;y++){var E=u[y];this.point.events.push(E),E.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var c=this.point.events.length,u=0;u<c;u++){var y=this.point.events[u];if(y.segment.consumedBy===void 0)for(var P=u+1;P<c;P++){var E=this.point.events[P];E.consumedBy===void 0&&y.otherSE.point.events===E.otherSE.point.events&&y.segment.consume(E.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var c=[],u=0,y=this.point.events.length;u<y;u++){var P=this.point.events[u];P!==this&&!P.segment.ringOut&&P.segment.isInResult()&&c.push(P)}return c}},{key:"getLeftmostComparator",value:function(c){var u=this,y=new Map,P=function(E){var q=E.otherSE;y.set(E,{sine:Oe(u.point,c.point,q.point),cosine:ie(u.point,c.point,q.point)})};return function(E,q){y.has(E)||P(E),y.has(q)||P(q);var J=y.get(E),ae=J.sine,ve=J.cosine,Te=y.get(q),Ie=Te.sine,be=Te.cosine;return ae>=0&&Ie>=0?ve<be?1:ve>be?-1:0:ae<0&&Ie<0?ve<be?-1:ve>be?1:0:Ie<ae?-1:Ie>ae?1:0}}}]),C}(),Se=0,xe=function(){function C(c,u,y,P){g(this,C),this.id=++Se,this.leftSE=c,c.segment=this,c.otherSE=u,this.rightSE=u,u.segment=this,u.otherSE=c,this.rings=y,this.windings=P}return m(C,null,[{key:"compare",value:function(c,u){var y=c.leftSE.point.x,P=u.leftSE.point.x,E=c.rightSE.point.x,q=u.rightSE.point.x;if(q<y)return 1;if(E<P)return-1;var J=c.leftSE.point.y,ae=u.leftSE.point.y,ve=c.rightSE.point.y,Te=u.rightSE.point.y;if(y<P){if(ae<J&&ae<ve)return 1;if(ae>J&&ae>ve)return-1;var Ie=c.comparePoint(u.leftSE.point);if(Ie<0)return 1;if(Ie>0)return-1;var be=u.comparePoint(c.rightSE.point);return be!==0?be:-1}if(y>P){if(J<ae&&J<Te)return-1;if(J>ae&&J>Te)return 1;var je=u.comparePoint(c.leftSE.point);if(je!==0)return je;var Pe=c.comparePoint(u.rightSE.point);return Pe<0?1:Pe>0?-1:1}if(J<ae)return-1;if(J>ae)return 1;if(E<q){var Ze=u.comparePoint(c.rightSE.point);if(Ze!==0)return Ze}if(E>q){var Ue=c.comparePoint(u.rightSE.point);if(Ue<0)return 1;if(Ue>0)return-1}if(E!==q){var We=ve-J,it=E-y,$e=Te-ae,He=q-P;if(We>it&&$e<He)return 1;if(We<it&&$e>He)return-1}return E>q?1:E<q||ve<Te?-1:ve>Te?1:c.id<u.id?-1:c.id>u.id?1:0}}]),m(C,[{key:"replaceRightSE",value:function(c){this.rightSE=c,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var c=this.leftSE.point.y,u=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:c<u?c:u},ur:{x:this.rightSE.point.x,y:c>u?c:u}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(c){return c.x===this.leftSE.point.x&&c.y===this.leftSE.point.y||c.x===this.rightSE.point.x&&c.y===this.rightSE.point.y}},{key:"comparePoint",value:function(c){if(this.isAnEndpoint(c))return 0;var u=this.leftSE.point,y=this.rightSE.point,P=this.vector();if(u.x===y.x)return c.x===u.x?0:c.x<u.x?1:-1;var E=(c.y-u.y)/P.y,q=u.x+E*P.x;if(c.x===q)return 0;var J=(c.x-u.x)/P.x,ae=u.y+J*P.y;return c.y===ae?0:c.y<ae?-1:1}},{key:"getIntersection",value:function(c){var u=this.bbox(),y=c.bbox(),P=B(u,y);if(P===null)return null;var E=this.leftSE.point,q=this.rightSE.point,J=c.leftSE.point,ae=c.rightSE.point,ve=S(u,J)&&this.comparePoint(J)===0,Te=S(y,E)&&c.comparePoint(E)===0,Ie=S(u,ae)&&this.comparePoint(ae)===0,be=S(y,q)&&c.comparePoint(q)===0;if(Te&&ve)return be&&!Ie?q:!be&&Ie?ae:null;if(Te)return Ie&&E.x===ae.x&&E.y===ae.y?null:E;if(ve)return be&&q.x===J.x&&q.y===J.y?null:J;if(be&&Ie)return null;if(be)return q;if(Ie)return ae;var je=Ge(E,this.vector(),J,c.vector());return je===null?null:S(P,je)?ce.round(je.x,je.y):null}},{key:"split",value:function(c){var u=[],y=c.events!==void 0,P=new we(c,!0),E=new we(c,!1),q=this.rightSE;this.replaceRightSE(E),u.push(E),u.push(P);var J=new C(P,q,this.rings.slice(),this.windings.slice());return we.comparePoints(J.leftSE.point,J.rightSE.point)>0&&J.swapEvents(),we.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),y&&(P.checkForConsuming(),E.checkForConsuming()),u}},{key:"swapEvents",value:function(){var c=this.rightSE;this.rightSE=this.leftSE,this.leftSE=c,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var u=0,y=this.windings.length;u<y;u++)this.windings[u]*=-1}},{key:"consume",value:function(c){for(var u=this,y=c;u.consumedBy;)u=u.consumedBy;for(;y.consumedBy;)y=y.consumedBy;var P=C.compare(u,y);if(P!==0){if(P>0){var E=u;u=y,y=E}if(u.prev===y){var q=u;u=y,y=q}for(var J=0,ae=y.rings.length;J<ae;J++){var ve=y.rings[J],Te=y.windings[J],Ie=u.rings.indexOf(ve);Ie===-1?(u.rings.push(ve),u.windings.push(Te)):u.windings[Ie]+=Te}y.rings=null,y.windings=null,y.consumedBy=u,y.leftSE.consumedBy=u.leftSE,y.rightSE.consumedBy=u.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var c=this.prev.consumedBy||this.prev;this._beforeState=c.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var c=this.beforeState();this._afterState={rings:c.rings.slice(0),windings:c.windings.slice(0),multiPolys:[]};for(var u=this._afterState.rings,y=this._afterState.windings,P=this._afterState.multiPolys,E=0,q=this.rings.length;E<q;E++){var J=this.rings[E],ae=this.windings[E],ve=u.indexOf(J);ve===-1?(u.push(J),y.push(ae)):y[ve]+=ae}for(var Te=[],Ie=[],be=0,je=u.length;be<je;be++)if(y[be]!==0){var Pe=u[be],Ze=Pe.poly;if(Ie.indexOf(Ze)===-1)if(Pe.isExterior)Te.push(Ze);else{Ie.indexOf(Ze)===-1&&Ie.push(Ze);var Ue=Te.indexOf(Pe.poly);Ue!==-1&&Te.splice(Ue,1)}}for(var We=0,it=Te.length;We<it;We++){var $e=Te[We].multiPoly;P.indexOf($e)===-1&&P.push($e)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var c=this.beforeState().multiPolys,u=this.afterState().multiPolys;switch(Xe.type){case"union":var y=c.length===0,P=u.length===0;this._isInResult=y!==P;break;case"intersection":var E,q;c.length<u.length?(E=c.length,q=u.length):(E=u.length,q=c.length),this._isInResult=q===Xe.numMultiPolys&&E<q;break;case"xor":var J=Math.abs(c.length-u.length);this._isInResult=J%2==1;break;case"difference":var ae=function(ve){return ve.length===1&&ve[0].isSubject};this._isInResult=ae(c)!==ae(u);break;default:throw new Error("Unrecognized operation type found ".concat(Xe.type))}return this._isInResult}}],[{key:"fromRing",value:function(c,u,y){var P,E,q,J=we.comparePoints(c,u);if(J<0)P=c,E=u,q=1;else{if(!(J>0))throw new Error("Tried to create degenerate segment at [".concat(c.x,", ").concat(c.y,"]"));P=u,E=c,q=-1}return new C(new we(P,!0),new we(E,!1),[y],[q])}}]),C}(),ft=function(){function C(c,u,y){if(g(this,C),!Array.isArray(c)||c.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=u,this.isExterior=y,this.segments=[],typeof c[0][0]!="number"||typeof c[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var P=ce.round(c[0][0],c[0][1]);this.bbox={ll:{x:P.x,y:P.y},ur:{x:P.x,y:P.y}};for(var E=P,q=1,J=c.length;q<J;q++){if(typeof c[q][0]!="number"||typeof c[q][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var ae=ce.round(c[q][0],c[q][1]);ae.x===E.x&&ae.y===E.y||(this.segments.push(xe.fromRing(E,ae,this)),ae.x<this.bbox.ll.x&&(this.bbox.ll.x=ae.x),ae.y<this.bbox.ll.y&&(this.bbox.ll.y=ae.y),ae.x>this.bbox.ur.x&&(this.bbox.ur.x=ae.x),ae.y>this.bbox.ur.y&&(this.bbox.ur.y=ae.y),E=ae)}P.x===E.x&&P.y===E.y||this.segments.push(xe.fromRing(E,P,this))}return m(C,[{key:"getSweepEvents",value:function(){for(var c=[],u=0,y=this.segments.length;u<y;u++){var P=this.segments[u];c.push(P.leftSE),c.push(P.rightSE)}return c}}]),C}(),Je=function(){function C(c,u){if(g(this,C),!Array.isArray(c))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ft(c[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var y=1,P=c.length;y<P;y++){var E=new ft(c[y],this,!1);E.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=E.bbox.ll.x),E.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=E.bbox.ll.y),E.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=E.bbox.ur.x),E.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=E.bbox.ur.y),this.interiorRings.push(E)}this.multiPoly=u}return m(C,[{key:"getSweepEvents",value:function(){for(var c=this.exteriorRing.getSweepEvents(),u=0,y=this.interiorRings.length;u<y;u++)for(var P=this.interiorRings[u].getSweepEvents(),E=0,q=P.length;E<q;E++)c.push(P[E]);return c}}]),C}(),zt=function(){function C(c,u){if(g(this,C),!Array.isArray(c))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof c[0][0][0]=="number"&&(c=[c])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var y=0,P=c.length;y<P;y++){var E=new Je(c[y],this);E.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=E.bbox.ll.x),E.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=E.bbox.ll.y),E.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=E.bbox.ur.x),E.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=E.bbox.ur.y),this.polys.push(E)}this.isSubject=u}return m(C,[{key:"getSweepEvents",value:function(){for(var c=[],u=0,y=this.polys.length;u<y;u++)for(var P=this.polys[u].getSweepEvents(),E=0,q=P.length;E<q;E++)c.push(P[E]);return c}}]),C}(),ct=function(){function C(c){g(this,C),this.events=c;for(var u=0,y=c.length;u<y;u++)c[u].segment.ringOut=this;this.poly=null}return m(C,null,[{key:"factory",value:function(c){for(var u=[],y=0,P=c.length;y<P;y++){var E=c[y];if(E.isInResult()&&!E.ringOut){for(var q=null,J=E.leftSE,ae=E.rightSE,ve=[J],Te=J.point,Ie=[];q=J,J=ae,ve.push(J),J.point!==Te;)for(;;){var be=J.getAvailableLinkedEvents();if(be.length===0){var je=ve[0].point,Pe=ve[ve.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(je.x,",")+" ".concat(je.y,"]. Last matching segment found ends at")+" [".concat(Pe.x,", ").concat(Pe.y,"]."))}if(be.length===1){ae=be[0].otherSE;break}for(var Ze=null,Ue=0,We=Ie.length;Ue<We;Ue++)if(Ie[Ue].point===J.point){Ze=Ue;break}if(Ze===null){Ie.push({index:ve.length,point:J.point});var it=J.getLeftmostComparator(q);ae=be.sort(it)[0].otherSE;break}var $e=Ie.splice(Ze)[0],He=ve.splice($e.index);He.unshift(He[0].otherSE),u.push(new C(He.reverse()))}u.push(new C(ve))}}return u}}]),m(C,[{key:"getGeom",value:function(){for(var c=this.events[0].point,u=[c],y=1,P=this.events.length-1;y<P;y++){var E=this.events[y].point,q=this.events[y+1].point;he(E,c,q)!==0&&(u.push(E),c=E)}if(u.length===1)return null;var J=u[0],ae=u[1];he(J,c,ae)===0&&u.shift(),u.push(u[0]);for(var ve=this.isExteriorRing()?1:-1,Te=this.isExteriorRing()?0:u.length-1,Ie=this.isExteriorRing()?u.length:-1,be=[],je=Te;je!=Ie;je+=ve)be.push([u[je].x,u[je].y]);return be}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var c=this.enclosingRing();this._isExteriorRing=!c||!c.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var c=this.events[0],u=1,y=this.events.length;u<y;u++){var P=this.events[u];we.compare(c,P)>0&&(c=P)}for(var E=c.segment.prevInResult(),q=E?E.prevInResult():null;;){if(!E)return null;if(!q)return E.ringOut;if(q.ringOut!==E.ringOut)return q.ringOut.enclosingRing()!==E.ringOut?E.ringOut:E.ringOut.enclosingRing();E=q.prevInResult(),q=E?E.prevInResult():null}}}]),C}(),At=function(){function C(c){g(this,C),this.exteriorRing=c,c.poly=this,this.interiorRings=[]}return m(C,[{key:"addInterior",value:function(c){this.interiorRings.push(c),c.poly=this}},{key:"getGeom",value:function(){var c=[this.exteriorRing.getGeom()];if(c[0]===null)return null;for(var u=0,y=this.interiorRings.length;u<y;u++){var P=this.interiorRings[u].getGeom();P!==null&&c.push(P)}return c}}]),C}(),wt=function(){function C(c){g(this,C),this.rings=c,this.polys=this._composePolys(c)}return m(C,[{key:"getGeom",value:function(){for(var c=[],u=0,y=this.polys.length;u<y;u++){var P=this.polys[u].getGeom();P!==null&&c.push(P)}return c}},{key:"_composePolys",value:function(c){for(var u=[],y=0,P=c.length;y<P;y++){var E=c[y];if(!E.poly)if(E.isExteriorRing())u.push(new At(E));else{var q=E.enclosingRing();q.poly||u.push(new At(q)),q.poly.addInterior(E)}}return u}}]),C}(),jt=function(){function C(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xe.compare;g(this,C),this.queue=c,this.tree=new Y(u),this.segments=[]}return m(C,[{key:"process",value:function(c){var u=c.segment,y=[];if(c.consumedBy)return c.isLeft?this.queue.remove(c.otherSE):this.tree.remove(u),y;var P=c.isLeft?this.tree.insert(u):this.tree.find(u);if(!P)throw new Error("Unable to find segment #".concat(u.id," ")+"[".concat(u.leftSE.point.x,", ").concat(u.leftSE.point.y,"] -> ")+"[".concat(u.rightSE.point.x,", ").concat(u.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var E=P,q=P,J=void 0,ae=void 0;J===void 0;)(E=this.tree.prev(E))===null?J=null:E.key.consumedBy===void 0&&(J=E.key);for(;ae===void 0;)(q=this.tree.next(q))===null?ae=null:q.key.consumedBy===void 0&&(ae=q.key);if(c.isLeft){var ve=null;if(J){var Te=J.getIntersection(u);if(Te!==null&&(u.isAnEndpoint(Te)||(ve=Te),!J.isAnEndpoint(Te)))for(var Ie=this._splitSafely(J,Te),be=0,je=Ie.length;be<je;be++)y.push(Ie[be])}var Pe=null;if(ae){var Ze=ae.getIntersection(u);if(Ze!==null&&(u.isAnEndpoint(Ze)||(Pe=Ze),!ae.isAnEndpoint(Ze)))for(var Ue=this._splitSafely(ae,Ze),We=0,it=Ue.length;We<it;We++)y.push(Ue[We])}if(ve!==null||Pe!==null){var $e=null;$e=ve===null?Pe:Pe===null||we.comparePoints(ve,Pe)<=0?ve:Pe,this.queue.remove(u.rightSE),y.push(u.rightSE);for(var He=u.split($e),mt=0,et=He.length;mt<et;mt++)y.push(He[mt])}y.length>0?(this.tree.remove(u),y.push(c)):(this.segments.push(u),u.prev=J)}else{if(J&&ae){var Fe=J.getIntersection(ae);if(Fe!==null){if(!J.isAnEndpoint(Fe))for(var rt=this._splitSafely(J,Fe),bt=0,_t=rt.length;bt<_t;bt++)y.push(rt[bt]);if(!ae.isAnEndpoint(Fe))for(var ht=this._splitSafely(ae,Fe),ut=0,kt=ht.length;ut<kt;ut++)y.push(ht[ut])}}this.tree.remove(u)}return y}},{key:"_splitSafely",value:function(c,u){this.tree.remove(c);var y=c.rightSE;this.queue.remove(y);var P=c.split(u);return P.push(y),c.consumedBy===void 0&&this.tree.insert(c),P}}]),C}(),Wt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,sn=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Xe=new(function(){function C(){g(this,C)}return m(C,[{key:"run",value:function(c,u,y){Xe.type=c,ce.reset();for(var P=[new zt(u,!0)],E=0,q=y.length;E<q;E++)P.push(new zt(y[E],!1));if(Xe.numMultiPolys=P.length,Xe.type==="difference")for(var J=P[0],ae=1;ae<P.length;)B(P[ae].bbox,J.bbox)!==null?ae++:P.splice(ae,1);if(Xe.type==="intersection"){for(var ve=0,Te=P.length;ve<Te;ve++)for(var Ie=P[ve],be=ve+1,je=P.length;be<je;be++)if(B(Ie.bbox,P[be].bbox)===null)return[]}for(var Pe=new Y(we.compare),Ze=0,Ue=P.length;Ze<Ue;Ze++)for(var We=P[Ze].getSweepEvents(),it=0,$e=We.length;it<$e;it++)if(Pe.insert(We[it]),Pe.size>Wt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var He=new jt(Pe),mt=Pe.size,et=Pe.pop();et;){var Fe=et.key;if(Pe.size===mt){var rt=Fe.segment;throw new Error("Unable to pop() ".concat(Fe.isLeft?"left":"right"," SweepEvent ")+"[".concat(Fe.point.x,", ").concat(Fe.point.y,"] from segment #").concat(rt.id," ")+"[".concat(rt.leftSE.point.x,", ").concat(rt.leftSE.point.y,"] -> ")+"[".concat(rt.rightSE.point.x,", ").concat(rt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Pe.size>Wt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(He.segments.length>sn)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var bt=He.process(Fe),_t=0,ht=bt.length;_t<ht;_t++){var ut=bt[_t];ut.consumedBy===void 0&&Pe.insert(ut)}mt=Pe.size,et=Pe.pop()}ce.reset();var kt=ct.factory(He.segments);return new wt(kt).getGeom()}}]),C}()),qt=function(C){for(var c=arguments.length,u=new Array(c>1?c-1:0),y=1;y<c;y++)u[y-1]=arguments[y];return Xe.run("union",C,u)},xt=function(C){for(var c=arguments.length,u=new Array(c>1?c-1:0),y=1;y<c;y++)u[y-1]=arguments[y];return Xe.run("intersection",C,u)},Kt=function(C){for(var c=arguments.length,u=new Array(c>1?c-1:0),y=1;y<c;y++)u[y-1]=arguments[y];return Xe.run("xor",C,u)},fn=function(C){for(var c=arguments.length,u=new Array(c>1?c-1:0),y=1;y<c;y++)u[y-1]=arguments[y];return Xe.run("difference",C,u)};return{union:qt,intersection:xt,xor:Kt,difference:fn}}()},2582:function(d){d.exports=function(){"use strict";function g(w,S,B,$,se){(function ne(oe,ge,ce,de,Le){for(;de>ce;){if(de-ce>600){var he=de-ce+1,fe=ge-ce+1,Oe=Math.log(he),ie=.5*Math.exp(2*Oe/3),me=.5*Math.sqrt(Oe*ie*(he-ie)/he)*(fe-he/2<0?-1:1);ne(oe,ge,Math.max(ce,Math.floor(ge-fe*ie/he+me)),Math.min(de,Math.floor(ge+(he-fe)*ie/he+me)),Le)}var Ne=oe[ge],Ge=ce,we=de;for(h(oe,ce,ge),Le(oe[de],Ne)>0&&h(oe,ce,de);Ge<we;){for(h(oe,Ge,we),Ge++,we--;Le(oe[Ge],Ne)<0;)Ge++;for(;Le(oe[we],Ne)>0;)we--}Le(oe[ce],Ne)===0?h(oe,ce,we):h(oe,++we,de),we<=ge&&(ce=we+1),ge<=we&&(de=we-1)}})(w,S,B||0,$||w.length-1,se||m)}function h(w,S,B){var $=w[S];w[S]=w[B],w[B]=$}function m(w,S){return w<S?-1:w>S?1:0}var _=function(w){w===void 0&&(w=9),this._maxEntries=Math.max(4,w),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function T(w,S,B){if(!B)return S.indexOf(w);for(var $=0;$<S.length;$++)if(B(w,S[$]))return $;return-1}function v(w,S){N(w,0,w.children.length,S,w)}function N(w,S,B,$,se){se||(se=j(null)),se.minX=1/0,se.minY=1/0,se.maxX=-1/0,se.maxY=-1/0;for(var ne=S;ne<B;ne++){var oe=w.children[ne];H(se,w.leaf?$(oe):oe)}return se}function H(w,S){return w.minX=Math.min(w.minX,S.minX),w.minY=Math.min(w.minY,S.minY),w.maxX=Math.max(w.maxX,S.maxX),w.maxY=Math.max(w.maxY,S.maxY),w}function K(w,S){return w.minX-S.minX}function X(w,S){return w.minY-S.minY}function Y(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function A(w){return w.maxX-w.minX+(w.maxY-w.minY)}function Q(w,S){return w.minX<=S.minX&&w.minY<=S.minY&&S.maxX<=w.maxX&&S.maxY<=w.maxY}function z(w,S){return S.minX<=w.maxX&&S.minY<=w.maxY&&S.maxX>=w.minX&&S.maxY>=w.minY}function j(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function G(w,S,B,$,se){for(var ne=[S,B];ne.length;)if(!((B=ne.pop())-(S=ne.pop())<=$)){var oe=S+Math.ceil((B-S)/$/2)*$;g(w,oe,S,B,se),ne.push(S,oe,oe,B)}}return _.prototype.all=function(){return this._all(this.data,[])},_.prototype.search=function(w){var S=this.data,B=[];if(!z(w,S))return B;for(var $=this.toBBox,se=[];S;){for(var ne=0;ne<S.children.length;ne++){var oe=S.children[ne],ge=S.leaf?$(oe):oe;z(w,ge)&&(S.leaf?B.push(oe):Q(w,ge)?this._all(oe,B):se.push(oe))}S=se.pop()}return B},_.prototype.collides=function(w){var S=this.data;if(!z(w,S))return!1;for(var B=[];S;){for(var $=0;$<S.children.length;$++){var se=S.children[$],ne=S.leaf?this.toBBox(se):se;if(z(w,ne)){if(S.leaf||Q(w,ne))return!0;B.push(se)}}S=B.pop()}return!1},_.prototype.load=function(w){if(!w||!w.length)return this;if(w.length<this._minEntries){for(var S=0;S<w.length;S++)this.insert(w[S]);return this}var B=this._build(w.slice(),0,w.length-1,0);if(this.data.children.length)if(this.data.height===B.height)this._splitRoot(this.data,B);else{if(this.data.height<B.height){var $=this.data;this.data=B,B=$}this._insert(B,this.data.height-B.height-1,!0)}else this.data=B;return this},_.prototype.insert=function(w){return w&&this._insert(w,this.data.height-1),this},_.prototype.clear=function(){return this.data=j([]),this},_.prototype.remove=function(w,S){if(!w)return this;for(var B,$,se,ne=this.data,oe=this.toBBox(w),ge=[],ce=[];ne||ge.length;){if(ne||(ne=ge.pop(),$=ge[ge.length-1],B=ce.pop(),se=!0),ne.leaf){var de=T(w,ne.children,S);if(de!==-1)return ne.children.splice(de,1),ge.push(ne),this._condense(ge),this}se||ne.leaf||!Q(ne,oe)?$?(B++,ne=$.children[B],se=!1):ne=null:(ge.push(ne),ce.push(B),B=0,$=ne,ne=ne.children[0])}return this},_.prototype.toBBox=function(w){return w},_.prototype.compareMinX=function(w,S){return w.minX-S.minX},_.prototype.compareMinY=function(w,S){return w.minY-S.minY},_.prototype.toJSON=function(){return this.data},_.prototype.fromJSON=function(w){return this.data=w,this},_.prototype._all=function(w,S){for(var B=[];w;)w.leaf?S.push.apply(S,w.children):B.push.apply(B,w.children),w=B.pop();return S},_.prototype._build=function(w,S,B,$){var se,ne=B-S+1,oe=this._maxEntries;if(ne<=oe)return v(se=j(w.slice(S,B+1)),this.toBBox),se;$||($=Math.ceil(Math.log(ne)/Math.log(oe)),oe=Math.ceil(ne/Math.pow(oe,$-1))),(se=j([])).leaf=!1,se.height=$;var ge=Math.ceil(ne/oe),ce=ge*Math.ceil(Math.sqrt(oe));G(w,S,B,ce,this.compareMinX);for(var de=S;de<=B;de+=ce){var Le=Math.min(de+ce-1,B);G(w,de,Le,ge,this.compareMinY);for(var he=de;he<=Le;he+=ge){var fe=Math.min(he+ge-1,Le);se.children.push(this._build(w,he,fe,$-1))}}return v(se,this.toBBox),se},_.prototype._chooseSubtree=function(w,S,B,$){for(;$.push(S),!S.leaf&&$.length-1!==B;){for(var se=1/0,ne=1/0,oe=void 0,ge=0;ge<S.children.length;ge++){var ce=S.children[ge],de=Y(ce),Le=(he=w,fe=ce,(Math.max(fe.maxX,he.maxX)-Math.min(fe.minX,he.minX))*(Math.max(fe.maxY,he.maxY)-Math.min(fe.minY,he.minY))-de);Le<ne?(ne=Le,se=de<se?de:se,oe=ce):Le===ne&&de<se&&(se=de,oe=ce)}S=oe||S.children[0]}var he,fe;return S},_.prototype._insert=function(w,S,B){var $=B?w:this.toBBox(w),se=[],ne=this._chooseSubtree($,this.data,S,se);for(ne.children.push(w),H(ne,$);S>=0&&se[S].children.length>this._maxEntries;)this._split(se,S),S--;this._adjustParentBBoxes($,se,S)},_.prototype._split=function(w,S){var B=w[S],$=B.children.length,se=this._minEntries;this._chooseSplitAxis(B,se,$);var ne=this._chooseSplitIndex(B,se,$),oe=j(B.children.splice(ne,B.children.length-ne));oe.height=B.height,oe.leaf=B.leaf,v(B,this.toBBox),v(oe,this.toBBox),S?w[S-1].children.push(oe):this._splitRoot(B,oe)},_.prototype._splitRoot=function(w,S){this.data=j([w,S]),this.data.height=w.height+1,this.data.leaf=!1,v(this.data,this.toBBox)},_.prototype._chooseSplitIndex=function(w,S,B){for(var $,se,ne,oe,ge,ce,de,Le=1/0,he=1/0,fe=S;fe<=B-S;fe++){var Oe=N(w,0,fe,this.toBBox),ie=N(w,fe,B,this.toBBox),me=(se=Oe,ne=ie,oe=void 0,ge=void 0,ce=void 0,de=void 0,oe=Math.max(se.minX,ne.minX),ge=Math.max(se.minY,ne.minY),ce=Math.min(se.maxX,ne.maxX),de=Math.min(se.maxY,ne.maxY),Math.max(0,ce-oe)*Math.max(0,de-ge)),Ne=Y(Oe)+Y(ie);me<Le?(Le=me,$=fe,he=Ne<he?Ne:he):me===Le&&Ne<he&&(he=Ne,$=fe)}return $||B-S},_.prototype._chooseSplitAxis=function(w,S,B){var $=w.leaf?this.compareMinX:K,se=w.leaf?this.compareMinY:X;this._allDistMargin(w,S,B,$)<this._allDistMargin(w,S,B,se)&&w.children.sort($)},_.prototype._allDistMargin=function(w,S,B,$){w.children.sort($);for(var se=this.toBBox,ne=N(w,0,S,se),oe=N(w,B-S,B,se),ge=A(ne)+A(oe),ce=S;ce<B-S;ce++){var de=w.children[ce];H(ne,w.leaf?se(de):de),ge+=A(ne)}for(var Le=B-S-1;Le>=S;Le--){var he=w.children[Le];H(oe,w.leaf?se(he):he),ge+=A(oe)}return ge},_.prototype._adjustParentBBoxes=function(w,S,B){for(var $=B;$>=0;$--)H(S[$],w)},_.prototype._condense=function(w){for(var S=w.length-1,B=void 0;S>=0;S--)w[S].children.length===0?S>0?(B=w[S-1].children).splice(B.indexOf(w[S]),1):this.clear():v(w[S],this.toBBox)},_}()}},re={};function U(d){var g=re[d];if(g!==void 0)return g.exports;var h=re[d]={id:d,loaded:!1,exports:{}};return Z[d].call(h.exports,h,h.exports,U),h.loaded=!0,h.exports}U.n=d=>{var g=d&&d.__esModule?()=>d.default:()=>d;return U.d(g,{a:g}),g},U.d=(d,g)=>{for(var h in g)U.o(g,h)&&!U.o(d,h)&&Object.defineProperty(d,h,{enumerable:!0,get:g[h]})},U.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),U.o=(d,g)=>Object.prototype.hasOwnProperty.call(d,g),U.nmd=d=>(d.paths=[],d.children||(d.children=[]),d),(()=>{"use strict";U(7107);var d=U(2492),g=U.n(d);let h=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),m=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"L\xE4nge","segmentLength":"Segment L\xE4nge","area":"Fl\xE4che","radius":"Radius","perimeter":"Umfang","height":"H\xF6he","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),_=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),T=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),v=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),N=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),H=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xEDrculo","finishCircle":"Presiona para finalizar el c\xEDrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xEDrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar C\xEDrculo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xEDrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),K=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),X=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),Y=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),A=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),Q={en:h,de:m,it:_,id:T,ro:v,ru:N,es:H,nl:K,fr:X,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:Y,zh_tw:A,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby umie\u015Bci\u0107 znacznik","firstVertex":"Kliknij, aby umie\u015Bci\u0107 pierwszy wierzcho\u0142ek","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny istniej\u0105cy znacznik, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy znacznik, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby umie\u015Bci\u0107 \u015Brodek okr\u0119gu","finishCircle":"Kliknij, aby zako\u0144czy\u0107 okr\u0105g","placeCircleMarker":"Kliknij, aby umie\u015Bci\u0107 znacznik okr\u0119gu","placeText":"Kliknij, aby umie\u015Bci\u0107 tekst"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni wierzcho\u0142ek"},"buttonTitles":{"drawMarkerButton":"Rysuj znacznik","drawPolyButton":"Rysuj wielok\u0105t","drawLineButton":"Rysuj lini\u0119","drawCircleButton":"Rysuj okr\u0105g","drawRectButton":"Rysuj prostok\u0105t","editButton":"Edytuj warstwy","dragButton":"Przeci\u0105gnij warstwy","cutButton":"Wytnij warstwy","deleteButton":"Usu\u0144 warstwy","drawCircleMarkerButton":"Rysuj znacznik okr\u0105g\u0142y","snappingButton":"Przyci\u0105gnij przenoszony znacznik do innych warstw i wierzcho\u0142k\xF3w","pinningButton":"Przypnij wsp\xF3lne wierzcho\u0142ki razem","rotateButton":"Obr\xF3\u0107 warstwy","drawTextButton":"Rysuj tekst","scaleButton":"Skaluj warstwy","autoTracingButton":"Automatyczne \u015Bledzenie linii"},"measurements":{"totalLength":"D\u0142ugo\u015B\u0107","segmentLength":"D\u0142ugo\u015B\u0107 odcinka","area":"Obszar","radius":"Promie\u0144","perimeter":"Obw\xF3d","height":"Wysoko\u015B\u0107","width":"Szeroko\u015B\u0107","coordinates":"Pozycja","coordinatesMarker":"Znacznik pozycji"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel","placeText":"Klikk for \xE5 plassere tekst"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn punkt","drawPolyButton":"Tegn flate","drawLineButton":"Tegn linje","drawCircleButton":"Tegn sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger objekter","dragButton":"Dra objekter","cutButton":"Kutt objekter","deleteButton":"Fjern objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkter sammen","rotateButton":"Rot\xE9r objekter","drawTextButton":"Tegn tekst","scaleButton":"Skal\xE9r objekter","autoTracingButton":"Automatisk sporing av linje"},"measurements":{"totalLength":"Lengde","segmentLength":"Segmentlengde","area":"Omr\xE5de","radius":"Radius","perimeter":"Omriss","height":"H\xF8yde","width":"Bredde","coordinates":"Posisjon","coordinatesMarker":"Posisjonsmark\xF8r"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","placeText":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062A\u0646","scaleButton":"\u0645\u0642\u06CC\u0627\u0633\u200C\u06AF\u0630\u0627\u0631\u06CC","autoTracingButton":"\u0631\u062F\u06CC\u0627\u0628 \u062E\u0648\u062F\u06A9\u0627\u0631"},"measurements":{"totalLength":"\u0637\u0648\u0644","segmentLength":"\u0637\u0648\u0644 \u0628\u062E\u0634","area":"\u0646\u0627\u062D\u06CC\u0647","radius":"\u0634\u0639\u0627\u0639","perimeter":"\u0645\u062D\u06CC\u0637","height":"\u0627\u0631\u062A\u0641\u0627\u0639","width":"\u0639\u0631\u0636","coordinates":"\u0645\u0648\u0642\u0639\u06CC\u062A","coordinatesMarker":"\u0645\u0648\u0642\u0639\u06CC\u062A \u0646\u0634\u0627\u0646"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","firstVertex":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E","continueLine":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B","finishLine":"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishPoly":"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishRect":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","startCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E","finishCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86","placeCircleMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","placeText":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},"actions":{"finish":"\u7D42\u4E86","cancel":"\u30AD\u30E3\u30F3\u30BB\u30EB","removeLastVertex":"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},"buttonTitles":{"drawMarkerButton":"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","drawPolyButton":"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B","drawLineButton":"\u6298\u308C\u7DDA\u3092\u63CF\u753B","drawCircleButton":"\u5186\u3092\u63CF\u753B","drawRectButton":"\u77E9\u5F62\u3092\u63CF\u753B","editButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6","dragButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0","cutButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A","deleteButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664","drawCircleMarkerButton":"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","snappingButton":"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B","pinningButton":"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059","rotateButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2","drawTextButton":"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimm\xE4isen osuuden","continueLine":"Klikkaa jatkaaksesi piirt\xE4mist\xE4","finishLine":"Klikkaa olemassa olevaa merkki\xE4 lopettaaksesi","finishPoly":"Klikkaa ensimm\xE4ist\xE4 merkki\xE4 lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyr\xE4n keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyr\xE4n","placeCircleMarker":"Klikkaa asettaaksesi ympyr\xE4merkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr\xE4 merkkej\xE4","drawPolyButton":"Piirr\xE4 monikulmioita","drawLineButton":"Piirr\xE4 viivoja","drawCircleButton":"Piirr\xE4 ympyr\xE4","drawRectButton":"Piirr\xE4 neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr\xE4","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr\xE4 ympyr\xE4merkki","snappingButton":"Kiinnit\xE4 siirrett\xE4v\xE4 merkki toisiin muotoihin","pinningButton":"Kiinnit\xE4 jaetut muodot yhteen","rotateButton":"K\xE4\xE4nn\xE4","drawTextButton":"Piirr\xE4 teksti\xE4"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"\uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","firstVertex":"\uCCAB\uBC88\uC9F8 \uAF2D\uC9C0\uC810 \uC704\uCE58\uC744 \uD074\uB9AD\uD558\uC138\uC694","continueLine":"\uACC4\uC18D \uADF8\uB9AC\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","finishLine":"\uB05D\uB0B4\uB824\uBA74 \uAE30\uC874 \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishPoly":"\uB05D\uB0B4\uB824\uBA74 \uCC98\uC74C \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishRect":"\uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","startCircle":"\uC6D0\uC758 \uC911\uC2EC\uC774 \uB420 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishCircle":"\uC6D0\uC744 \uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","placeCircleMarker":"\uC6D0 \uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","placeText":"\uD14D\uC2A4\uD2B8 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694"},"actions":{"finish":"\uB05D\uB0B4\uAE30","cancel":"\uCDE8\uC18C","removeLastVertex":"\uB9C8\uC9C0\uB9C9 \uAF2D\uC9C0\uC810 \uC81C\uAC70"},"buttonTitles":{"drawMarkerButton":"\uB9C8\uCEE4 \uADF8\uB9AC\uAE30","drawPolyButton":"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30","drawLineButton":"\uB2E4\uAC01\uC120 \uADF8\uB9AC\uAE30","drawCircleButton":"\uC6D0 \uADF8\uB9AC\uAE30","drawRectButton":"\uC9C1\uC0AC\uAC01\uD615 \uADF8\uB9AC\uAE30","editButton":"\uB808\uC774\uC5B4 \uD3B8\uC9D1\uD558\uAE30","dragButton":"\uB808\uC774\uC5B4 \uB04C\uAE30","cutButton":"\uB808\uC774\uC5B4 \uC790\uB974\uAE30","deleteButton":"\uB808\uC774\uC5B4 \uC81C\uAC70\uD558\uAE30","drawCircleMarkerButton":"\uC6D0 \uB9C8\uCEE4 \uADF8\uB9AC\uAE30","snappingButton":"\uC7A1\uC544\uB048 \uB9C8\uCEE4\uB97C \uB2E4\uB978 \uB808\uC774\uC5B4 \uBC0F \uAF2D\uC9C0\uC810\uC5D0 \uB4E4\uB7EC\uBD99\uAC8C \uD558\uAE30","pinningButton":"\uACF5\uC720 \uAF2D\uC9C0\uC810\uC744 \uD568\uAED8 \uCC0D\uAE30","rotateButton":"\uB808\uC774\uC5B4 \uD68C\uC804\uD558\uAE30","drawTextButton":"\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30"}}')};function z(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,s)}return o}function j(t){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?z(Object(o),!0).forEach(function(s){G(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):z(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function G(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}let w={_globalEditModeEnabled:!1,enableGlobalEditMode:function(t){var i=this,o=j({},t);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(s){i._isRelevantForEdit(s)&&s.pm.enable(o)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var t=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(var i in t){var o=t[i];this._isRelevantForEdit(o)&&o.pm.enable(j({},this.globalOptions))}},_layerAddedEdit:function(t){var i=t.layer;this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowEditing}},S={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var t=this,i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(function(o){t._isRelevantForDrag(o)&&o.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,t.forEach(function(i){i.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var t=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(var i in t){var o=t[i];this._isRelevantForDrag(o)&&o.pm.enableLayerDrag()}},_layerAddedDrag:function(t){var i=t.layer;this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.draggable}},B={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(i){t._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",t.removeLayer,t))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(i){i.off("click",t.removeLayer,t)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer:function(t){var i=t.target;this._isRelevantForRemoval(i)&&!i.pm.dragging()&&(i.removeFrom(this.map.pm._getContainingLayer()),i.remove(),i instanceof L.LayerGroup?(this._fireRemoveLayerGroup(i),this._fireRemoveLayerGroup(this.map,i)):(i.pm._fireRemove(i),i.pm._fireRemove(this.map,i)))},_isRelevantForRemoval:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode:function(){var t=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(var i in t){var o=t[i];this._isRelevantForRemoval(o)&&(o.pm.enabled()&&o.pm.disable(),o.on("click",this.removeLayer,this))}},_layerAddedRemoval:function(t){var i=t.layer;this._addedLayersRemoval[L.stamp(i)]=i}},$={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var t=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(i){return i instanceof L.Polyline}).forEach(function(i){t._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(t){return t instanceof L.Polyline}).forEach(function(t){t.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate:function(t){return t.pm&&t instanceof L.Polyline&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode:function(){var t=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(var i in t){var o=t[i];this._isRelevantForRemoval(o)&&o.pm.enableRotate()}},_layerAddedRotate:function(t){var i=t.layer;this._addedLayersRotate[L.stamp(i)]=i}};function se(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,s)}return o}function ne(t){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?se(Object(o),!0).forEach(function(s){oe(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):se(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function oe(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var ge={_fireDrawStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},t,i)},_fireDrawEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},t,i)},_fireCreate:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:t,layer:t},i,o)},_fireCenterPlaced:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t==="Draw"?this._layer:void 0,s=t!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:o,layer:s,latlng:this._layer.getLatLng()},t,i)},_fireCut:function(t,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:cut",{shape:this._shape,layer:i,originalLayer:o},s,l)},_fireEdit:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:edit",{layer:this._layer,shape:this.getShape()},i,o)},_fireEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},t,i)},_fireDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},t,i)},_fireUpdate:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},t,i)},_fireMarkerDragStart:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:i},o,s)},_fireMarkerDrag:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:i},o,s)},_fireMarkerDragEnd:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:i,intersectionReset:o},s,l)},_fireDragStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},t,i)},_fireDrag:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",ne(ne({},t),{},{shape:this.getShape()}),i,o)},_fireDragEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},t,i)},_fireDragEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},t,i)},_fireDragDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},t,i)},_fireRemove:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:i,shape:this.getShape()},o,s)},_fireVertexAdded:function(t,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:t,indexPath:i,latlng:o,shape:this.getShape()},s,l)},_fireVertexRemoved:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:t,indexPath:i,shape:this.getShape()},o,s)},_fireVertexClick:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:i,shape:this.getShape()},o,s)},_fireIntersect:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._layer,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(i,"pm:intersect",{layer:this._layer,intersection:t,shape:this.getShape()},o,s)},_fireLayerReset:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:t,indexPath:i,shape:this.getShape()},o,s)},_fireChange:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:t,shape:this.getShape()},i,o)},_fireTextChange:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:t,shape:this.getShape()},i,o)},_fireTextFocus:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},t,i)},_fireTextBlur:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},t,i)},_fireSnapDrag:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snapdrag",i,o,s)},_fireSnap:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snap",i,o,s)},_fireUnsnap:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:unsnap",i,o,s)},_fireRotationEnable:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},o,s)},_fireRotationDisable:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},i,o)},_fireRotationStart:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:i},o,s)},_fireRotation:function(t,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(t,"pm:rotate",{layer:s,helpLayer:this._layer,startAngle:this._startAngle,angle:s.pm.getAngle(),angleDiff:i,oldLatLngs:o,newLatLngs:s.getLatLngs()},l,b)},_fireRotationEnd:function(t,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:i,angle:this._rotationLayer.pm.getAngle(),originLatLngs:o,newLatLngs:this._rotationLayer.getLatLngs()},s,l)},_fireActionClick:function(t,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:t.text,action:t,btnName:i,button:o},s,l)},_fireButtonClick:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:t,button:i},o,s)},_fireLangChange:function(t,i,o,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:t,activeLang:i,fallback:o,translations:s},l,b)},_fireGlobalDragModeToggled:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map},i,o)},_fireGlobalEditModeToggled:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map},i,o)},_fireGlobalRemovalModeToggled:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map},i,o)},_fireGlobalCutModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},t,i)},_fireGlobalDrawModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},t,i)},_fireGlobalRotateModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},t,i)},_fireRemoveLayerGroup:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:i,shape:void 0},o,s)},_fireKeyeventEvent:function(t,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:t,eventType:i,focusOn:o},s,l)},__fire:function(t,i,o,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};o=g()(o,l,{source:s}),L.PM.Utils._fireEvent(t,i,o)}};let ce=ge,de={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(t){this.map=t,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(t){var i="document";this.map.getContainer().contains(t.target)&&(i="map");var o={event:t,eventType:t.type,focusOn:i};this._lastEvents[t.type]=o,this._lastEvents.current=o,this.map.pm._fireKeyeventEvent(t,t.type,i)},_onBlur:function(t){t.altKey=!1;var i={event:t,eventType:t.type,focusOn:"document"};this._lastEvents[t.type]=i,this._lastEvents.current=i},getLastKeyEvent:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[t]},isShiftKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.shiftKey},isAltKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.altKey},isCtrlKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.ctrlKey},isMetaKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.metaKey},getPressedKey:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.key}};var Le=U(7361),he=U.n(Le),fe=U(8721),Oe=U.n(fe);function ie(t){var i=L.PM.activeLang;return Oe()(Q,i)||(i="en"),he()(Q[i],t)}function me(t){for(var i=0;i<t.length;i+=1){var o=t[i];if(Array.isArray(o)){if(me(o))return!0}else if(o!=null&&o!=="")return!0}return!1}function Ne(t){return t.reduce(function(i,o){if(o.length!==0){var s=Array.isArray(o)?Ne(o):o;Array.isArray(s)?s.length!==0&&i.push(s):i.push(s)}return i},[])}function Ge(t,i,o){for(var s,l,b,M={a:L.CRS.Earth.R,b:63567523142e-4,f:1/298.257223563},k=M.a,x=M.b,D=M.f,O=t.lng,W=t.lat,F=o,te=Math.PI,le=i*te/180,Me=Math.sin(le),Ce=Math.cos(le),Ae=(1-D)*Math.tan(W*te/180),ze=1/Math.sqrt(1+Ae*Ae),Ye=Ae*ze,at=Math.atan2(Ae,Ce),_e=ze*Me,Bn=1-_e*_e,qe=Bn*(k*k-x*x)/(x*x),Qt=1+qe/16384*(4096+qe*(qe*(320-175*qe)-768)),gn=qe/1024*(256+qe*(qe*(74-47*qe)-128)),Tt=F/(x*Qt),mn=2*Math.PI;Math.abs(Tt-mn)>1e-12;)s=Math.cos(2*at+Tt),mn=Tt,Tt=F/(x*Qt)+gn*(l=Math.sin(Tt))*(s+gn/4*((b=Math.cos(Tt))*(2*s*s-1)-gn/6*s*(4*l*l-3)*(4*s*s-3)));var ii=Ye*l-ze*b*Ce,ri=Math.atan2(Ye*b+ze*l*Ce,(1-D)*Math.sqrt(_e*_e+ii*ii)),Rn=D/16*Bn*(4+D*(4-3*Bn)),ki=O+180*(Math.atan2(l*Me,ze*b-Ye*l*Ce)-(1-Rn)*D*_e*(Tt+Rn*l*(s+Rn*b*(2*s*s-1))))/te,Zn=180*ri/te;return L.latLng(ki,Zn)}function we(t,i,o,s){for(var l,b,M=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],k=[],x=0;x<o;x+=1){if(M)l=Ge(t,360*x/o+s,i),b=L.latLng(l.lng,l.lat);else{var D=t.lat+Math.cos(2*x*Math.PI/o)*i,O=t.lng+Math.sin(2*x*Math.PI/o)*i;b=L.latLng(D,O)}k.push(b)}return k}function Se(t,i,o){var s=t.latLngToContainerPoint(i),l=t.latLngToContainerPoint(o),b=180*Math.atan2(l.y-s.y,l.x-s.x)/Math.PI+90;return b+=b<0?360:0}function xe(t,i,o,s){return function(l,b,M){b=(b+360)%360;var k=Math.PI/180,x=180/Math.PI,D=L.CRS.Earth.R,O=l.lng*k,W=l.lat*k,F=b*k,te=Math.sin(W),le=Math.cos(W),Me=Math.cos(M/D),Ce=Math.sin(M/D),Ae=Math.asin(te*Me+le*Ce*Math.cos(F)),ze=O+Math.atan2(Math.sin(F)*Ce*le,Me-te*Math.sin(Ae));return ze=(ze*=x)>180?ze-360:ze<-180?ze+360:ze,L.latLng([Ae*x,ze])}(i,Se(t,i,o),s)}function ft(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!i||Object.keys(i).length===0)return function(x,D){return x-D};for(var s,l=Object.keys(i),b=l.length-1,M={};b>=0;)s=l[b],M[s.toLowerCase()]=i[s],b-=1;function k(x){return x instanceof L.Marker?"Marker":x instanceof L.Circle?"Circle":x instanceof L.CircleMarker?"CircleMarker":x instanceof L.Rectangle?"Rectangle":x instanceof L.Polygon?"Polygon":x instanceof L.Polyline?"Line":void 0}return function(x,D){var O,W;if(t==="instanceofShape"){if(O=k(x.layer).toLowerCase(),W=k(D.layer).toLowerCase(),!O||!W)return 0}else{if(!x.hasOwnProperty(t)||!D.hasOwnProperty(t))return 0;O=x[t].toLowerCase(),W=D[t].toLowerCase()}var F=O in M?M[O]:Number.MAX_SAFE_INTEGER,te=W in M?M[W]:Number.MAX_SAFE_INTEGER,le=0;return F<te?le=-1:F>te&&(le=1),o==="desc"?-1*le:le}}function Je(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLatLngs();return t instanceof L.Polygon?L.polygon(i).getLatLngs():L.polyline(i).getLatLngs()}function zt(t,i){var o,s;if((o=i.options.crs)!==null&&o!==void 0&&(s=o.projection)!==null&&s!==void 0&&s.MAX_LATITUDE){var l,b,M=(l=i.options.crs)===null||l===void 0||(b=l.projection)===null||b===void 0?void 0:b.MAX_LATITUDE;t.lat=Math.max(Math.min(M,t.lat),-M)}return t}function ct(t){return t.options.renderer||t._map&&(t._map._getPaneRenderer(t.options.pane)||t._map.options.renderer||t._map._renderer)||t._renderer}let At=L.Class.extend({includes:[w,S,B,$,ce],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this.Keyboard=de,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(t)},setLang:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",s=L.PM.activeLang;i&&(Q[t]=g()(Q[o],i)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this._fireLangChange(s,t,o,Q[t])},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",i=arguments.length>1?arguments[1]:void 0;t==="Poly"&&(t="Polygon"),this.Draw.enable(t,i)},disableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";t==="Poly"&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(t){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.ignoreShapes||[],l=o.merge||!1;this.map.pm.Draw.shapes.forEach(function(b){s.indexOf(b)===-1&&i.map.pm.Draw[b].setPathOptions(t,l)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var i=this,o=g()(this.globalOptions,t);o.editable&&(o.resizeableCircleMarker=o.editable,delete o.editable);var s=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!o.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),s=!0);var l=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizableCircle!=!!o.resizableCircle&&(this.map.pm.Draw.Circle.disable(),l=!0),this.map.pm.Draw.shapes.forEach(function(b){i.map.pm.Draw[b].setOptions(o)}),s&&this.map.pm.Draw.CircleMarker.enable(),l&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(function(b){b.pm.setOptions(o)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=o,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.enabled()&&t.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=L.PM.Utils.findLayers(this.map);if(!t)return i;var o=L.featureGroup();return o._pmTempLayer=!0,i.forEach(function(s){o.addLayer(s)}),o},getGeomanDrawLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=L.PM.Utils.findLayers(this.map).filter(function(s){return s._drawnByGeoman===!0});if(!t)return i;var o=L.featureGroup();return o._pmTempLayer=!0,i.forEach(function(s){o.addLayer(s)}),o},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(t){this._touchEventCounter===0&&(L.DomEvent.on(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(t){this._touchEventCounter===1&&(L.DomEvent.off(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(t){ct(this.map)._onMouseMove(this._createMouseEvent("mousemove",t))},_canvasTouchClick:function(t){var i="";t.type==="touchstart"||t.type==="pointerdown"?i="mousedown":t.type==="touchend"||t.type==="pointerup"?i="mouseup":t.type!=="touchcancel"&&t.type!=="pointercancel"||(i="mouseup"),i&&ct(this.map)._onClick(this._createMouseEvent(i,t))},_createMouseEvent:function(t,i){var o,s=i.touches[0]||i.changedTouches[0];try{o=new MouseEvent(t,{bubbles:i.bubbles,cancelable:i.cancelable,view:i.view,detail:s.detail,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey,button:i.button,relatedTarget:i.relatedTarget})}catch{(o=document.createEvent("MouseEvents")).initMouseEvent(t,i.bubbles,i.cancelable,i.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget)}return o}}),wt=L.Control.extend({includes:[ce],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(t){this._button=L.Util.extend({},this.options,t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus=typeof t=="boolean"?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(t){t&&t.preventDefault(),this._button.disabled||(this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t}))},_makeButton:function(t){var i=this,o=this.options.position.indexOf("right")>-1?"pos-right":"",s=L.DomUtil.create("div","button-container  ".concat(o),this._container);t.title&&s.setAttribute("title",t.title);var l=L.DomUtil.create("a","leaflet-buttons-control-button",s);l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.href="#";var b=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(o),s),M=t.actions,k={cancel:{text:ie("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:ie("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:ie("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[t.jsClass]._removeLastVertex()}},finish:{text:ie("actions.finish"),onClick:function(D){this._map.pm.Draw[t.jsClass]._finishShape(D)}}};M.forEach(function(D){var O,W=typeof D=="string"?D:D.name;if(k[W])O=k[W];else{if(!D.text)return;O=D}var F=L.DomUtil.create("a","leaflet-pm-action ".concat(o," action-").concat(W),b);F.setAttribute("role","button"),F.setAttribute("tabindex","0"),F.href="#",F.innerHTML=O.text,L.DomEvent.disableClickPropagation(F),L.DomEvent.on(F,"click",L.DomEvent.stop),!t.disabled&&O.onClick&&(L.DomEvent.addListener(F,"click",function(te){te.preventDefault();var le="",Me=i._map.pm.Toolbar.buttons;for(var Ce in Me)if(Me[Ce]._button===t){le=Ce;break}i._fireActionClick(O,le,t)},i),L.DomEvent.addListener(F,"click",O.onClick,i))}),t.toggleStatus&&L.DomUtil.addClass(s,"active");var x=L.DomUtil.create("div","control-icon",l);return t.iconUrl&&x.setAttribute("src",t.iconUrl),t.className&&L.DomUtil.addClass(x,t.className),L.DomEvent.disableClickPropagation(l),L.DomEvent.on(l,"click",L.DomEvent.stop),t.disabled||(L.DomEvent.addListener(l,"click",this._onBtnClick,this),L.DomEvent.addListener(l,"click",this._triggerClick,this)),t.disabled&&(L.DomUtil.addClass(l,"pm-disabled"),l.setAttribute("aria-disabled","true")),s},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var t="",i=this._map.pm.Toolbar.buttons;for(var o in i)if(i[o]._button===this._button){t=o;break}this._fireButtonClick(t,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var t="pm-disabled",i=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(i,t),i.setAttribute("aria-disabled","true"),L.DomEvent.off(i,"click",this._triggerClick,this),L.DomEvent.off(i,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(i,t),i.setAttribute("aria-disabled","false"),L.DomEvent.on(i,"click",this._triggerClick,this),L.DomEvent.on(i,"click",this._onBtnClick,this))}}});function jt(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,s)}return o}function Wt(t){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?jt(Object(o),!0).forEach(function(s){sn(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):jt(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function sn(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function Xe(t){return Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Xe(t)}L.Control.PMButton=wt;let qt=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var i="".concat(t,"Container");return this[i]||(this[i]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[i]},getButtons:function(){return this.buttons},addControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof t.editPolygon<"u"&&(t.editMode=t.editPolygon),typeof t.deleteLayer<"u"&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var t=this.getButtons(),i={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var o in t){var s=t[o];L.Util.setOptions(s,{className:i.geomanIcons[o]})}},removeControls:function(){var t=this.getButtons();for(var i in t)t[i].remove();this.isVisible=!1},toggleControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,i){return this.buttons[t]=i,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){for(var i in this.buttons){var o=this.buttons[i];o._button.disableByOtherButtons&&o!==t&&o.toggled()&&o._triggerClick()}},toggleButton:function(t,i){var o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return t==="editPolygon"&&(t="editMode"),t==="deleteLayer"&&(t="removalMode"),o&&this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(i)},_defineButtons:function(){var t=this,i={className:"control-icon leaflet-pm-icon-marker",title:ie("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},o={title:ie("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},s={className:"control-icon leaflet-pm-icon-polyline",title:ie("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},l={title:ie("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},b={title:ie("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:ie("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:ie("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},x={title:ie("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},D={title:ie("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},O={title:ie("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},W={title:ie("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},F={className:"control-icon leaflet-pm-icon-text",title:ie("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(te,le){t.map.pm.Draw[le.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(s)),this._addButton("drawRectangle",new L.Control.PMButton(M)),this._addButton("drawPolygon",new L.Control.PMButton(o)),this._addButton("drawCircle",new L.Control.PMButton(l)),this._addButton("drawCircleMarker",new L.Control.PMButton(b)),this._addButton("drawText",new L.Control.PMButton(F)),this._addButton("editMode",new L.Control.PMButton(k)),this._addButton("dragMode",new L.Control.PMButton(x)),this._addButton("cutPolygon",new L.Control.PMButton(D)),this._addButton("removalMode",new L.Control.PMButton(O)),this._addButton("rotateMode",new L.Control.PMButton(W))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var t=this.getButtons(),i=[];for(var o in this.options.drawControls===!1&&(i=i.concat(Object.keys(t).filter(function(l){return!t[l]._button.tool}))),this.options.editControls===!1&&(i=i.concat(Object.keys(t).filter(function(l){return t[l]._button.tool==="edit"}))),this.options.optionsControls===!1&&(i=i.concat(Object.keys(t).filter(function(l){return t[l]._button.tool==="options"}))),this.options.customControls===!1&&(i=i.concat(Object.keys(t).filter(function(l){return t[l]._button.tool==="custom"}))),t)if(this.options[o]&&i.indexOf(o)===-1){var s=t[o]._button.tool;s||(s="draw"),t[o].setPosition(this._getBtnPosition(s)),t[o].addTo(this.map)}}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,i){this.options.positions[t]=i,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,i){if(!i)throw new TypeError("Button has no name");Xe(i)!=="object"&&(i={name:i});var o=this._btnNameMapping(t);if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");var s=this.map.pm.Draw.createNewDrawInstance(i.name,o);return i=Wt(Wt({},this.buttons[o]._button),i),{drawInstance:s,control:this.createCustomControl(i)}},createCustomControl:function(t){var i,o;if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),t.toggle!==!1&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&t.block!=="draw"||(t.block=""),t.className?t.className.indexOf("control-icon")===-1&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var s={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:(i=t.disableOtherButtons)===null||i===void 0||i,disableByOtherButtons:(o=t.disableByOtherButtons)===null||o===void 0||o,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};this.options[t.name]!==!1&&(this.options[t.name]=!0);var l=this._addButton(t.name,new L.Control.PMButton(s));return this.changeControlOrder(),l},changeControlOrder:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=this._shapeMapping(),o=[];t.forEach(function(D){i[D]?o.push(i[D]):o.push(D)});var s=this.getButtons(),l={};o.forEach(function(D){s[D]&&(l[D]=s[D])});var b=Object.keys(s).filter(function(D){return!s[D]._button.tool});b.forEach(function(D){o.indexOf(D)===-1&&(l[D]=s[D])});var M=Object.keys(s).filter(function(D){return s[D]._button.tool==="edit"});M.forEach(function(D){o.indexOf(D)===-1&&(l[D]=s[D])});var k=Object.keys(s).filter(function(D){return s[D]._button.tool==="options"});k.forEach(function(D){o.indexOf(D)===-1&&(l[D]=s[D])});var x=Object.keys(s).filter(function(D){return s[D]._button.tool==="custom"});x.forEach(function(D){o.indexOf(D)===-1&&(l[D]=s[D])}),Object.keys(s).forEach(function(D){o.indexOf(D)===-1&&(l[D]=s[D])}),this.map.pm.Toolbar.buttons=l,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),i=[];for(var o in t)i.push(o);return i},changeActionsOfControl:function(t,i){var o=this._btnNameMapping(t);if(!o)throw new TypeError("No name passed");if(!i)throw new TypeError("No actions passed");if(!this.buttons[o])throw new TypeError("Button with this name not exists");this.buttons[o]._button.actions=i,this.changeControlOrder()},setButtonDisabled:function(t,i){var o=this._btnNameMapping(t);i?this.buttons[o].disable():this.buttons[o].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(t){var i=this._shapeMapping();return i[t]?i[t]:t}});function xt(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,s)}return o}function Kt(t){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?xt(Object(o),!0).forEach(function(s){fn(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):xt(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function fn(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var C={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var i=this;t.forEach(function(o){Array.isArray(o)?i._assignEvents(o):(o.off("drag",i._handleSnapping,i),o.on("drag",i._handleSnapping,i),o.off("dragend",i._cleanupSnapping,i),o.on("dragend",i._cleanupSnapping,i))})},_cleanupSnapping:function(t){t&&(t.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(i){i.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(t){var i,o,s,l=this,b=t.target;if(b._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),t!=null&&(i=t.originalEvent)!==null&&i!==void 0&&i.altKey||(o=this._map)!==null&&o!==void 0&&(s=o.pm)!==null&&s!==void 0&&s.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var M=this._calcClosestLayer(b.getLatLng(),this._snapList);if(Object.keys(M).length===0)return!1;var k,x=M.layer instanceof L.Marker||M.layer instanceof L.CircleMarker||!this.options.snapSegment;k=x?M.latlng:this._checkPrioritiySnapping(M);var D=this.options.snapDistance,O={marker:b,shape:this._shape,snapLatLng:k,segment:M.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:M.layer,distance:M.distance};if(this._fireSnapDrag(O.marker,O),this._fireSnapDrag(this._layer,O),M.distance<D){b._orgLatLng=b.getLatLng(),b.setLatLng(k),b._snapped=!0,b._snapInfo=O;var W=this._snapLatLng||{},F=k||{};W.lat===F.lat&&W.lng===F.lng||(l._snapLatLng=k,l._fireSnap(b,O),l._fireSnap(l._layer,O))}else this._snapLatLng&&(this._unsnap(O),b._snapped=!1,b._snapInfo=void 0,this._fireUnsnap(O.marker,O),this._fireUnsnap(this._layer,O));return!0},_createSnapList:function(){var t=this,i=[],o=[],s=this._map;s.off("layerremove",this._handleSnapLayerRemoval,this),s.on("layerremove",this._handleSnapLayerRemoval,this),s.eachLayer(function(l){if((l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&l.options.snapIgnore!==!0){if(l.options.snapIgnore===void 0&&(!L.PM.optIn&&l.options.pmIgnore===!0||L.PM.optIn&&l.options.pmIgnore!==!1))return;(l instanceof L.Circle||l instanceof L.CircleMarker)&&l.pm&&l.pm._hiddenPolyCircle?i.push(l.pm._hiddenPolyCircle):l instanceof L.ImageOverlay&&(l=L.rectangle(l.getBounds())),i.push(l);var b=L.polyline([],{color:"red",pmIgnore:!0});b._pmTempLayer=!0,o.push(b),(l instanceof L.Circle||l instanceof L.CircleMarker)&&o.push(b)}}),i=(i=(i=i.filter(function(l){return t._layer!==l})).filter(function(l){return l._latlng||l._latlngs&&me(l._latlngs)})).filter(function(l){return!l._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var l=L.polyline([],{color:"red",pmIgnore:!0});l._pmTempLayer=!0,o.push(l)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=o},_handleSnapLayerRemoval:function(t){var i=t.layer;if(i._leaflet_id){var o=this._snapList.findIndex(function(s){return s._leaflet_id===i._leaflet_id});o>-1&&this._snapList.splice(o,1)}},_calcClosestLayer:function(t,i){return this._calcClosestLayers(t,i,1)[0]},_calcClosestLayers:function(t,i){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=[],b={};i.forEach(function(k,x){if(!k._parentCopy||k._parentCopy!==o._layer){var D=o._calcLayerDistances(t,k);if(D.distance=Math.floor(D.distance),o.debugIndicatorLines){if(!o.debugIndicatorLines[x]){var O=L.polyline([],{color:"red",pmIgnore:!0});O._pmTempLayer=!0,o.debugIndicatorLines[x]=O}o.debugIndicatorLines[x].setLatLngs([t,D.latlng])}s===1&&(b.distance===void 0||D.distance<=b.distance)?(D.distance<b.distance&&(l=[]),(b=D).layer=k,l.push(b)):s!==1&&(b={},(b=D).layer=k,l.push(b))}}),s!==1&&(l=l.sort(function(k,x){return k.distance-x.distance})),s===-1&&(s=l.length);var M=this._getClosestLayerByPriority(l,s);return L.Util.isArray(M)?M:[M]},_calcLayerDistances:function(t,i){var o=this._map,s=i instanceof L.Marker||i instanceof L.CircleMarker,l=i instanceof L.Polygon,b=t;if(s){var M=i.getLatLng();return{latlng:Kt({},M),distance:this._getDistance(o,M,b)}}return this._calcLatLngDistances(b,i.getLatLngs(),o,l)},_calcLatLngDistances:function(t,i,o){var s,l,b,M=this,k=arguments.length>3&&arguments[3]!==void 0&&arguments[3],x=function O(W){W.forEach(function(F,te){if(Array.isArray(F))O(F);else if(M.options.snapSegment){var le,Me=F;le=k?te+1===W.length?0:te+1:te+1===W.length?void 0:te+1;var Ce=W[le];if(Ce){var Ae=M._getDistanceToSegment(o,t,Me,Ce);(l===void 0||Ae<l)&&(l=Ae,b=[Me,Ce])}}else{var ze=M._getDistance(o,t,F);(l===void 0||ze<l)&&(l=ze,s=F)}})};if(x(i),this.options.snapSegment){var D=this._getClosestPointOnSegment(o,t,b[0],b[1]);return{latlng:Kt({},D),segment:b,distance:l}}return{latlng:s,distance:l}},_getClosestLayerByPriority:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;t=t.sort(function(M,k){return M._leaflet_id-k._leaflet_id});var o=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],s=this._map.pm.globalOptions.snappingOrder||[],l=0,b={};return s.concat(o).forEach(function(M){b[M]||(l+=1,b[M]=l)}),t.sort(ft("instanceofShape",b)),i===1?t[0]||{}:t.slice(0,i)},_checkPrioritiySnapping:function(t){var i=this._map,o=t.segment[0],s=t.segment[1],l=t.latlng,b=this._getDistance(i,o,l),M=this._getDistance(i,s,l),k=b<M?o:s,x=b<M?b:M;if(this.options.snapMiddle){var D=L.PM.Utils.calcMiddleLatLng(i,o,s),O=this._getDistance(i,D,l);O<b&&O<M&&(k=D,x=O)}return Kt({},x<this.options.snapDistance?k:l)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,i,o,s){var l=t.getMaxZoom();l===1/0&&(l=t.getZoom());var b=t.project(i,l),M=t.project(o,l),k=t.project(s,l),x=L.LineUtil.closestPointOnSegment(b,M,k);return t.unproject(x,l)},_getDistanceToSegment:function(t,i,o,s){var l=t.latLngToLayerPoint(i),b=t.latLngToLayerPoint(o),M=t.latLngToLayerPoint(s);return L.LineUtil.pointToSegmentDistance(l,b,M)},_getDistance:function(t,i,o){return t.latLngToLayerPoint(i).distanceTo(t.latLngToLayerPoint(o))}};let c=C,u=L.Class.extend({includes:[c,ce],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0},setOptions:function(t){L.Util.setOptions(this,t),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(t){var i=this,o=new L.Icon.Default;o.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=o,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(s){i[s]=new L.PM.Draw[s](i._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=i?g()(this.options.pathOptions,t):t},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(t,i){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(i)},disable:function(){var t=this;this.shapes.forEach(function(i){t[i].disable()})},addControls:function(){var t=this;this.shapes.forEach(function(i){t[i].addButton()})},getActiveShape:function(){var t,i=this;return this.shapes.forEach(function(o){i[o]._enabled&&(t=o)}),t},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var t=L.PM.Utils.findLayers(this._map);this._enabled?t.forEach(function(i){L.PM.Utils.disablePopup(i)}):t.forEach(function(i){L.PM.Utils.enablePopup(i)})},createNewDrawInstance:function(t,i){var o=this._getShapeFromBtnName(i);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[o])throw new TypeError("There is no class L.PM.Draw.".concat(o));return this[t]=new L.PM.Draw[o](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[i]&&this[t].setOptions(this[i].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var i={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return i[t]?i[t]:this[t]?this[t]._shape:t},_finishLayer:function(t){t.pm&&(t.pm.setOptions(this.options),t.pm._shape=this._shape,t.pm._map=this._map),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,i){i==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":i==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":i==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});u.Marker=u.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var i=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(ie("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(o){i.isRelevantMarker(o)&&o.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(i){t.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer&&!t.pm._initTextMarker},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var i=t;i.target=this._hintMarker,this._handleSnapping(i)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(t){if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._hintMarker.getLatLng(),o=new L.Marker(i,this.options.markerStyle);this._setPane(o,"markerPane"),this._finishLayer(o),o.pm||(o.options.draggable=!1),o.addTo(this._map.pm._getContainingLayer()),o.pm&&this.options.markerEditable?o.pm.enable():o.dragging&&o.dragging.disable(),this._fireCreate(o),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var t,i;(t=this.options.markerStyle)!==null&&t!==void 0&&t.icon&&((i=this._hintMarker)===null||i===void 0||i.setIcon(this.options.markerStyle.icon))}});var y=63710088e-1,P={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*y,kilometers:6371.0088,kilometres:6371.0088,meters:y,metres:y,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:y/1852,radians:1,yards:6967335223679999e-9};function E(t,i,o){o===void 0&&(o={});var s={type:"Feature"};return(o.id===0||o.id)&&(s.id=o.id),o.bbox&&(s.bbox=o.bbox),s.properties=i||{},s.geometry=t,s}function q(t,i,o){if(o===void 0&&(o={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!je(t[0])||!je(t[1]))throw new Error("coordinates must contain numbers");return E({type:"Point",coordinates:t},i,o)}function J(t,i,o){if(o===void 0&&(o={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return E({type:"LineString",coordinates:t},i,o)}function ae(t,i){i===void 0&&(i={});var o={type:"FeatureCollection"};return i.id&&(o.id=i.id),i.bbox&&(o.bbox=i.bbox),o.features=t,o}function ve(t,i){i===void 0&&(i="kilometers");var o=P[i];if(!o)throw new Error(i+" units is invalid");return t*o}function Te(t,i){i===void 0&&(i="kilometers");var o=P[i];if(!o)throw new Error(i+" units is invalid");return t/o}function Ie(t){return 180*(t%(2*Math.PI))/Math.PI}function be(t){return t%360*Math.PI/180}function je(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Pe(t){var i,o,s={type:"FeatureCollection",features:[]};if((o=t.type==="Feature"?t.geometry:t).type==="LineString")i=[o.coordinates];else if(o.type==="MultiLineString")i=o.coordinates;else if(o.type==="MultiPolygon")i=[].concat.apply([],o.coordinates);else{if(o.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");i=o.coordinates}return i.forEach(function(l){i.forEach(function(b){for(var M=0;M<l.length-1;M++)for(var k=M;k<b.length-1;k++)if(!(l===b&&(Math.abs(M-k)===1||M===0&&k===l.length-2&&l[M][0]===l[l.length-1][0]&&l[M][1]===l[l.length-1][1]))){var x=Ze(l[M][0],l[M][1],l[M+1][0],l[M+1][1],b[k][0],b[k][1],b[k+1][0],b[k+1][1]);x&&s.features.push(q([x[0],x[1]]))}})}),s}function Ze(t,i,o,s,l,b,M,k){var x,D,O,W,F={x:null,y:null,onLine1:!1,onLine2:!1};return(x=(k-b)*(o-t)-(M-l)*(s-i))===0?F.x!==null&&F.y!==null&&F:(W=(o-t)*(D=i-b)-(s-i)*(O=t-l),D=((M-l)*D-(k-b)*O)/x,O=W/x,F.x=t+D*(o-t),F.y=i+D*(s-i),D>=0&&D<=1&&(F.onLine1=!0),O>=0&&O<=1&&(F.onLine2=!0),!(!F.onLine1||!F.onLine2)&&[F.x,F.y])}function Ue(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,s)}return o}function We(t){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Ue(Object(o),!0).forEach(function(s){it(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Ue(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function it(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function $e(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,s)}return o}function He(t){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?$e(Object(o),!0).forEach(function(s){mt(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):$e(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function mt(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function et(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Fe(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function rt(t){return t.type==="Feature"?t.geometry:t}function bt(t,i){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function _t(t,i,o){if(t!==null)for(var s,l,b,M,k,x,D,O,W=0,F=0,te=t.type,le=te==="FeatureCollection",Me=te==="Feature",Ce=le?t.features.length:1,Ae=0;Ae<Ce;Ae++){k=(O=!!(D=le?t.features[Ae].geometry:Me?t.geometry:t)&&D.type==="GeometryCollection")?D.geometries.length:1;for(var ze=0;ze<k;ze++){var Ye=0,at=0;if((M=O?D.geometries[ze]:D)!==null){x=M.coordinates;var _e=M.type;switch(W=!o||_e!=="Polygon"&&_e!=="MultiPolygon"?0:1,_e){case null:break;case"Point":if(i(x,F,Ae,Ye,at)===!1)return!1;F++,Ye++;break;case"LineString":case"MultiPoint":for(s=0;s<x.length;s++){if(i(x[s],F,Ae,Ye,at)===!1)return!1;F++,_e==="MultiPoint"&&Ye++}_e==="LineString"&&Ye++;break;case"Polygon":case"MultiLineString":for(s=0;s<x.length;s++){for(l=0;l<x[s].length-W;l++){if(i(x[s][l],F,Ae,Ye,at)===!1)return!1;F++}_e==="MultiLineString"&&Ye++,_e==="Polygon"&&at++}_e==="Polygon"&&Ye++;break;case"MultiPolygon":for(s=0;s<x.length;s++){for(at=0,l=0;l<x[s].length;l++){for(b=0;b<x[s][l].length-W;b++){if(i(x[s][l][b],F,Ae,Ye,at)===!1)return!1;F++}at++}Ye++}break;case"GeometryCollection":for(s=0;s<M.geometries.length;s++)if(_t(M.geometries[s],i,o)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ht(t,i){if(t.type==="Feature")i(t,0);else if(t.type==="FeatureCollection")for(var o=0;o<t.features.length&&i(t.features[o],o)!==!1;o++);}function ut(t,i){var o,s,l,b,M,k,x,D,O,W,F=0,te=t.type==="FeatureCollection",le=t.type==="Feature",Me=te?t.features.length:1;for(o=0;o<Me;o++){for(k=te?t.features[o].geometry:le?t.geometry:t,D=te?t.features[o].properties:le?t.properties:{},O=te?t.features[o].bbox:le?t.bbox:void 0,W=te?t.features[o].id:le?t.id:void 0,M=(x=!!k&&k.type==="GeometryCollection")?k.geometries.length:1,l=0;l<M;l++)if((b=x?k.geometries[l]:k)!==null)switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(i(b,F,D,O,W)===!1)return!1;break;case"GeometryCollection":for(s=0;s<b.geometries.length;s++)if(i(b.geometries[s],F,D,O,W)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(i(null,F,D,O,W)===!1)return!1;F++}}function kt(t,i){ut(t,function(o,s,l,b,M){var k,x=o===null?null:o.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return i(E(o,l,{bbox:b,id:M}),s,0)!==!1&&void 0}switch(x){case"MultiPoint":k="Point";break;case"MultiLineString":k="LineString";break;case"MultiPolygon":k="Polygon"}for(var D=0;D<o.coordinates.length;D++){var O=o.coordinates[D];if(i(E({type:k,coordinates:O},l),s,D)===!1)return!1}})}u.Line=u.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],We(We({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ie("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();if(t.length>0){var i=t[t.length-1];this._hintline.setLatLngs([i,this._hintMarker.getLatLng()])}},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var i=t;i.target=this._hintMarker,this._handleSnapping(i)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var o=this._layer._defaultShape().slice();o.push(this._hintMarker.getLatLng()),this._change(o)},hasSelfIntersection:function(){return Pe(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(t,i){var o=L.polyline(this._layer.getLatLngs());t&&(i||(i=this._hintMarker.getLatLng()),o.addLatLng(i));var s=Pe(o.toGeoJSON(15));this._doesSelfIntersect=s.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(s,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex:function(t){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,t.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._hintMarker.getLatLng(),o=this._layer.getLatLngs(),s=o[o.length-1];if(i.equals(o[0])||o.length>0&&i.equals(s))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:i,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(i);var l=this._createMarker(i);this._setTooltipText(),this._setHintLineAfterNewVertex(i),this._fireVertexAdded(l,void 0,i,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(t)}}},_setHintLineAfterNewVertex:function(t){this._hintline.setLatLngs([t,t])},_removeLastVertex:function(){var t=this._markers;if(t.length<=1)this.disable();else{var i=this._layer.getLatLngs(),o=t[t.length-1],s=L.PM.Utils.findDeepMarkerIndex(t,o).indexPath;t.pop(),this._layerGroup.removeLayer(o);var l=t[t.length-1],b=i.indexOf(l.getLatLng());i=i.slice(0,b+1),this._layer.setLatLngs(i),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(o,s,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=1)){var i=L.polyline(t,this.options.pathOptions);this._setPane(i,"layerPane"),this._finishLayer(i),i.addTo(this._map.pm._getContainingLayer()),this._fireCreate(i),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(t){var i=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(i,"vertexPane"),i._pmTempLayer=!0,this._layerGroup.addLayer(i),this._markers.push(i),i.on("click",this._finishShape,this),i},_setTooltipText:function(){var t="";t=ie(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(t)},_change:function(t){this._fireChange(t,"Draw")},setStyle:function(){var t,i;(t=this._layer)===null||t===void 0||t.setStyle(this.options.templineStyle),(i=this._hintline)===null||i===void 0||i.setStyle(this.options.hintlineStyle)}}),u.Polygon=u.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(t){L.PM.Draw.Line.prototype.enable.call(this,t),this._layer.pm._shape="Polygon"},_createMarker:function(t){var i=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(i,"vertexPane"),i._pmTempLayer=!0,this._layerGroup.addLayer(i),this._markers.push(i),this._layer.getLatLngs().flat().length===1?(i.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(i)-1,this.options.snappable&&this._cleanupSnapping()):i.on("click",function(){return 1}),i},_setTooltipText:function(){var t="";t=ie(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(t)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=2)){var i=L.polygon(t,this.options.pathOptions);this._setPane(i,"layerPane"),this._finishLayer(i),i.addTo(this._map.pm._getContainingLayer()),this._fireCreate(i),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),u.Rectangle=u.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ie("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var i=0;i<2;i+=1){var o=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(o,"vertexPane"),o._pmTempLayer=!0,this._layerGroup.addLayer(o),this._styleMarkers.push(o)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(i),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(o){L.DomUtil.addClass(o._icon,"visible"),o.setLatLng(i)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(ie("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var i=t;i.target=this._hintMarker,this._handleSnapping(i)}var o=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(o,"Draw")},_syncRectangleSize:function(){var t=this,i=zt(this._startMarker.getLatLng(),this._map),o=zt(this._hintMarker.getLatLng(),this._map),s=L.PM.Utils._getRotatedRectangle(i,o,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(s),this.options.cursorMarker&&this._styleMarkers){var l=[];s.forEach(function(b){b.equals(i,1e-8)||b.equals(o,1e-8)||l.push(b)}),l.forEach(function(b,M){try{t._styleMarkers[M].setLatLng(b)}catch{}})}},_findCorners:function(){var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this.options.rectangleAngle||0,this._map)},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._hintMarker.getLatLng(),o=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var s=L.rectangle([o,i],this.options.pathOptions);if(this.options.rectangleAngle){var l=L.PM.Utils._getRotatedRectangle(o,i,this.options.rectangleAngle||0,this._map);s.setLatLngs(l),s.pm&&s.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(s,"layerPane"),this._finishLayer(s),s.addTo(this._map.pm._getContainingLayer()),this._fireCreate(s),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var t;(t=this._layer)===null||t===void 0||t.setStyle(this.options.pathOptions)}}),u.CircleMarker=u.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable:function(t){if(L.Util.setOptions(this,t),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){var i={};L.extend(i,this.options.templineStyle),i.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),i),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ie("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),He({radius:this._defaultRadius},this.options.templineStyle)),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(ie("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable:function(){var t=this;!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(function(i){t.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable:function(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable:function(){var t=this;this._map.eachLayer(function(i){t.isRelevantMarker(i)&&i.pm.disable()})},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(i),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(ie("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),i=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,i])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng(),o=this._distanceCalculation(t,i);this.options[this._minRadiusOption]&&o<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&o>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(o)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var i=t;i.target=this._hintMarker,this._handleSnapping(i)}this._handleHintMarkerSnapping();var o=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(o,"Draw")},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&t.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._hintMarker.getLatLng(),o=new this._BaseCircleClass(i,He({radius:this._defaultRadius},this.options.pathOptions));this._setPane(o,"layerPane"),this._finishLayer(o),o.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(o),this._fireCreate(o),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_extendingCreateMarker:function(t){t.pm&&this.options.markerEditable&&t.pm.enable()},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._centerMarker.getLatLng(),o=this._defaultRadius;if(this.options[this._editableOption]){var s=this._hintMarker.getLatLng();o=this._distanceCalculation(i,s),this.options[this._minRadiusOption]&&o<this.options[this._minRadiusOption]?o=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&o>this.options[this._maxRadiusOption]&&(o=this.options[this._maxRadiusOption])}var l=He(He({},this.options.pathOptions),{},{radius:o}),b=new this._BaseCircleClass(i,l);this._setPane(b,"layerPane"),this._finishLayer(b),b.addTo(this._map.pm._getContainingLayer()),b.pm&&b.pm._updateHiddenPolyCircle(),this._fireCreate(b),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return t;var i=this._centerMarker.getLatLng(),o=this._distanceCalculation(i,t);this.options[this._minRadiusOption]&&o<this.options[this._minRadiusOption]?t=xe(this._map,i,t,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&o>this.options[this._maxRadiusOption]&&(t=xe(this._map,i,t,this._getMaxDistanceInMeter()))}return t},_getMinDistanceInMeter:function(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter:function(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping:function(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng(),o=this._distanceCalculation(t,i);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&o<this.options[this._minRadiusOption]||this.options[this._maxRadiusOption]&&o>this.options[this._maxRadiusOption])&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle:function(){var t,i,o={};L.extend(o,this.options.templineStyle),this.options[this._editableOption]&&(o.radius=0),(t=this._layer)===null||t===void 0||t.setStyle(o),(i=this._hintline)===null||i===void 0||i.setStyle(this.options.hintlineStyle)},_distanceCalculation:function(t,i){return this._map.project(t).distanceTo(this._map.project(i))}}),u.Circle=u.CircleMarker.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizableCircle",this._defaultRadius=100},_extendingEnable:function(){},_extendingDisable:function(){},_extendingCreateMarker:function(){},isRelevantMarker:function(){},_getMinDistanceInMeter:function(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter:function(){return this.options[this._maxRadiusOption]},_distanceCalculation:function(t,i){return this._map.distance(t,i)}});let Cn=function(t){if(!t)throw new Error("geojson is required");var i=[];return kt(t,function(o){(function(s,l){var b=[],M=s.geometry;if(M!==null){switch(M.type){case"Polygon":b=Fe(M);break;case"LineString":b=[Fe(M)]}b.forEach(function(k){var x=function(D,O){var W=[];return D.reduce(function(F,te){var le,Me,Ce,Ae,ze,Ye,at=J([F,te],O);return at.bbox=(Me=te,Ce=(le=F)[0],Ae=le[1],ze=Me[0],Ye=Me[1],[Ce<ze?Ce:ze,Ae<Ye?Ae:Ye,Ce>ze?Ce:ze,Ae>Ye?Ae:Ye]),W.push(at),te}),W}(k,s.properties);x.forEach(function(D){D.id=l.length,l.push(D)})})}})(o,i)}),ae(i)};var In=U(1787);function Kn(t,i){var o=Fe(t),s=Fe(i);if(o.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(s.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var l=o[0][0],b=o[0][1],M=o[1][0],k=o[1][1],x=s[0][0],D=s[0][1],O=s[1][0],W=s[1][1],F=(W-D)*(M-l)-(O-x)*(k-b),te=(O-x)*(b-D)-(W-D)*(l-x),le=(M-l)*(b-D)-(k-b)*(l-x);if(F===0)return null;var Me=te/F,Ce=le/F;return Me>=0&&Me<=1&&Ce>=0&&Ce<=1?q([l+Me*(M-l),b+Me*(k-b)]):null}let tt=function(t,i){var o={},s=[];if(t.type==="LineString"&&(t=E(t)),i.type==="LineString"&&(i=E(i)),t.type==="Feature"&&i.type==="Feature"&&t.geometry!==null&&i.geometry!==null&&t.geometry.type==="LineString"&&i.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&i.geometry.coordinates.length===2){var l=Kn(t,i);return l&&s.push(l),ae(s)}var b=In();return b.load(Cn(i)),ht(Cn(t),function(M){ht(b.search(M),function(k){var x=Kn(M,k);if(x){var D=Fe(x).join(",");o[D]||(o[D]=!0,s.push(x))}})}),ae(s)},pe=function(t,i,o){o===void 0&&(o={});var s=et(t),l=et(i),b=be(l[1]-s[1]),M=be(l[0]-s[0]),k=be(s[1]),x=be(l[1]),D=Math.pow(Math.sin(b/2),2)+Math.pow(Math.sin(M/2),2)*Math.cos(k)*Math.cos(x);return ve(2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D)),o.units)},Jn=function(t){var i=t[0],o=t[1],s=t[2],l=t[3];if(pe(t.slice(0,2),[s,o])>=pe(t.slice(0,2),[i,l])){var b=(o+l)/2;return[i,b-(s-i)/2,s,b+(s-i)/2]}var M=(i+s)/2;return[M-(l-o)/2,o,M+(l-o)/2,l]};function ln(t){var i=[1/0,1/0,-1/0,-1/0];return _t(t,function(o){i[0]>o[0]&&(i[0]=o[0]),i[1]>o[1]&&(i[1]=o[1]),i[2]<o[0]&&(i[2]=o[0]),i[3]<o[1]&&(i[3]=o[1])}),i}ln.default=ln;let Ot=ln,Xn=function(t,i){i===void 0&&(i={});var o=i.precision,s=i.coordinates,l=i.mutate;if(o=o==null||isNaN(o)?6:o,s=s==null||isNaN(s)?3:s,!t)throw new Error("<geojson> is required");if(typeof o!="number")throw new Error("<precision> must be a number");if(typeof s!="number")throw new Error("<coordinates> must be a number");l!==!1&&l!==void 0||(t=JSON.parse(JSON.stringify(t)));var b=Math.pow(10,o);return _t(t,function(M){(function(k,x,D){k.length>D&&k.splice(D,k.length);for(var O=0;O<k.length;O++)k[O]=Math.round(k[O]*x)/x})(M,b,s)}),t};function cn(t,i,o){if(o===void 0&&(o={}),o.final===!0)return function(W,F){var te=cn(F,W);return te=(te+180)%360}(t,i);var s=et(t),l=et(i),b=be(s[0]),M=be(l[0]),k=be(s[1]),x=be(l[1]),D=Math.sin(M-b)*Math.cos(x),O=Math.cos(k)*Math.sin(x)-Math.sin(k)*Math.cos(x)*Math.cos(M-b);return Ie(Math.atan2(D,O))}function Dn(t,i,o,s){s===void 0&&(s={});var l=et(t),b=be(l[0]),M=be(l[1]),k=be(o),x=Te(i,s.units),D=Math.asin(Math.sin(M)*Math.cos(x)+Math.cos(M)*Math.sin(x)*Math.cos(k));return q([Ie(b+Math.atan2(Math.sin(k)*Math.sin(x)*Math.cos(M),Math.cos(x)-Math.sin(M)*Math.sin(D))),Ie(D)],s.properties)}let Bt=function(t,i,o){o===void 0&&(o={});var s=q([1/0,1/0],{dist:1/0}),l=0;return kt(t,function(b){for(var M=Fe(b),k=0;k<M.length-1;k++){var x=q(M[k]);x.properties.dist=pe(i,x,o);var D=q(M[k+1]);D.properties.dist=pe(i,D,o);var O=pe(x,D,o),W=Math.max(x.properties.dist,D.properties.dist),F=cn(x,D),te=Dn(i,W,F+90,o),le=Dn(i,W,F-90,o),Me=tt(J([te.geometry.coordinates,le.geometry.coordinates]),J([x.geometry.coordinates,D.geometry.coordinates])),Ce=null;Me.features.length>0&&((Ce=Me.features[0]).properties.dist=pe(i,Ce,o),Ce.properties.location=l+pe(x,Ce,o)),x.properties.dist<s.properties.dist&&((s=x).properties.index=k,s.properties.location=l),D.properties.dist<s.properties.dist&&((s=D).properties.index=k+1,s.properties.location=l+O),Ce&&Ce.properties.dist<s.properties.dist&&((s=Ce).properties.index=k),l+=O}}),s};function Tn(t,i){var o=[],s=In();return kt(i,function(l){if(o.forEach(function(k,x){k.id=x}),o.length){var b=s.search(l);if(b.features.length){var M=$n(l,b);o=o.filter(function(k){return k.id!==M.id}),s.remove(M),ht(Pn(M,l),function(k){o.push(k),s.insert(k)})}}else(o=Pn(t,l).features).forEach(function(k){k.bbox||(k.bbox=Jn(Ot(k)))}),s.load(ae(o))}),ae(o)}function Pn(t,i){var o=[],s=Fe(t)[0],l=Fe(t)[t.geometry.coordinates.length-1];if(En(s,et(i))||En(l,et(i)))return ae([t]);var b=In(),M=Cn(t);b.load(M);var k=b.search(i);if(!k.features.length)return ae([t]);var x=$n(i,k),D=function(O,W,F){var te=F;return ht(O,function(le,Me){te=Me===0&&F===void 0?le:W(te,le,Me)}),te}(M,function(O,W,F){var te=Fe(W)[1],le=et(i);return F===x.id?(O.push(le),o.push(J(O)),En(le,te)?[le]:[le,te]):(O.push(te),O)},[s]);return D.length>1&&o.push(J(D)),ae(o)}function $n(t,i){if(!i.features.length)throw new Error("lines must contain features");if(i.features.length===1)return i.features[0];var o,s=1/0;return ht(i,function(l){var b=Bt(l,t).properties.dist;b<s&&(o=l,s=b)}),o}function En(t,i){return t[0]===i[0]&&t[1]===i[1]}let Li=function(t,i){if(!t)throw new Error("line is required");if(!i)throw new Error("splitter is required");var o=bt(t),s=bt(i);if(o!=="LineString")throw new Error("line must be LineString");if(s==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(s==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var l=Xn(i,{precision:7});switch(s){case"Point":return Pn(t,l);case"MultiPoint":return Tn(t,l);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Tn(t,tt(t,l))}};function Jt(t,i,o){if(o===void 0&&(o={}),!t)throw new Error("point is required");if(!i)throw new Error("polygon is required");var s=et(t),l=rt(i),b=l.type,M=i.bbox,k=l.coordinates;if(M&&function(F,te){return te[0]<=F[0]&&te[1]<=F[1]&&te[2]>=F[0]&&te[3]>=F[1]}(s,M)===!1)return!1;b==="Polygon"&&(k=[k]);for(var x=!1,D=0;D<k.length&&!x;D++)if(ei(s,k[D][0],o.ignoreBoundary)){for(var O=!1,W=1;W<k[D].length&&!O;)ei(s,k[D][W],!o.ignoreBoundary)&&(O=!0),W++;O||(x=!0)}return x}function ei(t,i,o){var s=!1;i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]&&(i=i.slice(0,i.length-1));for(var l=0,b=i.length-1;l<i.length;b=l++){var M=i[l][0],k=i[l][1],x=i[b][0],D=i[b][1];if(t[1]*(M-x)+k*(x-t[0])+D*(t[0]-M)==0&&(M-t[0])*(x-t[0])<=0&&(k-t[1])*(D-t[1])<=0)return!o;k>t[1]!=D>t[1]&&t[0]<(x-M)*(t[1]-k)/(D-k)+M&&(s=!s)}return s}function hn(t,i,o,s,l){var b=o[0],M=o[1],k=t[0],x=t[1],D=i[0],O=i[1],W=D-k,F=O-x,te=(o[0]-k)*F-(o[1]-x)*W;if(l!==null){if(Math.abs(te)>l)return!1}else if(te!==0)return!1;return s?s==="start"?Math.abs(W)>=Math.abs(F)?W>0?k<b&&b<=D:D<=b&&b<k:F>0?x<M&&M<=O:O<=M&&M<x:s==="end"?Math.abs(W)>=Math.abs(F)?W>0?k<=b&&b<D:D<b&&b<=k:F>0?x<=M&&M<O:O<M&&M<=x:s==="both"&&(Math.abs(W)>=Math.abs(F)?W>0?k<b&&b<D:D<b&&b<k:F>0?x<M&&M<O:O<M&&M<x):Math.abs(W)>=Math.abs(F)?W>0?k<=b&&b<=D:D<=b&&b<=k:F>0?x<=M&&M<=O:O<=M&&M<=x}let Xt=function(t,i,o){o===void 0&&(o={});for(var s=et(t),l=Fe(i),b=0;b<l.length-1;b++){var M=!1;if(o.ignoreEndVertices&&(b===0&&(M="start"),b===l.length-2&&(M="end"),b===0&&b+1===l.length-1&&(M="both")),hn(l[b],l[b+1],s,M,typeof o.epsilon>"u"?null:o.epsilon))return!0}return!1};function wi(t,i){var o=rt(t),s=rt(i),l=o.type,b=s.type,M=o.coordinates,k=s.coordinates;switch(l){case"Point":if(b==="Point")return Sn(M,k);throw new Error("feature2 "+b+" geometry not supported");case"MultiPoint":switch(b){case"Point":return function(x,D){var O,W=!1;for(O=0;O<x.coordinates.length;O++)if(Sn(x.coordinates[O],D.coordinates)){W=!0;break}return W}(o,s);case"MultiPoint":return function(x,D){for(var O=0,W=D.coordinates;O<W.length;O++){for(var F=W[O],te=!1,le=0,Me=x.coordinates;le<Me.length;le++)if(Sn(F,Me[le])){te=!0;break}if(!te)return!1}return!0}(o,s);default:throw new Error("feature2 "+b+" geometry not supported")}case"LineString":switch(b){case"Point":return Xt(s,o,{ignoreEndVertices:!0});case"LineString":return function(x,D){for(var O=!1,W=0,F=D.coordinates;W<F.length;W++){var te=F[W];if(Xt({type:"Point",coordinates:te},x,{ignoreEndVertices:!0})&&(O=!0),!Xt({type:"Point",coordinates:te},x,{ignoreEndVertices:!1}))return!1}return O}(o,s);case"MultiPoint":return function(x,D){for(var O=!1,W=0,F=D.coordinates;W<F.length;W++){var te=F[W];if(Xt(te,x,{ignoreEndVertices:!0})&&(O=!0),!Xt(te,x))return!1}return!!O}(o,s);default:throw new Error("feature2 "+b+" geometry not supported")}case"Polygon":switch(b){case"Point":return Jt(s,o,{ignoreBoundary:!0});case"LineString":return function(x,D){var O=!1,W=0,F=Ot(x),te=Ot(D);if(!ti(F,te))return!1;for(;W<D.coordinates.length-1;W++)if(Jt({type:"Point",coordinates:xi(D.coordinates[W],D.coordinates[W+1])},x,{ignoreBoundary:!0})){O=!0;break}return O}(o,s);case"Polygon":return function(x,D){if(x.type==="Feature"&&x.geometry===null||D.type==="Feature"&&D.geometry===null)return!1;var O=Ot(x),W=Ot(D);if(!ti(O,W))return!1;for(var F=rt(D).coordinates,te=0,le=F;te<le.length;te++)for(var Me=0,Ce=le[te];Me<Ce.length;Me++)if(!Jt(Ce[Me],x))return!1;return!0}(o,s);case"MultiPoint":return function(x,D){for(var O=0,W=D.coordinates;O<W.length;O++)if(!Jt(W[O],x,{ignoreBoundary:!0}))return!1;return!0}(o,s);default:throw new Error("feature2 "+b+" geometry not supported")}default:throw new Error("feature1 "+l+" geometry not supported")}}function ti(t,i){return!(t[0]>i[0])&&!(t[2]<i[2])&&!(t[1]>i[1])&&!(t[3]<i[3])}function Sn(t,i){return t[0]===i[0]&&t[1]===i[1]}function xi(t,i){return[(t[0]+i[0])/2,(t[1]+i[1])/2]}var Nn=U(2676),Rt=U.n(Nn);function $t(t){var i={type:"Feature"};return i.geometry=t,i}function en(t){return t.type==="Feature"?t.geometry:t}function Zt(t){return t&&t.geometry&&t.geometry.coordinates?t.geometry.coordinates:t}function Ee(t){return $t({type:"Polygon",coordinates:t})}function Be(t){return $t({type:"MultiPolygon",coordinates:t})}function tn(t){return Array.isArray(t)?1+tn(t[0]):-1}function Gt(t){t instanceof L.Polyline&&(t=t.toGeoJSON(15));var i=Zt(t),o=tn(i),s=[];return o>1?i.forEach(function(l){s.push(function(b){return $t({type:"LineString",coordinates:b})}(l))}):s.push(t),s}function Ut(t){var i=[];return t.eachLayer(function(o){i.push(Zt(o.toGeoJSON(15)))}),function(o){return $t({type:"MultiLineString",coordinates:o})}(i)}function zn(t,i){return function(o){if(Array.isArray(o))return o}(t)||function(o,s){var l=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(l!=null){var b,M,k=[],x=!0,D=!1;try{for(l=l.call(o);!(x=(b=l.next()).done)&&(k.push(b.value),!s||k.length!==s);x=!0);}catch(O){D=!0,M=O}finally{try{x||l.return==null||l.return()}finally{if(D)throw M}}return k}}(t,i)||function(o,s){if(o){if(typeof o=="string")return ke(o,s);var l=Object.prototype.toString.call(o).slice(8,-1);if(l==="Object"&&o.constructor&&(l=o.constructor.name),l==="Map"||l==="Set")return Array.from(o);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return ke(o,s)}}(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ke(t,i){(i==null||i>t.length)&&(i=t.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=t[o];return s}function Qe(t){return function(i){if(Array.isArray(i))return nn(i)}(t)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,o){if(i){if(typeof i=="string")return nn(i,o);var s=Object.prototype.toString.call(i).slice(8,-1);if(s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set")return Array.from(i);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return nn(i,o)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nn(t,i){(i==null||i>t.length)&&(i=t.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=t[o];return s}u.Cut=u.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var i=this._layer.getLatLngs();if(!(i.length<=2)){var o=L.polygon(i,this.options.pathOptions);o._latlngInfos=this._layer._latlngInfo,this.cut(o),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(s){var l=s.layer,b=s.originalLayer;t._fireCut(b,l,b),t._fireCut(t._map,l,b),b.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(t){var i=this,o=this._map._layers,s=t._latlngInfos||[];Object.keys(o).map(function(l){return o[l]}).filter(function(l){return l.pm}).filter(function(l){return!l._pmTempLayer}).filter(function(l){return!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1}).filter(function(l){return l instanceof L.Polyline}).filter(function(l){return l!==t}).filter(function(l){return l.pm.options.allowCutting}).filter(function(l){return!(i.options.layersToCut&&L.Util.isArray(i.options.layersToCut)&&i.options.layersToCut.length>0)||i.options.layersToCut.indexOf(l)>-1}).filter(function(l){return!i._layerGroup.hasLayer(l)}).filter(function(l){try{var b=!!tt(t.toGeoJSON(15),l.toGeoJSON(15)).features.length>0;return b||l instanceof L.Polyline&&!(l instanceof L.Polygon)?b:(M=t.toGeoJSON(15),k=l.toGeoJSON(15),x=en(M),D=en(k),!((O=Rt().intersection(x.coordinates,D.coordinates)).length===0||!(O.length===1?Ee(O[0]):Be(O))))}catch{return l instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var M,k,x,D,O}).forEach(function(l){var b;if(l instanceof L.Polygon){var M=(b=L.polygon(l.getLatLngs())).getLatLngs();s.forEach(function(F){if(F&&F.snapInfo){var te=F.latlng,le=i._calcClosestLayer(te,[b]);if(le&&le.segment&&le.distance<i.options.snapDistance){var Me=le.segment;if(Me&&Me.length===2){var Ce=L.PM.Utils._getIndexFromSegment(M,Me),Ae=Ce.indexPath,ze=Ce.parentPath,Ye=Ce.newIndex;(Ae.length>1?he()(M,ze):M).splice(Ye,0,te)}}}})}else b=l;var k=i._cutLayer(t,b),x=L.geoJSON(k,l.options);if(x.getLayers().length===1){var D=x.getLayers();x=zn(D,1)[0]}i._setPane(x,"layerPane");var O=x.addTo(i._map.pm._getContainingLayer());if(O.pm.enable(l.pm.options),O.pm.disable(),l._pmTempLayer=!0,t._pmTempLayer=!0,l.remove(),l.removeFrom(i._map.pm._getContainingLayer()),t.remove(),t.removeFrom(i._map.pm._getContainingLayer()),O.getLayers&&O.getLayers().length===0&&i._map.pm.removeLayer({target:O}),O instanceof L.LayerGroup&&O.eachLayer(function(F){i._addDrawnLayerProp(F)}),i._addDrawnLayerProp(O),i.options.layersToCut&&L.Util.isArray(i.options.layersToCut)&&i.options.layersToCut.length>0){var W=i.options.layersToCut.indexOf(l);W>-1&&i.options.layersToCut.splice(W,1)}i._editedLayers.push({layer:O,originalLayer:l})})},_cutLayer:function(t,i){var o,s,l,b,M,k,x=L.geoJSON();if(i instanceof L.Polygon)s=i.toGeoJSON(15),l=t.toGeoJSON(15),b=en(s),M=en(l),o=(k=Rt().difference(b.coordinates,M.coordinates)).length===0?null:k.length===1?Ee(k[0]):Be(k);else{var D=Gt(i);D.forEach(function(O){var W=Li(O,t.toGeoJSON(15));(W&&W.features.length>0?L.geoJSON(W):L.geoJSON(O)).getLayers().forEach(function(F){wi(t.toGeoJSON(15),F.toGeoJSON(15))||F.addTo(x)})}),o=D.length>1?Ut(x):x.toGeoJSON(15)}return o},_change:L.Util.falseFn}),u.Text=u.extend({initialize:function(t){this._map=t,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ie("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var i=t;i.target=this._hintMarker,this._handleSnapping(i)}},_createMarker:function(t){var i;if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var o=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(i=this.options.textOptions)!==null&&i!==void 0&&i.className){var s,l=this.options.textOptions.className.split(" ");(s=this.textArea.classList).add.apply(s,Qe(l))}var b=this._createTextIcon(this.textArea),M=new L.Marker(o,{textMarker:!0,_textMarkerOverPM:!0,icon:b});if(this._setPane(M,"markerPane"),this._finishLayer(M),M.pm||(M.options.draggable=!1),M.addTo(this._map.pm._getContainingLayer()),M.pm){var k,x,D,O,W;M.pm.textArea=this.textArea,L.setOptions(M.pm,{removeIfEmpty:(k=(x=this.options.textOptions)===null||x===void 0?void 0:x.removeIfEmpty)===null||k===void 0||k});var F=(D=(O=this.options.textOptions)===null||O===void 0?void 0:O.focusAfterDraw)===null||D===void 0||D;M.pm._createTextMarker(F),(W=this.options.textOptions)!==null&&W!==void 0&&W.text&&M.pm.setText(this.options.textOptions.text)}this._fireCreate(M),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var t=document.createElement("textarea");return t.readOnly=!0,t.classList.add("pm-textarea","pm-disabled"),t},_createTextIcon:function(t){return L.divIcon({className:"pm-text-marker",html:t})}});let un={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ct(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var t=this._getDOMElem();t&&(ct(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(t)):L.DomEvent.on(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,ct(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var t=this._getDOMElem();t&&(ct(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(t)):L.DomEvent.off(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(t){var i=t.touches?t.touches[0]:t,o={originalEvent:i,target:this._layer};return o.containerPoint=this._map.mouseEventToContainerPoint(i),o.latlng=this._map.containerPointToLatLng(o.containerPoint),this._dragMixinOnMouseDown(o),!1},_simulateMouseMoveEvent:function(t){var i=t.touches?t.touches[0]:t,o={originalEvent:i,target:this._layer};return o.containerPoint=this._map.mouseEventToContainerPoint(i),o.latlng=this._map.containerPointToLatLng(o.containerPoint),this._dragMixinOnMouseMove(o),!1},_simulateMouseUpEvent:function(t){var i={originalEvent:t.touches?t.touches[0]:t,target:this._layer};return t.type.indexOf("touch")===-1&&(i.containerPoint=this._map.mouseEventToContainerPoint(t),i.latlng=this._map.containerPointToLatLng(i.containerPoint)),this._dragMixinOnMouseUp(i),!1},_dragMixinOnMouseDown:function(t){if(!(t.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(t);var i=t._fromLayerSync,o=this._syncLayers("_dragMixinOnMouseDown",t);if(this._layer instanceof L.Marker&&(!this.options.snappable||i||o?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker){var s="resizeableCircleMarker";this._layer instanceof L.Circle&&(s="resizableCircle"),!this.options.snappable||i||o?this._layer.pm.options[s]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options[s]||this._initSnappableMarkersDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(t){this._overwriteEventIfItComesFromMarker(t);var i=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",t),this._dragging||(this._dragging=!0,L.DomUtil.addClass(i,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=t.latlng),this._onLayerDrag(t),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(t){var i=this,o=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",t),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){i._dragging=!1,o&&L.DomUtil.removeClass(o,"leaflet-pm-dragging"),i._fireDragEnd(),i._fireEdit(),i._layerEdited=!0},10),!0)},_onLayerDrag:function(t){var i=t.latlng,o=i.lat-this._tempDragCoord.lat,s=i.lng-this._tempDragCoord.lng,l=function O(W){return W.map(function(F){if(Array.isArray(F))return O(F);var te={lat:F.lat+o,lng:F.lng+s};return(F.alt||F.alt===0)&&(te.alt=F.alt),te})};if(this._layer instanceof L.Circle&&this._layer.options.resizableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){var b=l([this._layer.getLatLng()]);this._layer.setLatLng(b[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);var k=l([M]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var x=l([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(x),this._fireChange(this._layer.getBounds(),"Edit")}else{var D=l(this._layer.getLatLngs());this._layer.setLatLngs(D),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=i,t.layer=this._layer,this._fireDrag(t)},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image?t=this._layer._image:this._layer._icon&&(t=this._layer._icon),t},_overwriteEventIfItComesFromMarker:function(t){t.target.getLatLng&&(!t.target._radius||t.target._radius<=10)&&(t.containerPoint=this._map.mouseEventToContainerPoint(t.originalEvent),t.latlng=this._map.containerPointToLatLng(t.containerPoint))},_syncLayers:function(t,i){var o=this;if(this.enabled())return!1;if(!i._fromLayerSync&&this._layer===i.target&&this.options.syncLayersOnDrag){i._fromLayerSync=!0;var s=[];if(L.Util.isArray(this.options.syncLayersOnDrag))s=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(M){M instanceof L.LayerGroup&&(s=s.concat(M.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var l in this._parentLayerGroup){var b=this._parentLayerGroup[l];b.pm&&(s=b.pm.getLayers(!0))}return L.Util.isArray(s)&&s.length>0&&(s=s.filter(function(M){return!!M.pm}).filter(function(M){return!!M.pm.options.draggable})).forEach(function(M){M!==o._layer&&M.pm[t]&&(M._snapped=!1,M.pm[t](i))}),s.length>0}return!1},_stopDOMImageDrag:function(t){return t.preventDefault(),!1}};function ot(t,i,o){var s=o.getMaxZoom();if(s===1/0&&(s=o.getZoom()),L.Util.isArray(t)){var l=[];return t.forEach(function(b){l.push(ot(b,i,o))}),l}return t instanceof L.LatLng?function(b,M,k,x){return k.unproject(M.transform(k.project(b,x)),x)}(t,i,o,s):null}function Ft(t,i){i instanceof L.Layer&&(i=i.getLatLng());var o=t.getMaxZoom();return o===1/0&&(o=t.getZoom()),t.project(i,o)}function Ct(t,i){var o=t.getMaxZoom();return o===1/0&&(o=t.getZoom()),t.unproject(i,o)}var It={_onRotateStart:function(t){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ft(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ft(this._map,t.target.getLatLng()),this._initialRotateLatLng=Je(this._layer),this._startAngle=this.getAngle();var i=Je(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,i),this._fireRotationStart(this._map,i)},_onRotate:function(t){var i=Ft(this._map,t.target.getLatLng()),o=this._rotationStartPoint,s=this._rotationOriginPoint,l=Math.atan2(i.y-s.y,i.x-s.x)-Math.atan2(o.y-s.y,o.x-s.x);this._layer.setLatLngs(this._rotateLayer(l,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var b=this;(function D(O){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(F>-1&&W.push(F),L.Util.isArray(O[0]))O.forEach(function(le,Me){return D(le,W.slice(),Me)});else{var te=he()(b._markers,W);O.forEach(function(le,Me){te[Me].setLatLng(le)})}})(this._layer.getLatLngs());var M=Je(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(l,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var k=180*l/Math.PI,x=(k=k<0?k+360:k)+this._startAngle;this._setAngle(x),this._rotationLayer.pm._setAngle(x),this._fireRotation(this._rotationLayer,k,M),this._fireRotation(this._map,k,M),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var t=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var i=Je(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Je(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,t,i),this._fireRotationEnd(this._map,t,i),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(t,i,o,s,l){var b=Ft(l,o);return this._matrix=s.clone().rotate(t,b).flip(),ot(i,this._matrix,l)},_setAngle:function(t){t=t<0?t+360:t,this._angle=t%360},_getRotationCenter:function(){if(this._rotationCenter)return this._rotationCenter;var t=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),i=t.getCenter();return t.removeFrom(this._layer._map),i},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Se(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Je(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(t){var i=this.getAngle(),o=this._layer.getLatLngs(),s=t*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(s,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+t),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(s,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var l=this.getAngle()-i;l=l<0?l+360:l,this._startAngle=i,this._fireRotation(this._layer,l,o,this._layer),this._fireRotation(this._map||this._layer._map,l,o,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(t){var i=t-this.getAngle();this.rotateLayer(i)},getAngle:function(){return this._angle||0},setInitAngle:function(t){this._setAngle(t)},getRotationCenter:function(){return this._getRotationCenter()},setRotationCenter:function(t){this._rotationCenter=t,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(t)}};let Ve=It,Re=L.Class.extend({includes:[un,c,Ve,ce],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizableCircle:!0},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,i){i==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":i==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":i==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(t,i){var o=i.target,s={layer:this._layer,marker:o,event:i},l="";return t==="move"?l="moveVertexValidation":t==="add"?l="addVertexValidation":t==="remove"&&(l="removeVertexValidation"),this.options[l]&&typeof this.options[l]=="function"&&!this.options[l](s)?(t==="move"&&(o._cancelDragEventChain=o.getLatLng()),!1):(o._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(t){return!t._cancelDragEventChain||(t._latlng=t._cancelDragEventChain,t.update(),!1)},_vertexValidationDragEnd:function(t){return!t._cancelDragEventChain||(t._cancelDragEventChain=null,!1)}});function vt(t){return function(i){if(Array.isArray(i))return Dt(i)}(t)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,o){if(i){if(typeof i=="string")return Dt(i,o);var s=Object.prototype.toString.call(i).slice(8,-1);if(s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set")return Array.from(i);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Dt(i,o)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dt(t,i){(i==null||i>t.length)&&(i=t.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=t[o];return s}Re.LayerGroup=L.Class.extend({initialize:function(t){var i=this;this._layerGroup=t,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(o){return i._initLayer(o)}),this._layerGroup.on("layeradd",L.Util.throttle(function(o){if(!o.layer._pmTempLayer){i._layers=i.getLayers();var s=i._layers.filter(function(l){return!l.pm._parentLayerGroup||!(i._layerGroup._leaflet_id in l.pm._parentLayerGroup)});s.forEach(function(l){i._initLayer(l)}),s.length>0&&i._getMap()&&i._getMap().pm.globalEditModeEnabled()&&i.enabled()&&i.enable(i.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(o){i._removeLayerFromGroup(o.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(o){o.target._pmTempLayer||(i._layers=i.getLayers())},100,this),this)},enable:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(o){o instanceof L.LayerGroup?i.indexOf(o._leaflet_id)===-1&&(i.push(o._leaflet_id),o.pm.enable(t,i)):o.pm.enable(t)})},disable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(i){i instanceof L.LayerGroup?t.indexOf(i._leaflet_id)===-1&&(t.push(i._leaflet_id),i.pm.disable(t)):i.pm.disable()})},enabled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers());var i=this._layers.find(function(o){return o instanceof L.LayerGroup?t.indexOf(o._leaflet_id)===-1&&(t.push(o._leaflet_id),o.pm.enabled(t)):o.pm.enabled()});return!!i},toggleEdit:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(o){o instanceof L.LayerGroup?i.indexOf(o._leaflet_id)===-1&&(i.push(o._leaflet_id),o.pm.toggleEdit(t,i)):o.pm.toggleEdit(t)})},_initLayer:function(t){var i=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[i]=this._layerGroup},_removeLayerFromGroup:function(t){if(t.pm&&t.pm._layerGroup){var i=L.Util.stamp(this._layerGroup);delete t.pm._layerGroup[i]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var t=this._layers.find(function(i){return i.pm.dragging()});return!!t}return!1},getOptions:function(){return this.options},_getMap:function(){var t;return this._map||((t=this._layers.find(function(i){return!!i._map}))===null||t===void 0?void 0:t._map)||null},getLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],l=[];return t?this._layerGroup.getLayers().forEach(function(b){l.push(b),b instanceof L.LayerGroup&&s.indexOf(b._leaflet_id)===-1&&(s.push(b._leaflet_id),l=l.concat(b.pm.getLayers(!0,!0,!0,s)))}):l=this._layerGroup.getLayers(),o&&(l=l.filter(function(b){return!(b instanceof L.LayerGroup)})),i&&(l=(l=(l=l.filter(function(b){return!!b.pm})).filter(function(b){return!b._pmTempLayer})).filter(function(b){return!L.PM.optIn&&!b.options.pmIgnore||L.PM.optIn&&b.options.pmIgnore===!1})),l},setOptions:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.length===0&&(this._layers=this.getLayers()),this.options=t,this._layers.forEach(function(o){o.pm&&(o instanceof L.LayerGroup?i.indexOf(o._leaflet_id)===-1&&(i.push(o._leaflet_id),o.pm.setOptions(t,i)):o.pm.setOptions(t))})}}),Re.Marker=Re.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){var i=t.target;i.remove(),this._fireRemove(i),this._fireRemove(this._map,i)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});let An={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(vt(this._markerGroup.getLayers()),vt(this.markerCache));this.markerCache=t.filter(function(i,o,s){return s.indexOf(i)===o})},renderLimits:function(t){var i=this;this.markerCache.forEach(function(o){t.includes(o)?i._markerGroup.addLayer(o):i._markerGroup.removeLayer(o)})},applyLimitFilters:function(t){var i=t.latlng,o=i===void 0?{lat:0,lng:0}:i;if(!this._preventRenderMarkers){var s=vt(this._filterClosestMarkers(o));this.renderLimits(s)}},_filterClosestMarkers:function(t){var i=vt(this.markerCache),o=this.options.limitMarkersToCount;return o===-1?i:(i.sort(function(s,l){return s._latlng.distanceTo(t)-l._latlng.distanceTo(t)}),i.filter(function(s,l){return!(o>-1)||l<o}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(t){this._preventRenderMarkers=!!t}};function rn(t,i){return function(o){if(Array.isArray(o))return o}(t)||function(o,s){var l=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(l!=null){var b,M,k=[],x=!0,D=!1;try{for(l=l.call(o);!(x=(b=l.next()).done)&&(k.push(b.value),!s||k.length!==s);x=!0);}catch(O){D=!0,M=O}finally{try{x||l.return==null||l.return()}finally{if(D)throw M}}return k}}(t,i)||function(o,s){if(o){if(typeof o=="string")return dn(o,s);var l=Object.prototype.toString.call(o).slice(8,-1);if(l==="Object"&&o.constructor&&(l=o.constructor.name),l==="Map"||l==="Set")return Array.from(o);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return dn(o,s)}}(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dn(t,i){(i==null||i>t.length)&&(i=t.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=t[o];return s}function jn(t){return function(i){if(Array.isArray(i))return Yt(i)}(t)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,o){if(i){if(typeof i=="string")return Yt(i,o);var s=Object.prototype.toString.call(i).slice(8,-1);if(s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set")return Array.from(i);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Yt(i,o)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yt(t,i){(i==null||i>t.length)&&(i=t.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=t[o];return s}Re.Line=Re.extend({includes:[An],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var t=this,i=this._map,o=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function s(l){if(Array.isArray(l[0]))return l.map(s,t);var b=l.map(t._createMarker,t);return t.options.hideMiddleMarkers!==!0&&l.map(function(M,k){var x=t.isPolygon()?(k+1)%l.length:k+1;return t._createMiddleMarker(b[k],b[x])}),b}(o),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker:function(t){var i=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(i,"vertexPane"),i._pmTempLayer=!0,this.options.rotate?(i.on("dragstart",this._onRotateStart,this),i.on("drag",this._onRotate,this),i.on("dragend",this._onRotateEnd,this)):(i.on("click",this._onVertexClick,this),i.on("dragstart",this._onMarkerDragStart,this),i.on("move",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(i),i},_createMiddleMarker:function(t,i){if(!t||!i)return!1;var o=L.PM.Utils.calcMiddleLatLng(this._map,t.getLatLng(),i.getLatLng()),s=this._createMarker(o),l=L.divIcon({className:"marker-icon marker-icon-middle"});return s.setIcon(l),s.leftM=t,s.rightM=i,t._middleMarkerNext=s,i._middleMarkerPrev=s,s.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),s.on("movestart",this._onMiddleMarkerMoveStart,this),s},_onMiddleMarkerClick:function(t){var i=t.target;if(this._vertexValidation("add",t)){var o=L.divIcon({className:"marker-icon"});i.setIcon(o),this._addMarker(i,i.leftM,i.rightM)}},_onMiddleMarkerMoveStart:function(t){var i=t.target;i.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",t)?(i._dragging=!0,this._addMarker(i,i.leftM,i.rightM)):i.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(t){var i=t.target;this._vertexValidationDrag(i)},_onMiddleMarkerMoveEnd:function(t){var i=t.target;if(i.off("move",this._onMiddleMarkerMovePrevent,this),i.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(i)){var o=L.divIcon({className:"marker-icon"});i.setIcon(o),setTimeout(function(){delete i._dragging},100)}},_addMarker:function(t,i,o){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var s=t.getLatLng(),l=this._layer._latlngs;delete t.leftM,delete t.rightM;var b=L.PM.Utils.findDeepMarkerIndex(this._markers,i),M=b.indexPath,k=b.index,x=b.parentPath,D=M.length>1?he()(l,x):l,O=M.length>1?he()(this._markers,x):this._markers;D.splice(k+1,0,s),O.splice(k+1,0,t),this._layer.setLatLngs(l),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(i,t),this._createMiddleMarker(t,o)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(t,L.PM.Utils.findDeepMarkerIndex(this._markers,t).indexPath,s),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return Pe(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var i,o,s=this._layer;if(i=!this.options.allowSelfIntersection&&(o=Pe(this._layer.toGeoJSON(15))).features.length>0){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return i;t?this._flashLayer():(s.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(o)}else s.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return i},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1},200)},_updateDisabledMarkerStyle:function(t,i){var o=this;t.forEach(function(s){Array.isArray(s)?o._updateDisabledMarkerStyle(s,i):s._icon&&(i&&!o._checkMarkerAllowedToDrag(s)?L.DomUtil.addClass(s._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(s._icon,"vertexmarker-disabled"))})},_removeMarker:function(t){var i=t.target;if(this._vertexValidation("remove",t)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=Je(this._layer,this._layer.getLatLngs()));var o=this._layer.getLatLngs(),s=L.PM.Utils.findDeepMarkerIndex(this._markers,i),l=s.indexPath,b=s.index,M=s.parentPath;if(l){var k=l.length>1?he()(o,M):o,x=l.length>1?he()(this._markers,M):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(k.length<=2||this.isPolygon()&&k.length<=3)){k.splice(b,1),this._layer.setLatLngs(o),this.isPolygon()&&k.length<=2&&k.splice(0,k.length);var D=!1;if(k.length<=1&&(k.splice(0,k.length),M.length>1&&l.length>1&&(o=Ne(o)),this._layer.setLatLngs(o),this._initMarkers(),D=!0),me(o)||this._layer.remove(),o=Ne(o),this._layer.setLatLngs(o),this._markers=Ne(this._markers),!D&&(x=l.length>1?he()(this._markers,M):this._markers,i._middleMarkerPrev&&this._markerGroup.removeLayer(i._middleMarkerPrev),i._middleMarkerNext&&this._markerGroup.removeLayer(i._middleMarkerNext),this._markerGroup.removeLayer(i),x)){var O,W;if(this.isPolygon()?(O=(b+1)%x.length,W=(b+(x.length-1))%x.length):(W=b-1<0?void 0:b-1,O=b+1>=x.length?void 0:b+1),O!==W){var F=x[W],te=x[O];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(F,te)}x.splice(b,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(i,l),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(t){var i=this._layer.getLatLngs(),o=t.getLatLng(),s=L.PM.Utils.findDeepMarkerIndex(this._markers,t),l=s.indexPath,b=s.index,M=s.parentPath;(l.length>1?he()(i,M):i).splice(b,1,o),this._layer.setLatLngs(i)},_getNeighborMarkers:function(t){var i=L.PM.Utils.findDeepMarkerIndex(this._markers,t),o=i.indexPath,s=i.index,l=i.parentPath,b=o.length>1?he()(this._markers,l):this._markers,M=(s+1)%b.length;return{prevMarker:b[(s+(b.length-1))%b.length],nextMarker:b[M]}},_checkMarkerAllowedToDrag:function(t){var i=this._getNeighborMarkers(t),o=i.prevMarker,s=i.nextMarker,l=L.polyline([o.getLatLng(),t.getLatLng()]),b=L.polyline([t.getLatLng(),s.getLatLng()]),M=tt(this._layer.toGeoJSON(15),l.toGeoJSON(15)).features.length,k=tt(this._layer.toGeoJSON(15),b.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?k+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(M+=1),!(M<=2&&k<=2)},_onMarkerDragStart:function(t){var i=t.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",t)){var o=L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath;this._fireMarkerDragStart(t,o),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Je(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(i):this._markerAllowedToDrag=null}},_onMarkerDrag:function(t){var i=t.target;if(this._vertexValidationDrag(i)){var o=L.PM.Utils.findDeepMarkerIndex(this._markers,i),s=o.indexPath,l=o.index,b=o.parentPath;if(s){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(i);var M=s.length>1?he()(this._markers,b):this._markers,k=(l+1)%M.length,x=(l+(M.length-1))%M.length,D=i.getLatLng(),O=M[x].getLatLng(),W=M[k].getLatLng();if(i._middleMarkerNext){var F=L.PM.Utils.calcMiddleLatLng(this._map,D,W);i._middleMarkerNext.setLatLng(F)}if(i._middleMarkerPrev){var te=L.PM.Utils.calcMiddleLatLng(this._map,D,O);i._middleMarkerPrev.setLatLng(te)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(t,s),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(t){var i=t.target;if(this._vertexValidationDragEnd(i)){var o=L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,s=this.hasSelfIntersection();s&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(s=!1);var l=!this.options.allowSelfIntersection&&s;if(this._fireMarkerDragEnd(t,o,l),l)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(t,o);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(t){var i=t.target;if(!i._dragging){var o=L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath;this._fireVertexClick(t,o)}}}),Re.Polygon=Re.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var i=this._getNeighborMarkers(t),o=i.prevMarker,s=i.nextMarker,l=L.polyline([o.getLatLng(),t.getLatLng()]),b=L.polyline([t.getLatLng(),s.getLatLng()]),M=tt(this._layer.toGeoJSON(15),l.toGeoJSON(15)).features.length,k=tt(this._layer.toGeoJSON(15),b.toGeoJSON(15)).features.length;return!(M<=2&&k<=2)}}),Re.Rectangle=Re.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this,i=this._map,o=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=o.map(this._createMarker,this);var s=rn(this._markers,1);this._cornerMarkers=s[0],this._layer.getLatLngs()[0].forEach(function(l,b){var M=t._cornerMarkers.find(function(k){return k._index===b});M&&M.setLatLng(l)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,i){var o=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(o,"vertexPane"),o._origLatLng=t,o._index=i,o._pmTempLayer=!0,o.on("click",this._onVertexClick,this),this._markerGroup.addLayer(o),o},_addMarkerEvents:function(){var t=this;this._markers[0].forEach(function(i){i.on("dragstart",t._onMarkerDragStart,t),i.on("drag",t._onMarkerDrag,t),i.on("dragend",t._onMarkerDragEnd,t),t.options.preventMarkerRemoval||i.on("contextmenu",t._removeMarker,t)})},_removeMarker:function(){return null},_onMarkerDragStart:function(t){if(this._vertexValidation("move",t)){var i=t.target,o=this._cornerMarkers;i._oppositeCornerLatLng=o.find(function(s){return s._index===(i._index+2)%4}).getLatLng(),i._snapped=!1,this._fireMarkerDragStart(t)}},_onMarkerDrag:function(t){var i=t.target;this._vertexValidationDrag(i)&&i._index!==void 0&&(this._adjustRectangleForMarkerMove(i),this._fireMarkerDrag(t),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(t){var i=t.target;this._vertexValidationDragEnd(i)&&(this._cornerMarkers.forEach(function(o){delete o._oppositeCornerLatLng}),this._fireMarkerDragEnd(t),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var i=L.PM.Utils._getRotatedRectangle(t.getLatLng(),t._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(i),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var t=this,i=this._layer.getLatLngs()[0];i&&i.length!==4&&i.length>0?(i.forEach(function(o,s){t._cornerMarkers[s].setLatLng(o)}),this._cornerMarkers.slice(i.length).forEach(function(o){o.setLatLng(i[0])})):i&&i.length?this._cornerMarkers.forEach(function(o){o.setLatLng(i[o._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){this._angle===void 0&&this.setInitAngle(Se(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this.getAngle(),this._map||this)}}),Re.CircleMarker=Re.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},_extendingEnable:function(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable:function(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this.options[this._editableOption]?(this._helperLayers&&this._helperLayers.clearLayers(),this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable:function(){this._layer.off("contextmenu",this._removeMarker,this)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions:function(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var i=this._layer.getLatLng(),o=this._layer._radius,s=this._getLatLngOnCircle(i,o);this._centerMarker=this._createCenterMarker(i),this._outerMarker=this._createOuterMarker(s),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,i){var o=this._map.project(t),s=L.point(o.x+i,o.y);return this._map.unproject(s)},_createHintLine:function(t,i){var o=t.getLatLng(),s=i.getLatLng();this._hintline=L.polyline([o,s],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var i=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(i._icon,"leaflet-pm-draggable"):i.dragging.disable(),i},_createOuterMarker:function(t){var i=this._createMarker(t);return i.on("drag",this._resizeCircle,this),i},_createMarker:function(t){var i=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(i,"vertexPane"),i._origLatLng=t,i._pmTempLayer=!0,i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),i.on("click",this._onVertexClick,this),this._helperLayers.addLayer(i),i},_moveCircle:function(t){if(!t.target._cancelDragEventChain){var i=this._centerMarker.getLatLng();this._layer.setLatLng(i);var o=this._layer._radius,s=this._getLatLngOnCircle(i,o);this._outerMarker._latlng=s,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncMarkers:function(){var t=this._layer.getLatLng(),i=this._layer._radius,o=this._getLatLngOnCircle(t,i);this._outerMarker.setLatLng(o),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),i=this._outerMarker.getLatLng(),o=this._distanceCalculation(t,i);this.options[this._minRadiusOption]&&o<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&o>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(o),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),i=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,i])},_removeMarker:function(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var i=t.target;i instanceof L.Marker&&!this._vertexValidationDrag(i)||this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){this._extedingMarkerDragEnd();var i=t.target;this._vertexValidationDragEnd(i)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(t))},_extedingMarkerDragEnd:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t=this._layer._map||this._map;if(t){var i=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),t,this._layer.getLatLng()),o=L.circle(this._layer.getLatLng(),this._layer.options);o.setRadius(i);var s=t&&t.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(o,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(o,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),i=this._outerMarker.getLatLng(),o=this._distanceCalculation(t,i);return this.options[this._minRadiusOption]&&o<this.options[this._minRadiusOption]?i=xe(this._map,t,i,this._getMinDistanceInMeter(t)):this.options[this._maxRadiusOption]&&o>this.options[this._maxRadiusOption]&&(i=xe(this._map,t,i,this._getMaxDistanceInMeter(t))),i},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),i=this._outerMarker.getLatLng(),o=this._distanceCalculation(t,i);(this.options[this._minRadiusOption]&&o<this.options[this._minRadiusOption]||this.options[this._maxRadiusOption]&&o>this.options[this._maxRadiusOption])&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation:function(t,i){return this._map.project(t).distanceTo(this._map.project(i))},_getMinDistanceInMeter:function(t){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,t)},_getMaxDistanceInMeter:function(t){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,t)},_onVertexClick:function(t){t.target._dragging||this._fireVertexClick(t,void 0)}}),Re.Circle=Re.CircleMarker.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizableCircle",this._updateHiddenPolyCircle()},enable:function(t){L.PM.Edit.CircleMarker.prototype.enable.call(this,t||{})},_extendingEnable:function(){},_extendingDisable:function(){this._layer.off("remove",this.disable,this);var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_extendingApplyOptions:function(){},_syncMarkers:function(){},_removeMarker:function(){},_onDragStart:function(){},_extedingMarkerDragEnd:function(){},_updateHiddenPolyCircle:function(){var t=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!t).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!t),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation:function(t,i){return this._map.distance(t,i)},_getMinDistanceInMeter:function(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter:function(){return this.options[this._maxRadiusOption]},_onVertexClick:function(t){t.target._dragging||this._fireVertexClick(t,void 0)}}),Re.ImageOverlay=Re.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),Re.Text=Re.extend({_shape:"Text",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var t=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),t.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var t=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,i=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(t,"px"),this.textArea.style.width="".concat(i,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var t=this;this._disableOnBlurActive=!0,setTimeout(function(){t.enabled()&&L.DomEvent.on(document,"click",t._documentClick,t)},100)},_documentClick:function(t){t.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this._hasFocus;this._hasFocus=t.type==="focus",!i!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(t){this.textArea.value=t,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var t,i=this.options.className.split(" ");(t=this.textArea.classList).add.apply(t,jn(i))}var o=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(o),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),t===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(t){t.preventDefault()}});var on=function(t,i,o,s,l,b){this._matrix=[t,i,o,s,l,b]};on.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},on.prototype={transform:function(t){return this._transform(t.clone())},_transform:function(t){var i=this._matrix,o=t.x,s=t.y;return t.x=i[0]*o+i[1]*s+i[4],t.y=i[2]*o+i[3]*s+i[5],t},untransform:function(t){var i=this._matrix;return new L.Point((t.x/i[0]-i[4])/i[0],(t.y/i[2]-i[5])/i[2])},clone:function(){var t=this._matrix;return new L.PM.Matrix(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(t){return t===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof t=="number"?(i=t,o=t):(i=t.x,o=t.y),this._add(1,0,0,1,i,o));var i,o},scale:function(t,i){return t===void 0?new L.Point(this._matrix[0],this._matrix[3]):(i=i||L.point(0,0),typeof t=="number"?(o=t,s=t):(o=t.x,s=t.y),this._add(o,0,0,s,i.x,i.y)._add(1,0,0,1,-i.x,-i.y));var o,s},rotate:function(t,i){var o=Math.cos(t),s=Math.sin(t);return i=i||new L.Point(0,0),this._add(o,s,-s,o,i.x,i.y)._add(1,0,0,1,-i.x,-i.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(t,i,o,s,l,b){var M,k=[[],[],[]],x=this._matrix,D=[[x[0],x[2],x[4]],[x[1],x[3],x[5]],[0,0,1]],O=[[t,o,l],[i,s,b],[0,0,1]];t&&t instanceof L.PM.Matrix&&(O=[[(x=t._matrix)[0],x[2],x[4]],[x[1],x[3],x[5]],[0,0,1]]);for(var W=0;W<3;W+=1)for(var F=0;F<3;F+=1){M=0;for(var te=0;te<3;te+=1)M+=D[W][te]*O[te][F];k[W][F]=M}return this._matrix=[k[0][0],k[1][0],k[0][1],k[1][1],k[0][2],k[1][2]],this}};let On=on;var pn={calcMiddleLatLng:function(t,i,o){var s=t.project(i),l=t.project(o);return t.unproject(s._add(l)._divideBy(2))},findLayers:function(t){var i=[];return t.eachLayer(function(o){(o instanceof L.Polyline||o instanceof L.Marker||o instanceof L.Circle||o instanceof L.CircleMarker||o instanceof L.ImageOverlay)&&i.push(o)}),i=(i=(i=i.filter(function(o){return!!o.pm})).filter(function(o){return!o._pmTempLayer})).filter(function(o){return!L.PM.optIn&&!o.options.pmIgnore||L.PM.optIn&&o.options.pmIgnore===!1})},circleToPolygon:function(t){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=t.getLatLng(),l=t.getRadius(),b=we(s,l,i,0,o),M=[],k=0;k<b.length;k+=1){var x=[b[k].lat,b[k].lng];M.push(x)}return L.polygon(M,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,i,o){var s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];t.fire(i,o,s);var l=this.getAllParentGroups(t),b=l.groups;b.forEach(function(M){M.fire(i,o,s)})},getAllParentGroups:function(t){var i=[],o=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||new Date().getTime()-t._pmLastGroupFetch.time>1e3?(function s(l){for(var b in l._eventParents)if(i.indexOf(b)===-1){i.push(b);var M=l._eventParents[b];o.push(M),s(M)}}(t),t._pmLastGroupFetch={time:new Date().getTime(),groups:o,groupIds:i},{groupIds:i,groups:o}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:we,getTranslation:ie,findDeepCoordIndex:function(t,i){var o,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],l=function M(k){return function(x,D){var O=k.concat(D);if(s){if(x.lat&&x.lat===i.lat&&x.lng===i.lng)return o=O,!0}else if(x.lat&&L.latLng(x).equals(i))return o=O,!0;return Array.isArray(x)&&x.some(M(O))}};t.some(l([]));var b={};return o&&(b={indexPath:o,index:o[o.length-1],parentPath:o.slice(0,o.length-1)}),b},findDeepMarkerIndex:function(t,i){var o;t.some(function l(b){return function(M,k){var x=b.concat(k);return M._leaflet_id===i._leaflet_id?(o=x,!0):Array.isArray(M)&&M.some(l(x))}}([]));var s={};return o&&(s={indexPath:o,index:o[o.length-1],parentPath:o.slice(0,o.length-1)}),s},_getIndexFromSegment:function(t,i){if(i&&i.length===2){var o=this.findDeepCoordIndex(t,i[0]),s=this.findDeepCoordIndex(t,i[1]),l=Math.max(o.index,s.index);return o.index!==0&&s.index!==0||l===1||(l+=1),{indexA:o,indexB:s,newIndex:l,indexPath:o.indexPath,parentPath:o.parentPath}}return null},_getRotatedRectangle:function(t,i,o,s){var l=Ft(s,t),b=Ft(s,i),M=o*Math.PI/180,k=Math.cos(M),x=Math.sin(M),D=(b.x-l.x)*k+(b.y-l.y)*x,O=(b.y-l.y)*k-(b.x-l.x)*x,W=D*k+l.x,F=D*x+l.y,te=-O*x+l.x,le=O*k+l.y;return[Ct(s,l),Ct(s,{x:W,y:F}),Ct(s,b),Ct(s,{x:te,y:le})]},pxRadiusToMeterRadius:function(t,i,o){var s=i.project(o),l=L.point(s.x+t,s.y);return i.distance(i.unproject(l),o)}};let ni=pn;L.PM=L.PM||{version:"2.15.0",Map:At,Toolbar:qt,Draw:u,Edit:Re,Utils:ni,Matrix:On,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(t){var i=this;t instanceof L.LayerGroup&&t.eachLayer(function(o){i.reInitLayer(o)}),t.pm||L.PM.optIn&&t.options.pmIgnore!==!1||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.options.textMarker?(t.pm=new L.PM.Edit.Text(t),t.pm._initTextMarker(),t.pm._createTextMarker(!1)):t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline?t.pm=new L.PM.Edit.Line(t):t instanceof L.LayerGroup?t.pm=new L.PM.Edit.LayerGroup(t):t instanceof L.ImageOverlay&&(t.pm=new L.PM.Edit.ImageOverlay(t)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(t){for(var i,o,s=this._map.mouseEventToLayerPoint(t),l=this._drawFirst;l;l=l.next)(i=l.layer).options.interactive&&i._containsPoint(s)&&(t.type!=="click"&&t.type!=="preclick"||!this._map._draggableMoved(i))&&(o=i);o&&(L.DomEvent.fakeStop(t),this._fireEvent([o],t))}}),L.PM.initialize()})()})();var Ai=Vn(wn(),1);(function(){L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:!0},initialize:function(U,d){d&&L.Util.setOptions(this,d),this._buildContainer(),this._buttons=[];for(var g=0;g<U.length;g++)U[g]._bar=this,U[g]._container=U[g].button,this._buttons.push(U[g]),this.container.appendChild(U[g].button)},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div",""),this.options.leafletClasses&&L.DomUtil.addClass(this.container,"leaflet-bar easy-button-container leaflet-control"),this.options.id&&(this.container.id=this.options.id)},enable:function(){return L.DomUtil.addClass(this.container,"enabled"),L.DomUtil.removeClass(this.container,"disabled"),this.container.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.container,"disabled"),L.DomUtil.removeClass(this.container,"enabled"),this.container.setAttribute("aria-hidden","true"),this},onAdd:function(){return this.container},addTo:function(U){this._map=U;for(var d=0;d<this._buttons.length;d++)this._buttons[d]._map=U;var g=this._container=this.onAdd(U),h=this.getPosition(),m=U._controlCorners[h];return L.DomUtil.addClass(g,"leaflet-control"),h.indexOf("bottom")!==-1?m.insertBefore(g,m.firstChild):m.appendChild(g),this}}),L.easyBar=function(){for(var U=[L.Control.EasyBar],d=0;d<arguments.length;d++)U.push(arguments[d]);return new(Function.prototype.bind.apply(L.Control.EasyBar,U))},L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:!0,tagName:"button"},initialize:function(U,d,g,h){this.options.states=[],h!=null&&(this.options.id=h),this.storage={},typeof arguments[arguments.length-1]=="object"&&L.Util.setOptions(this,arguments[arguments.length-1]),this.options.states.length===0&&typeof U=="string"&&typeof d=="function"&&this.options.states.push({icon:U,onClick:d,title:typeof g=="string"?g:""}),this._states=[];for(var m=0;m<this.options.states.length;m++)this._states.push(new Z(this.options.states[m],this));this._buildButton(),this._activateState(this._states[0])},_buildButton:function(){if(this.button=L.DomUtil.create(this.options.tagName,""),this.options.tagName==="button"&&this.button.setAttribute("type","button"),this.options.id&&(this.button.id=this.options.id),this.options.leafletClasses&&L.DomUtil.addClass(this.button,"easy-button-button leaflet-bar-part leaflet-interactive"),L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mouseup",L.DomEvent.stop),L.DomEvent.addListener(this.button,"click",function(d){L.DomEvent.stop(d),this._currentState.onClick(this,this._map?this._map:null),this._map&&this._map.getContainer().focus()},this),this.options.type=="replace")this.button.appendChild(this._currentState.icon);else for(var U=0;U<this._states.length;U++)this.button.appendChild(this._states[U].icon)},_currentState:{stateName:"unnamed",icon:function(){return document.createElement("span")}()},_states:null,state:function(U){return arguments.length===0?this._currentState.stateName:(typeof U=="string"?this._activateStateNamed(U):typeof U=="number"&&this._activateState(this._states[U]),this)},_activateStateNamed:function(U){for(var d=0;d<this._states.length;d++)this._states[d].stateName==U&&this._activateState(this._states[d])},_activateState:function(U){if(U!==this._currentState){this.options.type=="replace"&&(this.button.appendChild(U.icon),this.button.removeChild(this._currentState.icon)),U.title?this.button.title=U.title:this.button.removeAttribute("title");for(var d=0;d<this._states.length;d++)L.DomUtil.removeClass(this._states[d].icon,this._currentState.stateName+"-active"),L.DomUtil.addClass(this._states[d].icon,U.stateName+"-active");L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active"),L.DomUtil.addClass(this.button,U.stateName+"-active"),this._currentState=U}},enable:function(){return L.DomUtil.addClass(this.button,"enabled"),L.DomUtil.removeClass(this.button,"disabled"),this.button.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.button,"disabled"),L.DomUtil.removeClass(this.button,"enabled"),this.button.setAttribute("aria-hidden","true"),this},onAdd:function(U){var d=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});return this._anonymousBar=d,this._container=d.container,this._anonymousBar.container},removeFrom:function(U){return this._map===U&&this.remove(),this}}),L.easyButton=function(){var U=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new(Function.prototype.bind.apply(L.Control.EasyButton,U))};function Z(U,d){this.title=U.title,this.stateName=U.stateName?U.stateName:"unnamed-state",this.icon=L.DomUtil.create("span",""),L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,"")),this.icon.innerHTML=re(U.icon),this.onClick=L.Util.bind(U.onClick?U.onClick:function(){},d)}function re(U){var d;return U.match(/[&;=<>"']/)?d=U:(U=U.replace(/(^\s*|\s*$)/g,""),d=L.DomUtil.create("span",""),U.indexOf("fa-")===0?L.DomUtil.addClass(d,"fa "+U):U.indexOf("glyphicon-")===0?L.DomUtil.addClass(d,"glyphicon "+U):L.DomUtil.addClass(d,U),d=d.outerHTML),d}})();var yi=class{map;buttons;constructor(re){this.map=re,this.buttons=new ji(this.map)}},ji=class{guide;home;constructor(re){this.guide=Ai.default.easyButton("fa-question",()=>{window.open("https://github.com/mrt-map/map/wiki/City-Map","_blank")},"Guide").setPosition("topright").addTo(re),this.home=Ai.default.easyButton("fa-house",()=>{window.open("./","_self")},"Return to MRT City Map").setPosition("topright").addTo(re)}};function xn(){return window.acGlobals}function xr([Z,re]){let U=re*64,d=(Z+.5)*-64;return[U,d]}var kn=Vn(wn(),1);var Oi=document.getElementById("importer");function Bi(){let Z=[];return gt.getLayers().forEach(re=>{let U={type:"feature",geometry:{type:re instanceof kn.default.Circle?"point":"polygon",coordinates:[]},properties:{space:re.options.color=="#ff0000"?"city":"airport",shape:re.pm.getShape(),color:re.options.color}};if(re instanceof kn.default.Circle){U.properties.radius=re.getRadius();let d=re.getLatLng();U.geometry.coordinates=[d.lat,d.lng]}else{let d=re.getLatLngs();U.geometry.coordinates=d.map(g=>g.map(h=>[h.lat,h.lng]))}Z.push(U)}),{type:"FeatureCollection",features:Z}}function Ri(Z){Z.features.forEach(re=>{re.properties.shape=="Circle"?gt.addLayer(kn.default.circle(re.geometry.coordinates,{color:re.properties.color,radius:re.properties.radius}).addTo(xn().map)):re.properties.shape=="Rectangle"?gt.addLayer(kn.default.rectangle([re.geometry.coordinates[0],re.geometry.coordinates[2]],{color:re.properties.color}).addTo(xn().map)):gt.addLayer(kn.default.polygon(re.geometry.coordinates,{color:re.properties.color}).addTo(xn().map))})}function wo(){let Z=Oi.files?.[0];if(Z===void 0)return;let re=new FileReader;re.onload=function(){Zi("Do you want to clear all polygons?");let U=JSON.parse(re.result?.toString()??"");Oi.value="",Ri(U),Hn("New polygons imported")},re.readAsText(Z)}Oi.oninput=wo;window.addEventListener("beforeunload",()=>{window.localStorage.airportcalc=JSON.stringify(Bi())});var xo="2.2.1 (20240104)",gt=Mi.default.layerGroup([]),vi=Mi.default.control.bar("bar",{position:"bottom",visible:!1}),Gi="city",Wn="";function kr(){let Z=xn().map;Z.pm.setGlobalOptions({layerGroup:gt,pathOptions:{color:"#ff0000"}}),Z.pm.Toolbar.createCustomControl({name:"cityspace",title:"City Space",block:"custom",className:"fas fa-city icon",toggle:!1,onClick:()=>{Z.pm.setGlobalOptions({layerGroup:gt,pathOptions:{color:"#ff0000"}}),Gi="city"}}),Z.pm.Toolbar.createCustomControl({name:"airportspace",title:"Airport Space",block:"custom",className:"fas fa-plane icon",toggle:!1,onClick:()=>{Z.pm.setGlobalOptions({layerGroup:gt,pathOptions:{color:"#00dd00"}}),Gi="airport"}}),Z.pm.Toolbar.createCustomControl({name:"clearall",title:"Clear All",block:"custom",className:"fas fa-times icon",toggle:!1,onClick:()=>{Zi("Are you sure you want to clear all polygons?")}}),Z.pm.Toolbar.createCustomControl({name:"export",title:"Export",block:"custom",className:"fas fa-file-export icon",toggle:!1,onClick:()=>{let re=document.getElementById("downloader"),U="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(Bi(),null,2));re.href=U,re.download="city.apc",re.click(),Hn("Polygons exported")}}),Z.pm.Toolbar.createCustomControl({name:"import",title:"Import",block:"custom",className:"fas fa-file-import icon",toggle:!1,onClick:()=>{document.getElementById("importer").click()}}),Z.pm.addControls({position:"bottomleft",drawCircleMarker:!1,drawPolyline:!1,drawMarker:!1}),setInterval(()=>{let[re,U,d]=ko();isNaN(d)&&(d=0);let g=`<img src="media/ac2-dark.png" style="height: 100%; float: right;">
          <b>City area size:</b> ${Math.round(re)}m^2
          <b>| Airport area size:</b> ${Math.round(U)}m^2
          <b>| Percentage:</b> <span style="color: ${d<50?"green":"red"};">${Math.round(d*100)/100}%</span>
          <b>| Drawing for:</b> ${Gi}`+(Wn!=""?`<br><b>${Wn}</b>`:"");vi.getContainer()?.innerHTML!=g&&vi.setContent(g)},50),window.localStorage.airportcalc!=null&&(Ri(JSON.parse(window.localStorage.airportcalc)),delete window.localStorage.airportcalc),Z.addLayer(gt),Z.addControl(vi),vi.show(),Hn("Airportcalc "+xo)}function Zi(Z){gt.getLayers().length!=0&&confirm(Z)&&(gt.clearLayers(),Hn("Polygons cleared"))}function ko(){let Z=0,re=0;return gt.getLayers().forEach(U=>{let d=0;if(U instanceof Mi.default.Polygon)for(let g=0;g<U.getLatLngs().length;g++){let h=0,m=U.getLatLngs()[g].map(_=>xr([_.lat,_.lng]));for(let _=0;_<m.length;_++){let T=m[_],v=m[_+1];_==m.length-1&&(v=m[0]),h+=.5*(T[1]+v[1])*(v[0]-T[0])}g==0?d+=Math.abs(h):d-=Math.abs(h)}else{let g=U.getRadius()*64;d=Math.PI*g**2}U.options.color=="#ff0000"?Z+=Math.abs(d):re+=Math.abs(d)}),[Z,re,re/Z*100]}function Hn(Z){Wn=Z,setTimeout(()=>{Wn==Z&&(Wn="")},3e3)}var qn=Vn(wn(),1),Ui=class extends qn.default.TileLayer{getTileUrl(re){let U=2**(8-re.z),d=re.x*1,g=re.y*-1,h={x:Math.floor(d*U/32),y:Math.floor(g*U/32)},m={x:Math.floor(d*U),y:Math.floor(g*U)},_="";for(let v=8;v>re.z;v--)_+="z";return _.length!=0&&(_+="_"),`https://dynmap.minecartrapidtransit.net/main/tiles/new/flat/${h.x}_${h.y}/${_}${m.x}_${m.y}.png`}},Co=function(Z,re){return new Ui(Z,re)};function Cr(){let Z=qn.default.map("map",{crs:qn.default.CRS.Simple}).setView([0,0],8);return Co("unused url; check custom function",{maxZoom:8,id:"map",tileSize:128,zoomOffset:0,noWrap:!0,bounds:[[-900,-900],[900,900]],attribution:"Minecart Rapid Transit"}).addTo(Z),qn.default.control.zoom({position:"topright"}).addTo(Z),Z}var Fi=Vn(wn(),1);delete Fi.default.Icon.Default.prototype._getIconUrl;Fi.default.Icon.Default.mergeOptions({iconRetinaUrl:Ir(),iconUrl:Dr(),shadowUrl:Tr()});window.acGlobals=new yi(Cr());kr();})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)
*/
//# sourceMappingURL=https://mrt-map.github.io/map/out-ac.js.map
